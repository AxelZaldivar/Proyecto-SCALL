(self["webpackChunkscall"]=self["webpackChunkscall"]||[]).push([[998],{9662:function(t,e,n){var i=n(614),r=n(6330),s=TypeError;t.exports=function(t){if(i(t))return t;throw s(r(t)+" is not a function")}},6077:function(t,e,n){var i=n(614),r=String,s=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw s("Can't set "+r(t)+" as a prototype")}},5787:function(t,e,n){var i=n(7976),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw r("Incorrect invocation")}},9670:function(t,e,n){var i=n(111),r=String,s=TypeError;t.exports=function(t){if(i(t))return t;throw s(r(t)+" is not an object")}},3013:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var i,r,s,o=n(3013),a=n(9781),c=n(7854),l=n(614),u=n(111),h=n(2597),d=n(648),f=n(6330),p=n(8880),g=n(8052),m=n(7045),y=n(7976),v=n(9518),b=n(7674),w=n(5112),_=n(9711),x=n(9909),I=x.enforce,E=x.get,T=c.Int8Array,S=T&&T.prototype,k=c.Uint8ClampedArray,C=k&&k.prototype,A=T&&v(T),D=S&&v(S),R=Object.prototype,O=c.TypeError,P=w("toStringTag"),M=_("TYPED_ARRAY_TAG"),N="TypedArrayConstructor",L=o&&!!b&&"Opera"!==d(c.opera),F=!1,V={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},B=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||h(V,e)||h(U,e)},j=function(t){var e=v(t);if(u(e)){var n=E(e);return n&&h(n,N)?n[N]:j(e)}},z=function(t){if(!u(t))return!1;var e=d(t);return h(V,e)||h(U,e)},q=function(t){if(z(t))return t;throw O("Target is not a typed array")},$=function(t){if(l(t)&&(!b||y(A,t)))return t;throw O(f(t)+" is not a typed array constructor")},W=function(t,e,n,i){if(a){if(n)for(var r in V){var s=c[r];if(s&&h(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(l){}}}D[t]&&!n||g(D,t,n?e:L&&S[t]||e,i)}},H=function(t,e,n){var i,r;if(a){if(b){if(n)for(i in V)if(r=c[i],r&&h(r,t))try{delete r[t]}catch(s){}if(A[t]&&!n)return;try{return g(A,t,n?e:L&&A[t]||e)}catch(s){}}for(i in V)r=c[i],!r||r[t]&&!n||g(r,t,e)}};for(i in V)r=c[i],s=r&&r.prototype,s?I(s)[N]=r:L=!1;for(i in U)r=c[i],s=r&&r.prototype,s&&(I(s)[N]=r);if((!L||!l(A)||A===Function.prototype)&&(A=function(){throw O("Incorrect invocation")},L))for(i in V)c[i]&&b(c[i],A);if((!L||!D||D===R)&&(D=A.prototype,L))for(i in V)c[i]&&b(c[i].prototype,D);if(L&&v(C)!==D&&b(C,D),a&&!h(D,P))for(i in F=!0,m(D,P,{configurable:!0,get:function(){return u(this)?this[M]:void 0}}),V)c[i]&&p(c[i],M,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:F&&M,aTypedArray:q,aTypedArrayConstructor:$,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:H,getTypedArrayConstructor:j,isView:B,isTypedArray:z,TypedArray:A,TypedArrayPrototype:D}},7745:function(t,e,n){var i=n(6244);t.exports=function(t,e){var n=0,r=i(e),s=new t(r);while(r>n)s[n]=e[n++];return s}},1318:function(t,e,n){var i=n(5656),r=n(1400),s=n(6244),o=function(t){return function(e,n,o){var a,c=i(e),l=s(c),u=r(o,l);if(t&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},3658:function(t,e,n){"use strict";var i=n(9781),r=n(3157),s=TypeError,o=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!o(t,"length").writable)throw s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1843:function(t,e,n){var i=n(6244);t.exports=function(t,e){for(var n=i(t),r=new e(n),s=0;s<n;s++)r[s]=t[n-s-1];return r}},1572:function(t,e,n){var i=n(6244),r=n(9303),s=RangeError;t.exports=function(t,e,n,o){var a=i(t),c=r(n),l=c<0?a+c:c;if(l>=a||l<0)throw s("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===l?o:t[h];return u}},4326:function(t,e,n){var i=n(1702),r=i({}.toString),s=i("".slice);t.exports=function(t){return s(r(t),8,-1)}},648:function(t,e,n){var i=n(1694),r=n(614),s=n(4326),o=n(5112),a=o("toStringTag"),c=Object,l="Arguments"==s(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=i?s:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=c(t),a))?n:l?s(e):"Object"==(i=s(e))&&r(e.callee)?"Arguments":i}},9920:function(t,e,n){var i=n(2597),r=n(3887),s=n(1236),o=n(3070);t.exports=function(t,e,n){for(var a=r(e),c=o.f,l=s.f,u=0;u<a.length;u++){var h=a[u];i(t,h)||n&&i(n,h)||c(t,h,l(e,h))}}},8544:function(t,e,n){var i=n(7293);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){var i=n(9781),r=n(3070),s=n(9114);t.exports=i?function(t,e,n){return r.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7045:function(t,e,n){var i=n(6339),r=n(3070);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},8052:function(t,e,n){var i=n(614),r=n(3070),s=n(6339),o=n(3072);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(i(n)&&s(n,l,a),a.global)c?t[e]=n:o(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(u){}c?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){var i=n(7854),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9781:function(t,e,n){var i=n(7293);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var i=n(7854),r=n(111),s=i.document,o=r(s)&&r(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},7207:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var i,r,s=n(7854),o=n(8113),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(i=u.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),t.exports=r},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(t,e,n){var i=n(1702),r=Error,s=i("".replace),o=function(t){return String(r(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);t.exports=function(t,e){if(c&&"string"==typeof t&&!r.prepareStackTrace)while(e--)t=s(t,a,"");return t}},2109:function(t,e,n){var i=n(7854),r=n(1236).f,s=n(8880),o=n(8052),a=n(3072),c=n(9920),l=n(4705);t.exports=function(t,e){var n,u,h,d,f,p,g=t.target,m=t.global,y=t.stat;if(u=m?i:y?i[g]||a(g,{}):(i[g]||{}).prototype,u)for(h in e){if(f=e[h],t.dontCallGetSet?(p=r(u,h),d=p&&p.value):d=u[h],n=l(m?h:g+(y?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&s(f,"sham",!0),o(u,h,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},4374:function(t,e,n){var i=n(7293);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var i=n(4374),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},6530:function(t,e,n){var i=n(9781),r=n(2597),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=r(s,"name"),c=a&&"something"===function(){}.name,l=a&&(!i||i&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},5668:function(t,e,n){var i=n(1702),r=n(9662);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(s){}}},1702:function(t,e,n){var i=n(4374),r=Function.prototype,s=r.call,o=i&&r.bind.bind(s,s);t.exports=i?o:function(t){return function(){return s.apply(t,arguments)}}},5005:function(t,e,n){var i=n(7854),r=n(614),s=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(i[t]):i[t]&&i[t][e]}},8173:function(t,e,n){var i=n(9662),r=n(8554);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},7854:function(t,e,n){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){var i=n(1702),r=n(7908),s=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(r(t),e)}},3501:function(t){t.exports={}},4664:function(t,e,n){var i=n(9781),r=n(7293),s=n(317);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var i=n(1702),r=n(7293),s=n(4326),o=Object,a=i("".split);t.exports=r((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?a(t,""):o(t)}:o},9587:function(t,e,n){var i=n(614),r=n(111),s=n(7674);t.exports=function(t,e,n){var o,a;return s&&i(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&s(t,a),t}},2788:function(t,e,n){var i=n(1702),r=n(614),s=n(5465),o=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},9909:function(t,e,n){var i,r,s,o=n(4811),a=n(7854),c=n(111),l=n(8880),u=n(2597),h=n(5465),d=n(6200),f=n(3501),p="Object already initialized",g=a.TypeError,m=a.WeakMap,y=function(t){return s(t)?r(t):i(t,{})},v=function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}};if(o||h.state){var b=h.state||(h.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,i=function(t,e){if(b.has(t))throw g(p);return e.facade=t,b.set(t,e),e},r=function(t){return b.get(t)||{}},s=function(t){return b.has(t)}}else{var w=d("state");f[w]=!0,i=function(t,e){if(u(t,w))throw g(p);return e.facade=t,l(t,w,e),e},r=function(t){return u(t,w)?t[w]:{}},s=function(t){return u(t,w)}}t.exports={set:i,get:r,has:s,enforce:y,getterFor:v}},3157:function(t,e,n){var i=n(4326);t.exports=Array.isArray||function(t){return"Array"==i(t)}},4067:function(t,e,n){var i=n(648);t.exports=function(t){var e=i(t);return"BigInt64Array"==e||"BigUint64Array"==e}},614:function(t,e,n){var i=n(4154),r=i.all;t.exports=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},4705:function(t,e,n){var i=n(7293),r=n(614),s=/#|\.prototype\./,o=function(t,e){var n=c[a(t)];return n==u||n!=l&&(r(e)?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},8554:function(t){t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){var i=n(614),r=n(4154),s=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===s}:function(t){return"object"==typeof t?null!==t:i(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var i=n(5005),r=n(614),s=n(7976),o=n(3307),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&s(e.prototype,a(t))}},6244:function(t,e,n){var i=n(7466);t.exports=function(t){return i(t.length)}},6339:function(t,e,n){var i=n(1702),r=n(7293),s=n(614),o=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),u=n(9909),h=u.enforce,d=u.get,f=String,p=Object.defineProperty,g=i("".slice),m=i("".replace),y=i([].join),v=a&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&o(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(r){}var i=h(t);return o(i,"source")||(i.source=y(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return s(this)&&d(this).source||l(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},6277:function(t,e,n){var i=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}},3070:function(t,e,n){var i=n(9781),r=n(4664),s=n(3353),o=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=i?s?function(t,e,n){if(o(t),e=a(e),o(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=u(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:h in n?n[h]:i[h],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(o(t),e=a(e),o(n),r)try{return l(t,e,n)}catch(i){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var i=n(9781),r=n(6916),s=n(5296),o=n(9114),a=n(5656),c=n(4948),l=n(2597),u=n(4664),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(n){}if(l(t,e))return o(!r(s.f,t,e),t[e])}},8006:function(t,e,n){var i=n(6324),r=n(748),s=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var i=n(2597),r=n(614),s=n(7908),o=n(6200),a=n(8544),c=o("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=s(t);if(i(e,c))return e[c];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof l?u:null}},7976:function(t,e,n){var i=n(1702);t.exports=i({}.isPrototypeOf)},6324:function(t,e,n){var i=n(1702),r=n(2597),s=n(5656),o=n(1318).indexOf,a=n(3501),c=i([].push);t.exports=function(t,e){var n,i=s(t),l=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&c(u,n);while(e.length>l)r(i,n=e[l++])&&(~o(u,n)||c(u,n));return u}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var i=n(5668),r=n(9670),s=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=i(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(o){}return function(n,i){return r(n),s(i),e?t(n,i):n.__proto__=i,n}}():void 0)},2140:function(t,e,n){var i=n(6916),r=n(614),s=n(111),o=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!s(a=i(n,t)))return a;if(r(n=t.valueOf)&&!s(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!s(a=i(n,t)))return a;throw o("Can't convert object to primitive value")}},3887:function(t,e,n){var i=n(5005),r=n(1702),s=n(8006),o=n(5181),a=n(9670),c=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=s.f(a(t)),n=o.f;return n?c(e,n(t)):e}},4488:function(t,e,n){var i=n(8554),r=TypeError;t.exports=function(t){if(i(t))throw r("Can't call method on "+t);return t}},6200:function(t,e,n){var i=n(2309),r=n(9711),s=i("keys");t.exports=function(t){return s[t]||(s[t]=r(t))}},5465:function(t,e,n){var i=n(7854),r=n(3072),s="__core-js_shared__",o=i[s]||r(s,{});t.exports=o},2309:function(t,e,n){var i=n(1913),r=n(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:i?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){var i=n(7392),r=n(7293),s=n(7854),o=s.String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},1400:function(t,e,n){var i=n(9303),r=Math.max,s=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):s(n,e)}},4599:function(t,e,n){var i=n(7593),r=TypeError;t.exports=function(t){var e=i(t,"number");if("number"==typeof e)throw r("Can't convert number to bigint");return BigInt(e)}},5656:function(t,e,n){var i=n(8361),r=n(4488);t.exports=function(t){return i(r(t))}},9303:function(t,e,n){var i=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},7466:function(t,e,n){var i=n(9303),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},7908:function(t,e,n){var i=n(4488),r=Object;t.exports=function(t){return r(i(t))}},7593:function(t,e,n){var i=n(6916),r=n(111),s=n(2190),o=n(8173),a=n(2140),c=n(5112),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!r(t)||s(t))return t;var n,c=o(t,u);if(c){if(void 0===e&&(e="default"),n=i(c,t,e),!r(n)||s(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){var i=n(7593),r=n(2190);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},1694:function(t,e,n){var i=n(5112),r=i("toStringTag"),s={};s[r]="z",t.exports="[object z]"===String(s)},1340:function(t,e,n){var i=n(648),r=String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){var i=n(1702),r=0,s=Math.random(),o=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++r+s,36)}},3307:function(t,e,n){var i=n(6293);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var i=n(9781),r=n(7293);t.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,n){var i=n(7854),r=n(614),s=i.WeakMap;t.exports=r(s)&&/native code/.test(String(s))},5112:function(t,e,n){var i=n(7854),r=n(2309),s=n(2597),o=n(9711),a=n(6293),c=n(3307),l=i.Symbol,u=r("wks"),h=c?l["for"]||l:l&&l.withoutSetter||o;t.exports=function(t){return s(u,t)||(u[t]=a&&s(l,t)?l[t]:h("Symbol."+t)),u[t]}},7658:function(t,e,n){"use strict";var i=n(2109),r=n(7908),s=n(6244),o=n(3658),a=n(7207),c=n(7293),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=l||!u();i({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=r(this),n=s(e),i=arguments.length;a(n+i);for(var c=0;c<i;c++)e[n]=arguments[c],n++;return o(e,n),n}})},1439:function(t,e,n){"use strict";var i=n(1843),r=n(260),s=r.aTypedArray,o=r.exportTypedArrayMethod,a=r.getTypedArrayConstructor;o("toReversed",(function(){return i(s(this),a(this))}))},7585:function(t,e,n){"use strict";var i=n(260),r=n(1702),s=n(9662),o=n(7745),a=i.aTypedArray,c=i.getTypedArrayConstructor,l=i.exportTypedArrayMethod,u=r(i.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&s(t);var e=a(this),n=o(c(e),e);return u(n,t)}))},5315:function(t,e,n){"use strict";var i=n(1572),r=n(260),s=n(4067),o=n(9303),a=n(4599),c=r.aTypedArray,l=r.getTypedArrayConstructor,u=r.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=c(this),r=o(t),u=s(n)?a(e):+e;return i(n,l(n),r,u)}}["with"],!h)},3767:function(t,e,n){n(1439)},8585:function(t,e,n){n(7585)},8696:function(t,e,n){n(5315)},2801:function(t,e,n){"use strict";var i=n(2109),r=n(7854),s=n(5005),o=n(9114),a=n(3070).f,c=n(2597),l=n(5787),u=n(9587),h=n(6277),d=n(3678),f=n(1060),p=n(9781),g=n(1913),m="DOMException",y=s("Error"),v=s(m),b=function(){l(this,w);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),i=new v(e,n),r=y(e);return r.name=m,a(i,"stack",o(1,f(r.stack,1))),u(i,this,b),i},w=b.prototype=v.prototype,_="stack"in y(m),x="stack"in new v(1,2),I=v&&p&&Object.getOwnPropertyDescriptor(r,m),E=!!I&&!(I.writable&&I.configurable),T=_&&!E&&!x;i({global:!0,constructor:!0,forced:g||T},{DOMException:T?b:v});var S=s(m),k=S.prototype;if(k.constructor!==S)for(var C in g||a(k,"constructor",o(1,S)),d)if(c(d,C)){var A=d[C],D=A.s;c(S,D)||a(S,D,o(6,A.c))}},7478:function(t,e,n){"use strict";n.d(e,{$:function(){return Ye},A:function(){return l},D:function(){return d},I:function(){return Yt},J:function(){return te},L:function(){return ge},N:function(){return dt},P:function(){return Qi},Q:function(){return Te},R:function(){return zi},U:function(){return Ae},V:function(){return De},W:function(){return Re},X:function(){return Ce},Y:function(){return Ne},Z:function(){return Le},_:function(){return Be},a:function(){return Zn},a0:function(){return Qe},a1:function(){return Je},a2:function(){return Ze},a3:function(){return sn},a4:function(){return on},a5:function(){return an},a6:function(){return cn},a7:function(){return ln},a8:function(){return un},a9:function(){return hn},aA:function(){return I},aB:function(){return kr},aC:function(){return ut},aD:function(){return ft},aE:function(){return Er},aF:function(){return pr},aG:function(){return fr},aH:function(){return Wt},aL:function(){return ni},aO:function(){return Pe},aa:function(){return dn},ab:function(){return fn},ac:function(){return pn},ad:function(){return mn},ae:function(){return yn},af:function(){return vn},ai:function(){return wn},aj:function(){return _n},ak:function(){return xn},an:function(){return $e},ao:function(){return Rn},aq:function(){return Ln},ar:function(){return $n},as:function(){return T},at:function(){return It},au:function(){return wt},av:function(){return v},aw:function(){return ss},ax:function(){return Rr},ay:function(){return Et},az:function(){return b},b:function(){return Jn},c:function(){return rr},d:function(){return or},e:function(){return sr},f:function(){return yr},g:function(){return _r},h:function(){return br},i:function(){return Ei},j:function(){return Ir},k:function(){return ls},l:function(){return Hi},m:function(){return ds},o:function(){return Ss},p:function(){return c},r:function(){return Gi},s:function(){return Wi},u:function(){return Yi}});n(7658);var i=n(223),r=n(7077);function s(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}Object.create;Object.create;var o=n(5168),a=n(7142);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend."}}function h(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d=u,f=h,p=new i.LL("auth","Firebase",h()),g=new o.Yd("@firebase/auth");function m(t,...e){g.logLevel<=o["in"].WARN&&g.warn(`Auth (${r.SDK_VERSION}): ${t}`,...e)}function y(t,...e){g.logLevel<=o["in"].ERROR&&g.error(`Auth (${r.SDK_VERSION}): ${t}`,...e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t,...e){throw x(t,...e)}function b(t,...e){return x(t,...e)}function w(t,e,n){const r=Object.assign(Object.assign({},f()),{[e]:n}),s=new i.LL("auth","Firebase",r);return s.create(e,{appName:t.name})}function _(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&v(t,"argument-error"),w(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function x(t,...e){if("string"!==typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return p.create(t,...e)}function I(t,e,...n){if(!t)throw x(e,...n)}function E(t){const e="INTERNAL ASSERTION FAILED: "+t;throw y(e),new Error(e)}function T(t,e){t||E(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function k(){return"http:"===C()||"https:"===C()}function C(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(k()||(0,i.ru)()||"connection"in navigator))||navigator.onLine}function D(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(t,e){this.shortDelay=t,this.longDelay=e,T(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return A()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t,e){T(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void E("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void E("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void E("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"},N=new R(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function F(t,e,n,r,s={}){return V(t,s,(async()=>{let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=(0,i.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),P.fetch()(B(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))}async function V(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},M),e);try{const e=new j(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw z(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw z(t,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw w(t,a,o);v(t,a)}}catch(s){if(s instanceof i.ZR)throw s;v(t,"network-request-failed",{message:String(s)})}}async function U(t,e,n,i,r={}){const s=await F(t,e,n,i,r);return"mfaPendingCredential"in s&&v(t,"multi-factor-auth-required",{_serverResponse:s}),s}function B(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?O(t.config,r):`${t.config.apiScheme}://${r}`}class j{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(b(this.auth,"network-request-failed"))),N.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function z(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=b(t,e,i);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q(t,e){return F(t,"POST","/v1/accounts:delete",e)}async function $(t,e){return F(t,"POST","/v1/accounts:update",e)}async function W(t,e){return F(t,"POST","/v1/accounts:lookup",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G(t,e=!1){const n=(0,i.m9)(t),r=await n.getIdToken(e),s=Y(r);I(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:s,token:r,authTime:H(K(s.auth_time)),issuedAtTime:H(K(s.iat)),expirationTime:H(K(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function K(t){return 1e3*Number(t)}function Y(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return y("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,i.tV)(n);return t?JSON.parse(t):(y("Failed to decode base64 JWT payload"),null)}catch(s){return y("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function Q(t){const e=Y(t);return I(e,"internal-error"),I("undefined"!==typeof e.exp,"internal-error"),I("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof i.ZR&&X(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function X({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0,n=t-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===t||void 0===t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=H(this.lastLoginAt),this.creationTime=H(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function et(t){var e;const n=t.auth,i=await t.getIdToken(),r=await J(t,W(n,{idToken:i}));I(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?rt(s.providerUserInfo):[],a=it(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!c&&l,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tt(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function nt(t){const e=(0,i.m9)(t);await et(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function it(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}function rt(t){return t.map((t=>{var{providerId:e}=t,n=s(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function st(t,e){const n=await V(t,{},(async()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=B(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",P.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){I(t.idToken,"internal-error"),I("undefined"!==typeof t.idToken,"internal-error"),I("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):Q(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return I(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await st(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new ot;return n&&(I("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(I("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(I("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ot,this.toJSON())}_performRefresh(){return E("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){I("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class ct{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=s(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new tt(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await J(this,this.stsTokenManager.getToken(this.auth,t));return I(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return G(this,t)}reload(){return nt(this)}_assign(t){this!==t&&(I(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ct(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await et(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await J(this,q(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:x}=e;I(v&&x,t,"internal-error");const E=ot.fromJSON(this.name,x);I("string"===typeof v,t,"internal-error"),at(u,t.name),at(h,t.name),I("boolean"===typeof b,t,"internal-error"),I("boolean"===typeof w,t,"internal-error"),at(d,t.name),at(f,t.name),at(p,t.name),at(g,t.name),at(m,t.name),at(y,t.name);const T=new ct({uid:v,auth:t,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((t=>Object.assign({},t)))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(t,e,n=!1){const i=new ot;i.updateFromServerResponse(e);const r=new ct({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await et(r),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt=new Map;function ut(t){T(t instanceof Function,"Expected a class definition");let e=lt.get(t);return e?(T(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lt.set(t,e),e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}ht.type="NONE";const dt=ht;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e,n){return`firebase:${t}:${e}:${n}`}class pt{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ft(this.userKey,i.apiKey,r),this.fullPersistenceKey=ft("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?ct._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new pt(ut(dt),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||ut(dt);const s=ft(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const e=await l._get(s);if(e){const n=ct._fromJSON(t,e);l!==r&&(o=n),r=l;break}}catch(c){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(c){}}))),new pt(r,t,n)):new pt(r,t,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_t(e))return"Blackberry";if(xt(e))return"Webos";if(yt(e))return"Safari";if((e.includes("chrome/")||vt(e))&&!e.includes("edge/"))return"Chrome";if(wt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function mt(t=(0,i.z$)()){return/firefox\//i.test(t)}function yt(t=(0,i.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vt(t=(0,i.z$)()){return/crios\//i.test(t)}function bt(t=(0,i.z$)()){return/iemobile/i.test(t)}function wt(t=(0,i.z$)()){return/android/i.test(t)}function _t(t=(0,i.z$)()){return/blackberry/i.test(t)}function xt(t=(0,i.z$)()){return/webos/i.test(t)}function It(t=(0,i.z$)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Et(t=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Tt(t=(0,i.z$)()){var e;return It(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function St(){return(0,i.w1)()&&10===document.documentMode}function kt(t=(0,i.z$)()){return It(t)||wt(t)||xt(t)||_t(t)||/windows phone/i.test(t)||bt(t)}function Ct(){try{return!(!window||window===window.top)}catch(t){return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e=[]){let n;switch(t){case"Browser":n=gt((0,i.z$)());break;case"Worker":n=`${gt((0,i.z$)())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.SDK_VERSION}/${s}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dt(t){return(await F(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Rt(t,e){return F(t,"GET","/v2/recaptchaConfig",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return void 0!==t&&void 0!==t.getResponse}function Pt(t){return void 0!==t&&void 0!==t.enterprise}class Mt{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}function Lt(t){return new Promise(((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=b("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",Nt().appendChild(i)}))}function Ft(t){return`__${t}${Math.floor(1e6*Math.random())}`}const Vt="https://www.google.com/recaptcha/enterprise.js?render=",Ut="recaptcha-enterprise",Bt="NO_RECAPTCHA";class jt{constructor(t){this.type=Ut,this.auth=Wt(t)}async verify(t="verify",e=!1){async function n(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{Rt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Mt(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))}function i(e,n,i){const r=window.grecaptcha;Pt(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n(Bt)}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,r)=>{n(this.auth).then((n=>{if(!e&&Pt(window.grecaptcha))i(n,t,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Lt(Vt+n).then((()=>{i(n,t,r)})).catch((t=>{r(t)}))}})).catch((t=>{r(t)}))}))}}async function zt(t,e,n,i=!1){const r=new jt(t);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{const i=t(e);n(i)}catch(r){i(r)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ht(this),this.idTokenSubscription=new Ht(this),this.beforeStateQueue=new qt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=ut(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await pt.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await et(t)}catch(e){if("auth/network-request-failed"!==(null===e||void 0===e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=D()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,i.m9)(t):null;return e&&I(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&I(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ut(t))}))}async initializeRecaptchaConfig(){const t=await Rt(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),e=new Mt(t);if(null==this.tenantId?this._agentRecaptchaConfig=e:this._tenantRecaptchaConfigs[this.tenantId]=e,e.emailPasswordEnabled){const t=new jt(this);t.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new i.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&ut(t)||this._popupRedirectResolver;I(e,this,"argument-error"),this.redirectPersistenceManager=await pt.create(this,[ut(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return I(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"===typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=At(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null===e||void 0===e?void 0:e.error)&&m(`Error while retrieving App Check token: ${e.error}`),null===e||void 0===e?void 0:e.token}}function Wt(t){return(0,i.m9)(t)}class Ht{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,i.ne)((t=>this.observer=t))}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t,e){const n=(0,r._getProvider)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),r=n.getOptions();if((0,i.vZ)(r,null!==e&&void 0!==e?e:{}))return t;v(t,"already-initialized")}const s=n.initialize({options:e});return s}function Kt(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ut);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}function Yt(t,e,n){const i=Wt(t);I(i._canInitEmulator,i,"emulator-config-failed"),I(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Qt(e),{host:o,port:a}=Jt(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Zt()}function Qt(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Jt(t){const e=Qt(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Xt(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Xt(e)}}}function Xt(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Zt(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return E("not implemented")}_getIdTokenResponse(t){return E("not implemented")}_linkToIdToken(t,e){return E("not implemented")}_getReauthenticationResolver(t){return E("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ee(t,e){return F(t,"POST","/v1/accounts:resetPassword",L(t,e))}async function ne(t,e){return F(t,"POST","/v1/accounts:update",e)}async function ie(t,e){return F(t,"POST","/v1/accounts:update",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function re(t,e){return U(t,"POST","/v1/accounts:signInWithPassword",L(t,e))}async function se(t,e){return F(t,"POST","/v1/accounts:sendOobCode",L(t,e))}async function oe(t,e){return se(t,e)}async function ae(t,e){return se(t,e)}async function ce(t,e){return se(t,e)}async function le(t,e){return se(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ue(t,e){return U(t,"POST","/v1/accounts:signInWithEmailLink",L(t,e))}async function he(t,e){return U(t,"POST","/v1/accounts:signInWithEmailLink",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de extends te{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new de(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new de(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){var e;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(e=t._getRecaptchaConfig())||void 0===e?void 0:e.emailPasswordEnabled){const e=await zt(t,n,"signInWithPassword");return re(t,e)}return re(t,n).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await zt(t,n,"signInWithPassword");return re(t,e)}return Promise.reject(e)}));case"emailLink":return ue(t,{email:this._email,oobCode:this._password});default:v(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return ne(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return he(t,{idToken:e,email:this._email,oobCode:this._password});default:v(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fe(t,e){return U(t,"POST","/v1/accounts:signInWithIdp",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe="http://localhost";class ge extends te{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new ge(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):v("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=s(e,["providerId","signInMethod"]);if(!n||!i)return null;const o=new ge(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return fe(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,fe(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,fe(t,e)}buildRequest(){const t={requestUri:pe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e["id_token"]=this.idToken),this.accessToken&&(e["access_token"]=this.accessToken),this.secret&&(e["oauth_token_secret"]=this.secret),e["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(e["nonce"]=this.nonce),t.postBody=(0,i.xO)(e)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function me(t,e){return F(t,"POST","/v1/accounts:sendVerificationCode",L(t,e))}async function ye(t,e){return U(t,"POST","/v1/accounts:signInWithPhoneNumber",L(t,e))}async function ve(t,e){const n=await U(t,"POST","/v1/accounts:signInWithPhoneNumber",L(t,e));if(n.temporaryProof)throw z(t,"account-exists-with-different-credential",n);return n}const be={["USER_NOT_FOUND"]:"user-not-found"};async function we(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return U(t,"POST","/v1/accounts:signInWithPhoneNumber",L(t,n),be)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e extends te{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new _e({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new _e({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return ye(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return ve(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return we(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new _e({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ie(t){const e=(0,i.zd)((0,i.pd)(t))["link"],n=e?(0,i.zd)((0,i.pd)(e))["deep_link_id"]:null,r=(0,i.zd)((0,i.pd)(t))["deep_link_id"],s=r?(0,i.zd)((0,i.pd)(r))["link"]:null;return s||r||n||e||t}class Ee{constructor(t){var e,n,r,s,o,a;const c=(0,i.zd)((0,i.pd)(t)),l=null!==(e=c["apiKey"])&&void 0!==e?e:null,u=null!==(n=c["oobCode"])&&void 0!==n?n:null,h=xe(null!==(r=c["mode"])&&void 0!==r?r:null);I(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(s=c["continueUrl"])&&void 0!==s?s:null,this.languageCode=null!==(o=c["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(a=c["tenantId"])&&void 0!==a?a:null}static parseLink(t){const e=Ie(t);try{return new Ee(e)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Te{constructor(){this.providerId=Te.PROVIDER_ID}static credential(t,e){return de._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ee.parseLink(e);return I(n,"argument-error"),de._fromEmailAndCode(t,n.code,n.tenantId)}}Te.PROVIDER_ID="password",Te.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Te.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Se{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke extends Se{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ce extends ke{static credentialFromJSON(t){const e="string"===typeof t?JSON.parse(t):t;return I("providerId"in e&&"signInMethod"in e,"argument-error"),ge._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return I(t.idToken||t.accessToken,"argument-error"),ge._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return Ce.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Ce.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=t;if(!n&&!i&&!e&&!r)return null;if(!o)return null;try{return new Ce(o)._credential({idToken:e,accessToken:n,nonce:s,pendingToken:r})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends ke{constructor(){super("facebook.com")}static credential(t){return ge._fromParams({providerId:Ae.PROVIDER_ID,signInMethod:Ae.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ae.credentialFromTaggedObject(t)}static credentialFromError(t){return Ae.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ae.credential(t.oauthAccessToken)}catch(e){return null}}}Ae.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ae.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class De extends ke{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return ge._fromParams({providerId:De.PROVIDER_ID,signInMethod:De.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return De.credentialFromTaggedObject(t)}static credentialFromError(t){return De.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return De.credential(e,n)}catch(i){return null}}}De.GOOGLE_SIGN_IN_METHOD="google.com",De.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Re extends ke{constructor(){super("github.com")}static credential(t){return ge._fromParams({providerId:Re.PROVIDER_ID,signInMethod:Re.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Re.credentialFromTaggedObject(t)}static credentialFromError(t){return Re.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Re.credential(t.oauthAccessToken)}catch(e){return null}}}Re.GITHUB_SIGN_IN_METHOD="github.com",Re.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Oe="http://localhost";class Pe extends te{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return fe(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,fe(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,fe(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:r}=e;return n&&i&&r&&n===i?new Pe(n,r):null}static _create(t,e){return new Pe(t,e)}buildRequest(){return{requestUri:Oe,returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me="saml.";class Ne extends Se{constructor(t){I(t.startsWith(Me),"argument-error"),super(t)}static credentialFromResult(t){return Ne.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Ne.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=Pe.fromJSON(t);return I(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return Pe._create(n,e)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends ke{constructor(){super("twitter.com")}static credential(t,e){return ge._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Le.credentialFromTaggedObject(t)}static credentialFromError(t){return Le.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Le.credential(e,n)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Fe(t,e){return U(t,"POST","/v1/accounts:signUp",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Le.TWITTER_SIGN_IN_METHOD="twitter.com",Le.PROVIDER_ID="twitter.com";class Ve{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await ct._fromIdTokenResponse(t,n,i),s=Ue(n),o=new Ve({user:r,providerId:s,_tokenResponse:n,operationType:e});return o}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Ue(n);return new Ve({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Ue(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Be(t){var e;const n=Wt(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new Ve({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Fe(n,{returnSecureToken:!0}),r=await Ve._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends i.ZR{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,je.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new je(t,e,n,i)}}function ze(t,e,n,i){const r="reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t);return r.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw je._fromErrorAndOperation(t,n,e,i);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $e(t,e){const n=(0,i.m9)(t);await He(!0,n,e);const{providerUserInfo:r}=await $(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=qe(r||[]);return n.providerData=n.providerData.filter((t=>s.has(t.providerId))),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function We(t,e,n=!1){const i=await J(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ve._forOperation(t,"link",i)}async function He(t,e,n){await et(e);const i=qe(e.providerData),r=!1===t?"provider-already-linked":"no-such-provider";I(i.has(n)===t,e.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ge(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await J(t,ze(i,r,e,t),n);I(s.idToken,i,"internal-error");const o=Y(s.idToken);I(o,i,"internal-error");const{sub:a}=o;return I(t.uid===a,i,"user-mismatch"),Ve._forOperation(t,r,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&v(i,"user-mismatch"),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ke(t,e,n=!1){const i="signIn",r=await ze(t,i,e),s=await Ve._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Ye(t,e){return Ke(Wt(t),e)}async function Qe(t,e){const n=(0,i.m9)(t);return await He(!1,n,e.providerId),We(n,e)}async function Je(t,e){return Ge((0,i.m9)(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xe(t,e){return U(t,"POST","/v1/accounts:signInWithCustomToken",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ze(t,e){const n=Wt(t),i=await Xe(n,{token:e,returnSecureToken:!0}),r=await Ve._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?en._fromServerResponse(t,e):"totpInfo"in e?nn._fromServerResponse(t,e):v(t,"internal-error")}}class en extends tn{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new en(e)}}class nn extends tn{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new nn(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t,e,n){var i;I((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),I("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(I(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(I(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sn(t,e,n){var i;const r=Wt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const t=await zt(r,s,"getOobCode",!0);n&&rn(r,t,n),await ae(r,t)}else n&&rn(r,s,n),await ae(r,s).catch((async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const t=await zt(r,s,"getOobCode",!0);n&&rn(r,t,n),await ae(r,t)}}))}async function on(t,e,n){await ee((0,i.m9)(t),{oobCode:e,newPassword:n})}async function an(t,e){await ie((0,i.m9)(t),{oobCode:e})}async function cn(t,e){const n=(0,i.m9)(t),r=await ee(n,{oobCode:e}),s=r.requestType;switch(I(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":I(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":I(r.mfaInfo,n,"internal-error");default:I(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=tn._fromServerResponse(Wt(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function ln(t,e){const{data:n}=await cn((0,i.m9)(t),e);return n.email}async function un(t,e,n){var i;const r=Wt(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const t=await zt(r,s,"signUpPassword");o=Fe(r,t)}else o=Fe(r,s).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const t=await zt(r,s,"signUpPassword");return Fe(r,t)}return Promise.reject(t)}));const a=await o.catch((t=>Promise.reject(t))),c=await Ve._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function hn(t,e,n){return Ye((0,i.m9)(t),Te.credential(e,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dn(t,e,n){var i;const r=Wt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(t,e){I(e.handleCodeInApp,r,"argument-error"),e&&rn(r,t,e)}if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const t=await zt(r,s,"getOobCode",!0);o(t,n),await ce(r,t)}else o(s,n),await ce(r,s).catch((async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await zt(r,s,"getOobCode",!0);o(t,n),await ce(r,t)}}))}function fn(t,e){const n=Ee.parseLink(e);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function pn(t,e,n){const r=(0,i.m9)(t),s=Te.credentialWithLink(e,n||S());return I(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Ye(r,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gn(t,e){return F(t,"POST","/v1/accounts:createAuthUri",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mn(t,e){const n=k()?S():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await gn((0,i.m9)(t),r);return s||[]}async function yn(t,e){const n=(0,i.m9)(t),r=await t.getIdToken(),s={requestType:"VERIFY_EMAIL",idToken:r};e&&rn(n.auth,s,e);const{email:o}=await oe(n.auth,s);o!==t.email&&await t.reload()}async function vn(t,e,n){const r=(0,i.m9)(t),s=await t.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:s,newEmail:e};n&&rn(r.auth,o,n);const{email:a}=await le(r.auth,o);a!==t.email&&await t.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bn(t,e){return F(t,"POST","/v1/accounts:update",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wn(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=(0,i.m9)(t),s=await r.getIdToken(),o={idToken:s,displayName:e,photoUrl:n,returnSecureToken:!0},a=await J(r,bn(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find((({providerId:t})=>"password"===t));c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function _n(t,e){return In((0,i.m9)(t),e,null)}function xn(t,e){return In((0,i.m9)(t),null,e)}async function In(t,e,n){const{auth:i}=t,r=await t.getIdToken(),s={idToken:r,returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await J(t,ne(i,s));await t._updateTokensIfNecessary(o,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null===t||void 0===t?void 0:t.idToken)){const i=null===(n=null===(e=Y(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n["sign_in_provider"];if(i){const t="anonymous"!==i&&"custom"!==i?i:null;return new Tn(s,t)}}if(!i)return null;switch(i){case"facebook.com":return new kn(s,r);case"github.com":return new Cn(s,r);case"google.com":return new An(s,r);case"twitter.com":return new Dn(s,r,t.screenName||null);case"custom":case"anonymous":return new Tn(s,null);default:return new Tn(s,i,r)}}class Tn{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class Sn extends Tn{constructor(t,e,n,i){super(t,e,n),this.username=i}}class kn extends Tn{constructor(t,e){super(t,"facebook.com",e)}}class Cn extends Sn{constructor(t,e){super(t,"github.com",e,"string"===typeof(null===e||void 0===e?void 0:e.login)?null===e||void 0===e?void 0:e.login:null)}}class An extends Tn{constructor(t,e){super(t,"google.com",e)}}class Dn extends Sn{constructor(t,e,n){super(t,"twitter.com",e,n)}}function Rn(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:En(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,e,n,r){return(0,i.m9)(t).onIdTokenChanged(e,n,r)}function Pn(t,e,n){return(0,i.m9)(t).beforeAuthStateChanged(e,n)}class Mn{constructor(t,e,n){this.type=t,this.credential=e,this.auth=n}static _fromIdtoken(t,e){return new Mn("enroll",t,e)}static _fromMfaPendingCredential(t){return new Mn("signin",t)}toJSON(){const t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[t]:this.credential}}}static fromJSON(t){var e,n;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return Mn._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return Mn._fromIdtoken(t.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=Wt(t),i=e.customData._serverResponse,r=(i.mfaInfo||[]).map((t=>tn._fromServerResponse(n,t)));I(i.mfaPendingCredential,n,"internal-error");const s=Mn._fromMfaPendingCredential(i.mfaPendingCredential);return new Nn(s,r,(async t=>{const r=await t._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(e.operationType){case"signIn":const t=await Ve._fromIdTokenResponse(n,e.operationType,o);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return I(e.user,n,"internal-error"),Ve._forOperation(e.user,e.operationType,o);default:v(n,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function Ln(t,e){var n;const r=(0,i.m9)(t),s=e;return I(e.customData.operationType,r,"argument-error"),I(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Nn._fromError(r,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,e){return F(t,"POST","/v2/accounts/mfaEnrollment:start",L(t,e))}function Vn(t,e){return F(t,"POST","/v2/accounts/mfaEnrollment:finalize",L(t,e))}function Un(t,e){return F(t,"POST","/v2/accounts/mfaEnrollment:start",L(t,e))}function Bn(t,e){return F(t,"POST","/v2/accounts/mfaEnrollment:finalize",L(t,e))}function jn(t,e){return F(t,"POST","/v2/accounts/mfaEnrollment:withdraw",L(t,e))}class zn{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>tn._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new zn(t)}async getSession(){return Mn._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(t,e){const n=t,i=await this.getSession(),r=await J(this.user,n._process(this.user.auth,i,e));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(t){const e="string"===typeof t?t:t.uid,n=await this.user.getIdToken();try{const t=await J(this.user,jn(this.user.auth,{idToken:n,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==e)),await this.user._updateTokensIfNecessary(t),await this.user.reload()}catch(i){throw i}}}const qn=new WeakMap;function $n(t){const e=(0,i.m9)(t);return qn.has(e)||qn.set(e,zn._fromUser(e)),qn.get(e)}const Wn="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Wn,"1"),this.storage.removeItem(Wn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){const t=(0,i.z$)();return yt(t)||It(t)}const Kn=1e3,Yn=10;class Qn extends Hn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Gn()&&Ct(),this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);St()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Yn):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),Kn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Qn.type="LOCAL";const Jn=Qn;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends Hn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Xn.type="SESSION";const Zn=Xn;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return Promise.all(t.map((async t=>{try{const e=await t;return{fulfilled:!0,value:e}}catch(e){return{fulfilled:!1,reason:e}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new ei(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await ti(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ni(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.receivers=[];class ii{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=ni("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return window}function si(t){ri().location.href=t}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return"undefined"!==typeof ri()["WorkerGlobalScope"]&&"function"===typeof ri()["importScripts"]}async function ai(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const t=await navigator.serviceWorker.ready;return t.active}catch(t){return null}}function ci(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}function li(){return oi()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="firebaseLocalStorageDb",hi=1,di="firebaseLocalStorage",fi="fbase_key";class pi{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function gi(t,e){return t.transaction([di],e?"readwrite":"readonly").objectStore(di)}function mi(){const t=indexedDB.deleteDatabase(ui);return new pi(t).toPromise()}function yi(){const t=indexedDB.open(ui,hi);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(di,{keyPath:fi})}catch(i){n(i)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(di)?e(n):(n.close(),await mi(),e(await yi()))}))}))}async function vi(t,e,n){const i=gi(t,!0).put({[fi]:e,value:n});return new pi(i).toPromise()}async function bi(t,e){const n=gi(t,!1).get(e),i=await new pi(n).toPromise();return void 0===i?null:i.value}function wi(t,e){const n=gi(t,!0).delete(e);return new pi(n).toPromise()}const _i=800,xi=3;class Ii{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await yi()),this.db}async _withRetries(t){let e=0;while(1)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>xi)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ei._getInstance(li()),this.receiver._subscribe("keyChanged",(async(t,e)=>{const n=await this._poll();return{keyProcessed:n.includes(e.key)}})),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await ai(),!this.activeServiceWorker)return;this.sender=new ii(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&ci()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await yi();return await vi(t,Wn,"1"),await wi(t,Wn),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>vi(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>bi(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>wi(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=gi(t,!1).getAll();return new pi(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),_i)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ii.type="LOCAL";const Ei=Ii;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){return F(t,"POST","/v2/accounts/mfaSignIn:start",L(t,e))}function Si(t,e){return F(t,"POST","/v2/accounts/mfaSignIn:finalize",L(t,e))}function ki(t,e){return F(t,"POST","/v2/accounts/mfaSignIn:finalize",L(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=500,Ai=6e4,Di=1e12;class Ri{constructor(t){this.auth=t,this.counter=Di,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new Oi(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||Di;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||Di;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||Di;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class Oi{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"===typeof t?document.getElementById(t):t;I(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=Pi(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(n){}this.isVisible&&this.execute()}),Ai)}),Ci))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Pi(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=Ft("rcb"),Ni=new R(3e4,6e4),Li="https://www.google.com/recaptcha/api.js?";class Fi{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=ri().grecaptcha)||void 0===t?void 0:t.render)}load(t,e=""){return I(Vi(e),t,"argument-error"),this.shouldResolveImmediately(e)&&Ot(ri().grecaptcha)?Promise.resolve(ri().grecaptcha):new Promise(((n,r)=>{const s=ri().setTimeout((()=>{r(b(t,"network-request-failed"))}),Ni.get());ri()[Mi]=()=>{ri().clearTimeout(s),delete ri()[Mi];const i=ri().grecaptcha;if(!i||!Ot(i))return void r(b(t,"internal-error"));const o=i.render;i.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(i)};const o=`${Li}?${(0,i.xO)({onload:Mi,render:"explicit",hl:e})}`;Lt(o).catch((()=>{clearTimeout(s),r(b(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var e;return!!(null===(e=ri().grecaptcha)||void 0===e?void 0:e.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Vi(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Ui{async load(t){return new Ri(t)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="recaptcha",ji={theme:"light",type:"image"};class zi{constructor(t,e=Object.assign({},ji),n){this.parameters=e,this.type=Bi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Wt(n),this.isInvisible="invisible"===this.parameters.size,I("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"===typeof t?document.getElementById(t):t;I(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ui:new Fi,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),n=e.getResponse(t);return n||new Promise((n=>{const i=t=>{t&&(this.tokenChangeListeners.delete(i),n(t))};this.tokenChangeListeners.add(i),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){I(!this.parameters.sitekey,this.auth,"argument-error"),I(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),I("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"===typeof t)t(e);else if("string"===typeof t){const n=ri()[t];"function"===typeof n&&n(e)}}}assertNotDestroyed(){I(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){I(k()&&!oi(),this.auth,"internal-error"),await qi(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await Dt(this.auth);I(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return I(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function qi(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=_e._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function Wi(t,e,n){const r=Wt(t),s=await Ki(r,e,(0,i.m9)(n));return new $i(s,(t=>Ye(r,t)))}async function Hi(t,e,n){const r=(0,i.m9)(t);await He(!1,r,"phone");const s=await Ki(r.auth,e,(0,i.m9)(n));return new $i(s,(t=>Qe(r,t)))}async function Gi(t,e,n){const r=(0,i.m9)(t),s=await Ki(r.auth,e,(0,i.m9)(n));return new $i(s,(t=>Je(r,t)))}async function Ki(t,e,n){var i;const r=await n.verify();try{let s;if(I("string"===typeof r,t,"argument-error"),I(n.type===Bi,t,"argument-error"),s="string"===typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){I("enroll"===e.type,t,"internal-error");const n=await Fn(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{I("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;I(n,t,"missing-multi-factor-info");const o=await Ti(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await me(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}async function Yi(t,e){await We((0,i.m9)(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t){this.providerId=Qi.PROVIDER_ID,this.auth=Wt(t)}verifyPhoneNumber(t,e){return Ki(this.auth,t,(0,i.m9)(e))}static credential(t,e){return _e._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Qi.credentialFromTaggedObject(e)}static credentialFromError(t){return Qi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?_e._fromTokenResponse(e,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ji(t,e){return e?ut(e):(I(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi.PROVIDER_ID="phone",Qi.PHONE_SIGN_IN_METHOD="phone";class Xi extends te{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return fe(t,this._buildIdpRequest())}_linkToIdToken(t,e){return fe(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return fe(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Zi(t){return Ke(t.auth,new Xi(t),t.bypassAuthState)}function tr(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),Ge(n,new Xi(t),t.bypassAuthState)}async function er(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),We(n,new Xi(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Zi;case"linkViaPopup":case"linkViaRedirect":return er;case"reauthViaPopup":case"reauthViaRedirect":return tr;default:v(this.auth,"internal-error")}}resolve(t){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new R(2e3,1e4);async function rr(t,e,n){const i=Wt(t);_(t,e,Se);const r=Ji(i,n),s=new ar(i,"signInViaPopup",e,r);return s.executeNotNull()}async function sr(t,e,n){const r=(0,i.m9)(t);_(r.auth,e,Se);const s=Ji(r.auth,n),o=new ar(r.auth,"reauthViaPopup",e,s,r);return o.executeNotNull()}async function or(t,e,n){const r=(0,i.m9)(t);_(r.auth,e,Se);const s=Ji(r.auth,n),o=new ar(r.auth,"linkViaPopup",e,s,r);return o.executeNotNull()}class ar extends nr{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,ar.currentPopupAction&&ar.currentPopupAction.cancel(),ar.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return I(t,this.auth,"internal-error"),t}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const t=ni();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(b(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(b(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ar.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(b(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,ir.get())};t()}}ar.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cr="pendingRedirect",lr=new Map;class ur extends nr{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=lr.get(this.auth._key());if(!t){try{const e=await hr(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}lr.set(this.auth._key(),t)}return this.bypassAuthState||lr.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function hr(t,e){const n=mr(e),i=gr(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}async function dr(t,e){return gr(t)._set(mr(e),"true")}function fr(){lr.clear()}function pr(t,e){lr.set(t._key(),e)}function gr(t){return ut(t._redirectPersistence)}function mr(t){return ft(cr,t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e,n){return vr(t,e,n)}async function vr(t,e,n){const i=Wt(t);_(t,e,Se),await i._initializationPromise;const r=Ji(i,n);return await dr(r,i),r._openRedirect(i,e,"signInViaRedirect")}function br(t,e,n){return wr(t,e,n)}async function wr(t,e,n){const r=(0,i.m9)(t);_(r.auth,e,Se),await r.auth._initializationPromise;const s=Ji(r.auth,n);await dr(s,r.auth);const o=await Tr(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}function _r(t,e,n){return xr(t,e,n)}async function xr(t,e,n){const r=(0,i.m9)(t);_(r.auth,e,Se),await r.auth._initializationPromise;const s=Ji(r.auth,n);await He(!1,r,e.providerId),await dr(s,r.auth);const o=await Tr(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}async function Ir(t,e){return await Wt(t)._initializationPromise,Er(t,e,!1)}async function Er(t,e,n=!1){const i=Wt(t),r=Ji(i,e),s=new ur(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function Tr(t){const e=ni(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=6e5;class kr{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!Dr(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Ar(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(b(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Sr&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cr(t))}saveEventToCache(t){this.cachedEventUids.add(Cr(t)),this.lastProcessedEventTime=Date.now()}}function Cr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Ar({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null===e||void 0===e?void 0:e.code)}function Dr(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ar(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rr(t,e={}){return F(t,"GET","/v1/projects",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pr=/^https?/;async function Mr(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Rr(t);for(const i of e)try{if(Nr(i))return}catch(n){}v(t,"unauthorized-domain")}function Nr(t){const e=S(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Pr.test(n))return!1;if(Or.test(t))return i===t;const r=t.replace(/\./g,"\\."),s=new RegExp("^(.+\\."+r+"|"+r+")$","i");return s.test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new R(3e4,6e4);function Fr(){const t=ri().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t){return new Promise(((e,n)=>{var i,r,s;function o(){Fr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fr(),n(b(t,"network-request-failed"))},timeout:Lr.get()})}if(null===(r=null===(i=ri().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=ri().gapi)||void 0===s?void 0:s.load)){const e=Ft("iframefcb");return ri()[e]=()=>{gapi.load?o():n(b(t,"network-request-failed"))},Lt(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw Ur=null,t}))}let Ur=null;function Br(t){return Ur=Ur||Vr(t),Ur}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new R(5e3,15e3),zr="__/auth/iframe",qr="emulator/auth/iframe",$r={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hr(t){const e=t.config;I(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?O(e,qr):`https://${t.config.authDomain}/${zr}`,s={apiKey:e.apiKey,appName:t.name,v:r.SDK_VERSION},o=Wr.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.xO)(s).slice(1)}`}async function Gr(t){const e=await Br(t),n=ri().gapi;return I(n,t,"internal-error"),e.open({where:document.body,url:Hr(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$r,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=b(t,"network-request-failed"),s=ri().setTimeout((()=>{i(r)}),jr.get());function o(){ri().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yr=500,Qr=600,Jr="_blank",Xr="http://localhost";class Zr{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function ts(t,e,n,r=Yr,s=Qr){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Kr),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.z$)().toLowerCase();n&&(c=vt(u)?Jr:n),mt(u)&&(e=e||Xr,l.scrollbars="yes");const h=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(Tt(u)&&"_self"!==c)return es(e||"",c),new Zr(null);const d=window.open(e||"",c,h);I(d,t,"popup-blocked");try{d.focus()}catch(f){}return new Zr(d)}function es(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="__/auth/handler",is="emulator/auth/handler",rs=encodeURIComponent("fac");async function ss(t,e,n,s,o,a){I(t.config.authDomain,t,"auth-domain-config-required"),I(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:r.SDK_VERSION,eventId:o};if(e instanceof Se){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,i.xb)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof ke){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const i of Object.keys(l))void 0===l[i]&&delete l[i];const u=await t._getAppCheckToken(),h=u?`#${rs}=${encodeURIComponent(u)}`:"";return`${os(t)}?${(0,i.xO)(l).slice(1)}${h}`}function os({config:t}){return t.emulator?O(t,is):`https://${t.authDomain}/${ns}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="webStorageSupport";class cs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zn,this._completeRedirectFn=Er,this._overrideRedirectResult=pr}async _openPopup(t,e,n,i){var r;T(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const s=await ss(t,e,n,S(),i);return ts(t,s,ni())}async _openRedirect(t,e,n,i){await this._originValidation(t);const r=await ss(t,e,n,S(),i);return si(r),new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await Gr(t),n=new kr(t);return e.register("authEvent",(e=>{I(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");const i=n.onEvent(e.authEvent);return{status:i?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){const n=this.iframes[t._key()];n.send(as,{type:as},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[as];void 0!==r&&e(!!r),v(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Mr(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return kt()||yt()||It()}}const ls=cs;class us{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return E("unexpected MultiFactorSessionType")}}}class hs extends us{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new hs(t)}_finalizeEnroll(t,e,n){return Vn(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return Si(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ds{constructor(){}static assertion(t){return hs._fromCredential(t)}}ds.FACTOR_ID="phone";class fs{static assertionForEnrollment(t,e){return ps._fromSecret(t,e)}static assertionForSignIn(t,e){return ps._fromEnrollmentId(t,e)}static async generateSecret(t){const e=t;I("undefined"!==typeof e.auth,"internal-error");const n=await Un(e.auth,{idToken:e.credential,totpEnrollmentInfo:{}});return gs._fromStartTotpMfaEnrollmentResponse(n,e.auth)}}fs.FACTOR_ID="totp";class ps extends us{constructor(t,e,n){super("totp"),this.otp=t,this.enrollmentId=e,this.secret=n}static _fromSecret(t,e){return new ps(e,void 0,t)}static _fromEnrollmentId(t,e){return new ps(e,t)}async _finalizeEnroll(t,e,n){return I("undefined"!==typeof this.secret,t,"argument-error"),Bn(t,{idToken:e,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,e){I(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error");const n={verificationCode:this.otp};return ki(t,{mfaPendingCredential:e,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class gs{constructor(t,e,n,i,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=t,this.hashingAlgorithm=e,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(t,e){return new gs(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,e)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,e){var n;let i=!1;return(ms(t)||ms(e))&&(i=!0),i&&(ms(t)&&(t=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),ms(e)&&(e=this.auth.name)),`otpauth://totp/${e}:${t}?secret=${this.secretKey}&issuer=${e}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function ms(t){return"undefined"===typeof t||0===(null===t||void 0===t?void 0:t.length)}var ys="@firebase/auth",vs="0.23.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bs{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const e=await this.auth.currentUser.getIdToken(t);return{accessToken:e}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _s(t){(0,r._registerComponent)(new a.wA("auth",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;I(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:At(t)},l=new $t(i,r,s,c);return Kt(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{const i=t.getProvider("auth-internal");i.initialize()}))),(0,r._registerComponent)(new a.wA("auth-internal",(t=>{const e=Wt(t.getProvider("auth").getImmediate());return(t=>new bs(t))(e)}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.registerVersion)(ys,vs,ws(t)),(0,r.registerVersion)(ys,vs,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=300,Is=(0,i.Pz)("authIdTokenMaxAge")||xs;let Es=null;const Ts=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Is)return;const r=null===n||void 0===n?void 0:n.token;Es!==r&&(Es=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Ss(t=(0,r.getApp)()){const e=(0,r._getProvider)(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Gt(t,{popupRedirectResolver:ls,persistence:[Ei,Jn,Zn]}),s=(0,i.Pz)("authTokenSyncURL");if(s){const t=Ts(s);Pn(n,t,(()=>t(n.currentUser))),On(n,(e=>t(e)))}const o=(0,i.q4)("auth");return o&&Yt(n,`http://${o}`),n}_s("Browser")},9504:function(t,e,n){"use strict";n.d(e,{u7:function(){return Zg},Jj:function(){return Jp},IX:function(){return Fp},my:function(){return Sp},xU:function(){return im},Lz:function(){return Xp},WA:function(){return hr},F8:function(){return tg},$q:function(){return rm},W:function(){return sm},EK:function(){return Sr},PU:function(){return Em},l7:function(){return io},Ky:function(){return Or},Xb:function(){return Rr},Cf:function(){return _p},K9:function(){return cr},Me:function(){return Gs},yq:function(){return rr},Wi:function(){return yp},ET:function(){return vm},Ab:function(){return Rm},vr:function(){return Dm},Fc:function(){return $p},hJ:function(){return Ap},B$:function(){return Dp},at:function(){return Tp},oe:function(){return ym},AK:function(){return Cm},TF:function(){return Gp},JU:function(){return Rp},ST:function(){return jp},fH:function(){return zp},Ix:function(){return Hp},Wu:function(){return Gg},Lx:function(){return Hg},qY:function(){return Up},GL:function(){return _m},QT:function(){return cm},kl:function(){return um},Xk:function(){return hm},PL:function(){return dm},UQ:function(){return fm},zN:function(){return pm},nP:function(){return Om},b9:function(){return Bg},vh:function(){return jg},Pb:function(){return Kp},L$:function(){return Yp},cf:function(){return bm},sc:function(){return wm},Xo:function(){return Vg},IO:function(){return Pg},iE:function(){return Pp},Eo:function(){return Op},i3:function(){return km},Bt:function(){return Am},pl:function(){return gm},Ub:function(){return er},qK:function(){return am},TQ:function(){return $g},e0:function(){return qg},r7:function(){return mm},Mx:function(){return Wp},ar:function(){return Ng}});n(3767),n(8585),n(8696),n(7658),n(2801);var i,r=n(7077),s=n(7142),o=n(5168),a=n(223),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},l={},u=u||{},h=c||self;function d(){}function f(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:b,w.apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function x(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function I(){this.s=this.s,this.o=this.o}var E=0;I.prototype.s=!1,I.prototype.ra=function(){this.s||(this.s=!0,this.N(),0==E)||g(this)},I.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const T=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function S(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function k(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(f(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function C(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",d,e),h.removeEventListener("test",d,e)}catch(n){}return t}();function D(t){return/^[\s\xa0]*$/.test(t)}var R=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return t<e?-1:t>e?1:0}function P(){var t=h.navigator;return t&&(t=t.userAgent)?t:""}function M(t){return-1!=P().indexOf(t)}function N(t){return N[" "](t),t}function L(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}N[" "]=d;var F,V=M("Opera"),U=M("Trident")||M("MSIE"),B=M("Edge"),j=B||U,z=M("Gecko")&&!(-1!=P().toLowerCase().indexOf("webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),q=-1!=P().toLowerCase().indexOf("webkit")&&!M("Edge");function $(){var t=h.document;return t?t.documentMode:void 0}t:{var W="",H=function(){var t=P();return z?/rv:([^\);]+)(\)|;)/.exec(t):B?/Edge\/([\d\.]+)/.exec(t):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):q?/WebKit\/(\S+)/.exec(t):V?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(H&&(W=H?H[1]:""),U){var G=$();if(null!=G&&G>parseFloat(W)){F=String(G);break t}}F=W}var K,Y={};function Q(){return L(Y,9,(function(){let t=0;const e=R(String(F)).split("."),n=R("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var r=e[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;t=O(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||O(0==r[2].length,0==s[2].length)||O(r[2],s[2]),r=r[3],s=s[3]}while(0==t)}return 0<=t}))}if(h.document&&U){var J=$();K=J||(parseInt(F,10)||void 0)}else K=void 0;var X=K;function Z(t,e){if(C.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(z){t:{try{N(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:tt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Z.$.h.call(this)}}x(Z,C);var tt={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),nt=0;function it(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++nt,this.fa=this.ia=!1}function rt(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function st(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function ot(t){const e={};for(const n in t)e[n]=t[n];return e}const at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ct(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<at.length;e++)n=at[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function lt(t){this.src=t,this.g={},this.h=0}function ut(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=T(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(rt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ht(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}lt.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=ht(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new it(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};var dt="closure_lm_"+(1e6*Math.random()|0),ft={};function pt(t,e,n,i,r){if(i&&i.once)return yt(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)pt(t,e[s],n,i,r);return null}return n=Et(n),t&&t[et]?t.O(e,n,p(i)?!!i.capture:!!i,r):gt(t,e,n,!1,i,r)}function gt(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=p(r)?!!r.capture:!!r,a=xt(t);if(a||(t[dt]=a=new lt(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=mt(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)A||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(wt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function mt(){function t(n){return e.call(t.src,t.listener,n)}const e=_t;return t}function yt(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)yt(t,e[s],n,i,r);return null}return n=Et(n),t&&t[et]?t.P(e,n,p(i)?!!i.capture:!!i,r):gt(t,e,n,!0,i,r)}function vt(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)vt(t,e[s],n,i,r);else i=p(i)?!!i.capture:!!i,n=Et(n),t&&t[et]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=ht(s,n,i,r),-1<n&&(rt(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=xt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ht(e,n,i,r)),(n=-1<t?e[t]:null)&&bt(n))}function bt(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[et])ut(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(wt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=xt(e))?(ut(n,t),0==n.h&&(n.src=null,e[dt]=null)):rt(t)}}}function wt(t){return t in ft?ft[t]:ft[t]="on"+t}function _t(t,e){if(t.fa)t=!0;else{e=new Z(e,this);var n=t.listener,i=t.la||t.src;t.ia&&bt(t),t=n.call(i,e)}return t}function xt(t){return t=t[dt],t instanceof lt?t:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(t){return"function"===typeof t?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function Tt(){I.call(this),this.i=new lt(this),this.S=this,this.J=null}function St(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new C(e,t);else if(e instanceof C)e.target=e.target||t;else{var r=e;e=new C(i,t),ct(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=kt(o,i,!0,e)&&r}if(o=e.g=t,r=kt(o,i,!0,e)&&r,r=kt(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=kt(o,i,!1,e)&&r}function kt(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ut(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}x(Tt,I),Tt.prototype[et]=!0,Tt.prototype.removeEventListener=function(t,e,n,i){vt(this,t,e,n,i)},Tt.prototype.N=function(){if(Tt.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)rt(n[i]);delete e.g[t],e.h--}}this.J=null},Tt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Tt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Ct=h.JSON.stringify;function At(){var t=Vt;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Dt{constructor(){this.h=this.g=null}add(t,e){const n=Ot.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var Rt,Ot=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Pt),(t=>t.reset()));class Pt{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Mt(t){h.setTimeout((()=>{throw t}),0)}function Nt(t,e){Rt||Lt(),Ft||(Rt(),Ft=!0),Vt.add(t,e)}function Lt(){var t=h.Promise.resolve(void 0);Rt=function(){t.then(Ut)}}var Ft=!1,Vt=new Dt;function Ut(){for(var t;t=At();){try{t.h.call(t.g)}catch(n){Mt(n)}var e=Ot;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ft=!1}function Bt(t,e){Tt.call(this),this.h=t||1,this.g=e||h,this.j=w(this.qb,this),this.l=Date.now()}function jt(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function zt(t,e,n){if("function"===typeof t)n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function qt(t){t.g=zt((()=>{t.g=null,t.i&&(t.i=!1,qt(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}x(Bt,Tt),i=Bt.prototype,i.ga=!1,i.T=null,i.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),St(this,"tick"),this.ga&&(jt(this),this.start()))}},i.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.N=function(){Bt.$.N.call(this),jt(this),delete this.g};class $t extends I{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wt(t){I.call(this),this.h=t,this.g={}}x(Wt,I);var Ht=[];function Gt(t,e,n,i){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var r=0;r<n.length;r++){var s=pt(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Kt(t){st(t.g,(function(t,e){this.g.hasOwnProperty(e)&&bt(t)}),t),t.g={}}function Yt(){this.g=!0}function Qt(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}function Jt(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}function Xt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+te(t,n)+(i?" "+i:"")}))}function Zt(t,e){t.info((function(){return"TIMEOUT: "+e}))}function te(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Ct(n)}catch(a){return e}}Wt.prototype.N=function(){Wt.$.N.call(this),Kt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yt.prototype.Ea=function(){this.g=!1},Yt.prototype.info=function(){};var ee={},ne=null;function ie(){return ne=ne||new Tt}function re(t){C.call(this,ee.Ta,t)}function se(t){const e=ie();St(e,new re(e))}function oe(t,e){C.call(this,ee.STAT_EVENT,t),this.stat=e}function ae(t){const e=ie();St(e,new oe(e,t))}function ce(t,e){C.call(this,ee.Ua,t),this.size=e}function le(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}ee.Ta="serverreachability",x(re,C),ee.STAT_EVENT="statevent",x(oe,C),ee.Ua="timingevent",x(ce,C);var ue={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},he={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function de(){}function fe(t){return t.h||(t.h=t.i())}function pe(){}de.prototype.h=null;var ge,me={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ye(){C.call(this,"d")}function ve(){C.call(this,"c")}function be(){}function we(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Wt(this),this.P=xe,t=j?125:void 0,this.V=new Bt(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}x(ye,C),x(ve,C),x(be,de),be.prototype.g=function(){return new XMLHttpRequest},be.prototype.i=function(){return{}},ge=new be;var xe=45e3,Ie={},Ee={};function Te(t,e,n){t.L=1,t.v=Ge(ze(e)),t.s=n,t.S=!0,Se(t,null)}function Se(t,e){t.G=Date.now(),De(t),t.A=ze(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),an(n.i,"t",i),t.C=0,n=t.l.I,t.h=new _e,t.g=hi(t.l,n?e:null,!t.s),0<t.O&&(t.M=new $t(w(t.Pa,t,t.g),t.O)),Gt(t.U,t.g,"readystatechange",t.nb),e=t.I?ot(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),se(),Qt(t.j,t.u,t.A,t.m,t.W,t.s)}function ke(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.l.Ha)}function Ce(t,e,n){let i,r=!0;for(;!t.J&&t.C<n.length;){if(i=Ae(t,n),i==Ee){4==e&&(t.o=4,ae(14),r=!1),Xt(t.j,t.m,null,"[Incomplete Response]");break}if(i==Ie){t.o=4,ae(15),Xt(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Xt(t.j,t.m,i,null),Ne(t,i)}ke(t)&&i!=Ee&&i!=Ie&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ae(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ii(e),e.L=!0,ae(11))):(Xt(t.j,t.m,n,"[Invalid Chunked Response]"),Me(t),Pe(t))}function Ae(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?Ee:(n=Number(e.substring(n,i)),isNaN(n)?Ie:(i+=1,i+n>e.length?Ee:(e=e.substr(i,n),t.C=i+n,e)))}function De(t){t.Y=Date.now()+t.P,Re(t,t.P)}function Re(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=le(w(t.lb,t),e)}function Oe(t){t.B&&(h.clearTimeout(t.B),t.B=null)}function Pe(t){0==t.l.H||t.J||oi(t.l,t)}function Me(t){Oe(t);var e=t.M;e&&"function"==typeof e.ra&&e.ra(),t.M=null,jt(t.V),Kt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Ne(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||gn(n.h,t)))if(!t.K&&gn(n.h,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(l){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;si(n),Kn(n)}ni(n),ae(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&0==n.A&&!n.v&&(n.v=le(w(n.ib,n),6e3));if(1>=pn(n.h)&&n.na){try{n.na()}catch(l){}n.na=void 0}}else ci(n,11)}else if((t.K||n.g==t)&&si(n),!D(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.J=l[1],n.oa=l[2];const e=l[3];null!=e&&(n.qa=e,n.j.info("VER="+n.qa));const r=l[4];null!=r&&(n.Ga=r,n.j.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(mn(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,He(i.G,i.F,t))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=ui(i,i.I?i.oa:null,i.Y),o.K){yn(i.h,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(Oe(a),De(a)),i.g=o}else ei(i);0<n.i.length&&Qn(n)}else"stop"!=l[0]&&"close"!=l[0]||ci(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ci(n,7):Gn(n):"noop"!=l[0]&&n.l&&n.l.Aa(l),n.A=0)}se(4)}catch(l){}}function Le(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function Fe(t){if(t.sa&&"function"==typeof t.sa)return t.sa();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(f(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Ve(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=Fe(t),i=Le(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}i=we.prototype,i.setTimeout=function(t){this.P=t},i.nb=function(t){t=t.target;const e=this.M;e&&3==jn(t)?e.l():this.Pa(t)},i.Pa=function(t){try{if(t==this.g)t:{const u=jn(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>u)&&(3!=u||j||this.g&&(this.h.h||this.g.ja()||zn(this.g)))){this.J||4!=u||7==e||se(8==e||0>=d?3:2),Oe(this);var n=this.g.da();this.aa=n;e:if(ke(this)){var i=zn(this.g);t="";var r=i.length,s=4==jn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Me(this),Pe(this);var o="";break e}this.h.i=new h.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,Jt(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.ba&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,ae(12),Me(this),Pe(this);break t}Xt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ne(this,n)}this.S?(Ce(this,u,o),j&&this.i&&3==u&&(Gt(this.U,this.V,"tick",this.mb),this.V.start())):(Xt(this.j,this.m,o,null),Ne(this,o)),4==u&&Me(this),this.i&&!this.J&&(4==u?oi(this.l,this):(this.i=!1,De(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ae(12)):(this.o=0,ae(13)),Me(this),Pe(this)}}}catch(u){}},i.mb=function(){if(this.g){var t=jn(this.g),e=this.g.ja();this.C<e.length&&(Oe(this),Ce(this,t,e),this.i&&4!=t&&De(this))}},i.cancel=function(){this.J=!0,Me(this)},i.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Zt(this.j,this.A),2!=this.L&&(se(),ae(17)),Me(this),this.o=2,Pe(this)):Re(this,this.Y-t)};var Ue=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Be(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function je(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof je){this.h=void 0!==e?e:t.h,qe(this,t.j),this.s=t.s,this.g=t.g,$e(this,t.m),this.l=t.l,e=t.i;var n=new nn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),We(this,n),this.o=t.o}else t&&(n=String(t).match(Ue))?(this.h=!!e,qe(this,n[1]||"",!0),this.s=Ke(n[2]||""),this.g=Ke(n[3]||"",!0),$e(this,n[4]),this.l=Ke(n[5]||"",!0),We(this,n[6]||"",!0),this.o=Ke(n[7]||"")):(this.h=!!e,this.i=new nn(null,this.h))}function ze(t){return new je(t)}function qe(t,e,n){t.j=n?Ke(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function $e(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function We(t,e,n){e instanceof nn?(t.i=e,ln(t.i,t.h)):(n||(e=Ye(e,tn)),t.i=new nn(e,t.h))}function He(t,e,n){t.i.set(e,n)}function Ge(t){return He(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ke(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ye(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qe(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}je.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ye(e,Je,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Ye(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ye(n,"/"==n.charAt(0)?Ze:Xe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ye(n,en)),t.join("")};var Je=/[#\/\?@]/g,Xe=/[#\?:]/g,Ze=/[#\?]/g,tn=/[#\?@]/g,en=/#/g;function nn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function rn(t){t.g||(t.g=new Map,t.h=0,t.i&&Be(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function sn(t,e){rn(t),e=cn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function on(t,e){return rn(t),e=cn(t,e),t.g.has(e)}function an(t,e,n){sn(t,e),0<n.length&&(t.i=null,t.g.set(cn(t,e),S(n)),t.h+=n.length)}function cn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ln(t,e){e&&!t.j&&(rn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(sn(this,e),an(this,n,t))}),t)),t.j=e}i=nn.prototype,i.add=function(t,e){rn(this),this.i=null,t=cn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},i.forEach=function(t,e){rn(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},i.sa=function(){rn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},i.Z=function(t){rn(this);let e=[];if("string"===typeof t)on(this,t)&&(e=e.concat(this.g.get(cn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},i.set=function(t,e){return rn(this),this.i=null,t=cn(this,t),on(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},i.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var un=class{constructor(t,e){this.h=t,this.g=e}};function hn(t){this.l=t||dn,h.PerformanceNavigationTiming?(t=h.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(h.g&&h.g.Ka&&h.g.Ka()&&h.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dn=10;function fn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function pn(t){return t.h?1:t.g?t.g.size:0}function gn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function mn(t,e){t.g?t.g.add(e):t.h=e}function yn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function vn(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return S(t.i)}function bn(){}function wn(){this.g=new bn}function _n(t,e,n){const i=n||"";try{Ve(t,(function(t,n){let r=t;p(t)&&(r=Ct(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function xn(t,e){const n=new Yt;if(h.Image){const i=new Image;i.onload=_(In,n,i,"TestLoadImage: loaded",!0,e),i.onerror=_(In,n,i,"TestLoadImage: error",!1,e),i.onabort=_(In,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=_(In,n,i,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}function In(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function En(t){this.l=t.fc||null,this.j=t.ob||!1}function Tn(t,e){Tt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Sn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hn.prototype.cancel=function(){if(this.i=vn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},bn.prototype.stringify=function(t){return h.JSON.stringify(t,void 0)},bn.prototype.parse=function(t){return h.JSON.parse(t,void 0)},x(En,de),En.prototype.g=function(){return new Tn(this.l,this.j)},En.prototype.i=function(t){return function(){return t}}({}),x(Tn,Tt);var Sn=0;function kn(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Cn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,An(t)}function An(t){t.onreadystatechange&&t.onreadystatechange.call(t)}i=Tn.prototype,i.open=function(t,e){if(this.readyState!=Sn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,An(this)},i.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||h).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cn(this)),this.readyState=Sn},i.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof h.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kn(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},i.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Cn(this):An(this),3==this.readyState&&kn(this)}},i.Za=function(t){this.g&&(this.response=this.responseText=t,Cn(this))},i.Ya=function(t){this.g&&(this.response=t,Cn(this))},i.ka=function(){this.g&&Cn(this)},i.setRequestHeader=function(t,e){this.v.append(t,e)},i.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Dn=h.JSON.parse;function Rn(t){Tt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=On,this.L=this.M=!1}x(Rn,Tt);var On="",Pn=/^https?$/i,Mn=["POST","PUT"];function Nn(t){return U&&Q()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Ln(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Fn(t),Un(t)}function Fn(t){t.F||(t.F=!0,St(t,"complete"),St(t,"error"))}function Vn(t){if(t.h&&"undefined"!=typeof u&&(!t.C[1]||4!=jn(t)||2!=t.da()))if(t.v&&4==jn(t))zt(t.La,0,t);else if(St(t,"readystatechange"),4==jn(t)){t.h=!1;try{const c=t.da();t:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===c){var r=String(t.I).match(Ue)[1]||null;if(!r&&h.self&&h.self.location){var s=h.self.location.protocol;r=s.substr(0,s.length-1)}i=!Pn.test(r?r.toLowerCase():"")}n=i}if(n)St(t,"complete"),St(t,"success");else{t.m=6;try{var o=2<jn(t)?t.g.statusText:""}catch(a){o=""}t.j=o+" ["+t.da()+"]",Fn(t)}}finally{Un(t)}}}function Un(t,e){if(t.g){Bn(t);const i=t.g,r=t.C[0]?d:null;t.g=null,t.C=null,e||St(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function Bn(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(h.clearTimeout(t.A),t.A=null)}function jn(t){return t.g?t.g.readyState:0}function zn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case On:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Qi){return null}}function qn(t){let e="";return st(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function $n(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=qn(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):He(t,e,n))}function Wn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Hn(t){this.Ga=0,this.i=[],this.j=new Yt,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wn("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wn("baseRetryDelayMs",5e3,t),this.hb=Wn("retryDelaySeedMs",1e4,t),this.eb=Wn("forwardChannelMaxRetries",2,t),this.xa=Wn("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new hn(t&&t.concurrentRequestLimit),this.Ja=new wn,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Gn(t){if(Yn(t),3==t.H){var e=t.W++,n=ze(t.G);He(n,"SID",t.J),He(n,"RID",e),He(n,"TYPE","terminate"),Zn(t,n),e=new we(t,t.j,e,void 0),e.L=2,e.v=Ge(ze(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(e.v.toString(),"")),!n&&h.Image&&((new Image).src=e.v,n=!0),n||(e.g=hi(e.l,null),e.g.ha(e.v)),e.G=Date.now(),De(e)}li(t)}function Kn(t){t.g&&(ii(t),t.g.cancel(),t.g=null)}function Yn(t){Kn(t),t.u&&(h.clearTimeout(t.u),t.u=null),si(t),t.h.cancel(),t.m&&("number"===typeof t.m&&h.clearTimeout(t.m),t.m=null)}function Qn(t){fn(t.h)||t.m||(t.m=!0,Nt(t.Na,t),t.C=0)}function Jn(t,e){return!(pn(t.h)>=t.h.j-(t.m?1:0))&&(t.m?(t.i=e.F.concat(t.i),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=le(w(t.Na,t,e),ai(t,t.C)),t.C++,!0))}function Xn(t,e){var n;n=e?e.m:t.W++;const i=ze(t.G);He(i,"SID",t.J),He(i,"RID",n),He(i,"AID",t.V),Zn(t,i),t.o&&t.s&&$n(i,t.o,t.s),n=new we(t,t.j,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=ti(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),mn(t.h,n),Te(n,i,e)}function Zn(t,e){t.ma&&st(t.ma,(function(t,n){He(e,n,t)})),t.l&&Ve({},(function(t,n){He(e,n,t)}))}function ti(t,e,n){n=Math.min(t.i.length,n);var i=t.l?w(t.l.Va,t.l,t):null;t:{var r=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].h;const a=r[o].g;if(n-=e,0>n)e=Math.max(0,r[o].h-100),s=!1;else try{_n(a,t,"req"+n+"_")}catch(lr){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.i.splice(0,n),e.F=t,i}function ei(t){t.g||t.u||(t.ba=1,Nt(t.Ma,t),t.A=0)}function ni(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=le(w(t.Ma,t),ai(t,t.A)),t.A++,!0)}function ii(t){null!=t.B&&(h.clearTimeout(t.B),t.B=null)}function ri(t){t.g=new we(t,t.j,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=ze(t.wa);He(e,"RID","rpc"),He(e,"SID",t.J),He(e,"CI",t.M?"0":"1"),He(e,"AID",t.V),He(e,"TYPE","xmlhttp"),Zn(t,e),t.o&&t.s&&$n(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=Ge(ze(e)),n.s=null,n.S=!0,Se(n,t)}function si(t){null!=t.v&&(h.clearTimeout(t.v),t.v=null)}function oi(t,e){var n=null;if(t.g==e){si(t),ii(t),t.g=null;var i=2}else{if(!gn(t.h,e))return;n=e.F,yn(t.h,e),i=1}if(0!=t.H)if(t.ta=e.aa,e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=ie(),St(i,new ce(i,n)),Qn(t)}else ei(t);else if(r=e.o,3==r||0==r&&0<t.ta||!(1==i&&Jn(t,e)||2==i&&ni(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:ci(t,5);break;case 4:ci(t,10);break;case 3:ci(t,6);break;default:ci(t,2)}}function ai(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function ci(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var i=w(t.pb,t);n||(n=new je("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||qe(n,"https"),Ge(n)),xn(n.toString(),i)}else ae(2);t.H=0,t.l&&t.l.za(e),li(t),Yn(t)}function li(t){if(t.H=0,t.pa=[],t.l){const e=vn(t.h);0==e.length&&0==t.i.length||(k(t.pa,e),k(t.pa,t.i),t.h.i.length=0,S(t.i),t.i.length=0),t.l.ya()}}function ui(t,e,n){var i=n instanceof je?ze(n):new je(n,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),$e(i,i.m);else{var r=h.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new je(null,void 0);i&&qe(s,i),e&&(s.g=e),r&&$e(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&He(i,n,e),He(i,"VER",t.qa),Zn(t,i),i}function hi(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Rn(new En({ob:!0})):new Rn(t.va),e.Oa(t.I),e}function di(){}function fi(){if(U&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function pi(t,e){Tt.call(this),this.g=new Hn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!D(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!D(e)&&(this.g.F=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new yi(this)}function gi(t){ye.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function mi(){ve.call(this),this.status=1}function yi(t){this.g=t}function vi(){this.blockSize=-1}function bi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wi(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function _i(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}i=Rn.prototype,i.Oa=function(t){this.M=t},i.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ge.g(),this.C=this.u?fe(this.u):fe(ge),this.g.onreadystatechange=w(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void Ln(this,s)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=h.FormData&&t instanceof h.FormData,!(0<=T(Mn,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Bn(this),0<this.B&&((this.L=Nn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.ua,this)):this.A=zt(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Ln(this,s)}},i.ua=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))},i.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,St(this,"complete"),St(this,"abort"),Un(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Un(this,!0)),Rn.$.N.call(this)},i.La=function(){this.s||(this.G||this.v||this.l?Vn(this):this.kb())},i.kb=function(){Vn(this)},i.da=function(){try{return 2<jn(this)?this.g.status:-1}catch(t){return-1}},i.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},i.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Dn(e)}},i.Ia=function(){return this.m},i.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},i=Hn.prototype,i.qa=8,i.H=1,i.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new we(this,this.j,t,void 0);let s=this.s;if(this.U&&(s?(s=ot(s),ct(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var i=this.i[n];if(i="__data__"in i.g&&(i=i.g.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(e+=i,4096<e){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ti(this,r,e),n=ze(this.G),He(n,"RID",t),He(n,"CVER",22),this.F&&He(n,"X-HTTP-Session-Id",this.F),Zn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(qn(s)))+"&"+e:this.o&&$n(n,this.o,s)),mn(this.h,r),this.bb&&He(n,"TYPE","init"),this.P?(He(n,"$req",e),He(n,"SID","null"),r.ba=!0,Te(r,n,null)):Te(r,n,e),this.H=2}}else 3==this.H&&(t?Xn(this,t):0==this.i.length||fn(this.h)||Xn(this))},i.Ma=function(){if(this.u=null,ri(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=le(w(this.jb,this),t)}},i.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,ae(10),Kn(this),ri(this))},i.ib=function(){null!=this.v&&(this.v=null,Kn(this),ni(this),ae(19))},i.pb=function(t){t?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))},i=di.prototype,i.Ba=function(){},i.Aa=function(){},i.za=function(){},i.ya=function(){},i.Va=function(){},fi.prototype.g=function(t,e){return new pi(t,e)},x(pi,Tt),pi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;ae(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=ui(t,null,t.Y),Qn(t)},pi.prototype.close=function(){Gn(this.g)},pi.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ct(t),t=n);e.i.push(new un(e.fb++,t)),3==e.H&&Qn(e)},pi.prototype.N=function(){this.g.l=null,delete this.j,Gn(this.g),delete this.g,pi.$.N.call(this)},x(gi,ye),x(mi,ve),x(yi,di),yi.prototype.Ba=function(){St(this.g,"a")},yi.prototype.Aa=function(t){St(this.g,new gi(t))},yi.prototype.za=function(t){St(this.g,new mi)},yi.prototype.ya=function(){St(this.g,"b")},x(bi,vi),bi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},bi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)wi(this,t,s),s+=this.blockSize;if("string"===typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){wi(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){wi(this,i),r=0;break}}this.h=r,this.i+=e},bi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var xi={};function Ii(t){return-128<=t&&128>t?L(xi,t,(function(t){return new _i([0|t],0>t?-1:0)})):new _i([0|t],0>t?-1:0)}function Ei(t){if(isNaN(t)||!isFinite(t))return ki;if(0>t)return Oi(Ei(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Si;return new _i(e,0)}function Ti(t,e){if(0==t.length)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Oi(Ti(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ei(Math.pow(e,8)),i=ki,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Ei(Math.pow(e,s)),i=i.R(s).add(Ei(o))):(i=i.R(n),i=i.add(Ei(o)))}return i}var Si=4294967296,ki=Ii(0),Ci=Ii(1),Ai=Ii(16777216);function Di(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ri(t){return-1==t.h}function Oi(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new _i(n,~t.h).add(Ci)}function Pi(t,e){return t.add(Oi(e))}function Mi(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ni(t,e){this.g=t,this.h=e}function Li(t,e){if(Di(e))throw Error("division by zero");if(Di(t))return new Ni(ki,ki);if(Ri(t))return e=Li(Oi(t),e),new Ni(Oi(e.g),Oi(e.h));if(Ri(e))return e=Li(t,Oi(e)),new Ni(Oi(e.g),e.h);if(30<t.g.length){if(Ri(t)||Ri(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ci,i=e;0>=i.X(t);)n=Fi(n),i=Fi(i);var r=Vi(n,1),s=Vi(i,1);for(i=Vi(i,2),n=Vi(n,2);!Di(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Vi(i,1),n=Vi(n,1)}return e=Pi(t,r.R(e)),new Ni(r,e)}for(r=ki;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Ei(n),o=s.R(e);Ri(o)||0<o.X(t);)n-=i,s=Ei(n),o=s.R(e);Di(s)&&(s=Ci),r=r.add(s),t=Pi(t,o)}return new Ni(r,t)}function Fi(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new _i(n,t.h)}function Vi(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new _i(r,t.h)}i=_i.prototype,i.ea=function(){if(Ri(this))return-Oi(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Si+i)*e,e*=Si}return t},i.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Di(this))return"0";if(Ri(this))return"-"+Oi(this).toString(t);for(var e=Ei(Math.pow(t,6)),n=this,i="";;){var r=Li(n,e).g;n=Pi(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Di(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},i.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},i.X=function(t){return t=Pi(this,t),Ri(t)?-1:Di(t)?0:1},i.abs=function(){return Ri(this)?Oi(this):this},i.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new _i(n,-2147483648&n[n.length-1]?-1:0)},i.R=function(t){if(Di(this)||Di(t))return ki;if(Ri(this))return Ri(t)?Oi(this).R(Oi(t)):Oi(Oi(this).R(t));if(Ri(t))return Oi(this.R(Oi(t)));if(0>this.X(Ai)&&0>t.X(Ai))return Ei(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,c=65535&t.D(r);n[2*i+2*r]+=o*c,Mi(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Mi(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Mi(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Mi(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new _i(n,0)},i.gb=function(t){return Li(this,t).h},i.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new _i(n,this.h&t.h)},i.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new _i(n,this.h|t.h)},i.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new _i(n,this.h^t.h)},fi.prototype.createWebChannel=fi.prototype.g,pi.prototype.send=pi.prototype.u,pi.prototype.open=pi.prototype.m,pi.prototype.close=pi.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,he.COMPLETE="complete",pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",Tt.prototype.listen=Tt.prototype.O,Rn.prototype.listenOnce=Rn.prototype.P,Rn.prototype.getLastError=Rn.prototype.Sa,Rn.prototype.getLastErrorCode=Rn.prototype.Ia,Rn.prototype.getStatus=Rn.prototype.da,Rn.prototype.getResponseJson=Rn.prototype.Wa,Rn.prototype.getResponseText=Rn.prototype.ja,Rn.prototype.send=Rn.prototype.ha,Rn.prototype.setWithCredentials=Rn.prototype.Oa,bi.prototype.digest=bi.prototype.l,bi.prototype.reset=bi.prototype.reset,bi.prototype.update=bi.prototype.j,_i.prototype.add=_i.prototype.add,_i.prototype.multiply=_i.prototype.R,_i.prototype.modulo=_i.prototype.gb,_i.prototype.compare=_i.prototype.X,_i.prototype.toNumber=_i.prototype.ea,_i.prototype.toString=_i.prototype.toString,_i.prototype.getBits=_i.prototype.D,_i.fromNumber=Ei,_i.fromString=Ti;var Ui=l.createWebChannelTransport=function(){return new fi},Bi=l.getStatEventTarget=function(){return ie()},ji=l.ErrorCode=ue,zi=l.EventType=he,qi=l.Event=ee,$i=l.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wi=l.FetchXmlHttpFactory=En,Hi=l.WebChannel=pe,Gi=l.XhrIo=Rn,Ki=l.Md5=bi,Yi=l.Integer=_i;const Qi="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Xi="9.22.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new o.Yd("@firebase/firestore");function tr(){return Zi.logLevel}function er(t){Zi.setLogLevel(t)}function nr(t,...e){if(Zi.logLevel<=o["in"].DEBUG){const n=e.map(sr);Zi.debug(`Firestore (${Xi}): ${t}`,...n)}}function ir(t,...e){if(Zi.logLevel<=o["in"].ERROR){const n=e.map(sr);Zi.error(`Firestore (${Xi}): ${t}`,...n)}}function rr(t,...e){if(Zi.logLevel<=o["in"].WARN){const n=e.map(sr);Zi.warn(`Firestore (${Xi}): ${t}`,...n)}}function sr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t="Unexpected state"){const e=`FIRESTORE (${Xi}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function ar(t,e){t||or()}function cr(t,e){t||or()}function lr(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hr extends a.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class pr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ji.UNAUTHENTICATED)))}shutdown(){}}class gr{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class mr{constructor(t){this.t=t,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new dr,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{nr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(nr("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new dr)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(nr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(ar("string"==typeof e.accessToken),new fr(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ar(null===t||"string"==typeof t),new Ji(t)}}class yr{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const t=this.p();return t&&this.g.set("Authorization",t),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class vr{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new yr(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(Ji.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class br{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wr{constructor(t){this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(t,e){const n=t=>{null!=t.error&&nr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.T;return this.T=t.token,nr("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{nr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.I.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.I.getImmediate({optional:!0});t?i(t):nr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(ar("string"==typeof t.token),this.T=t.token,new br(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _r(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=_r(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function Ir(t,e){return t<e?-1:t>e?1:0}function Er(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}function Tr(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new hr(ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new hr(ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new hr(ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hr(ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Sr.fromMillis(Date.now())}static fromDate(t){return Sr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Sr(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ir(this.nanoseconds,t.nanoseconds):Ir(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this.timestamp=t}static fromTimestamp(t){return new kr(t)}static min(){return new kr(new Sr(0,0))}static max(){return new kr(new Sr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t,e,n){void 0===e?e=0:e>t.length&&or(),void 0===n?n=t.length-e:n>t.length-e&&or(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Cr.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Cr?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ar extends Cr{construct(t,e,n){return new Ar(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new hr(ur.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Ar(e)}static emptyPath(){return new Ar([])}}const Dr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends Cr{construct(t,e,n){return new Rr(t,e,n)}static isValidIdentifier(t){return Dr.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new hr(ur.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new hr(ur.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new hr(ur.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new hr(ur.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Rr(e)}static emptyPath(){return new Rr([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(t){this.path=t}static fromPath(t){return new Or(Ar.fromString(t))}static fromName(t){return new Or(Ar.fromString(t).popFirst(5))}static empty(){return new Or(Ar.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ar.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ar.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Or(new Ar(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}function Mr(t){return t.fields.find((t=>2===t.kind))}function Nr(t){return t.fields.filter((t=>2!==t.kind))}Pr.UNKNOWN_ID=-1;class Lr{constructor(t,e){this.fieldPath=t,this.kind=e}}class Fr{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Fr(0,Br.min())}}function Vr(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=kr.fromTimestamp(1e9===i?new Sr(n+1,0):new Sr(n,i));return new Br(r,Or.empty(),e)}function Ur(t){return new Br(t.readTime,t.key,-1)}class Br{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Br(kr.min(),Or.empty(),-1)}static max(){return new Br(kr.max(),Or.empty(),-1)}}function jr(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Or.comparator(t.documentKey,e.documentKey),0!==n?n:Ir(t.largestBatchId,e.largestBatchId))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $r(t){if(t.code!==ur.FAILED_PRECONDITION||t.message!==zr)throw t;nr("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&or(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Wr(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Wr?e:Wr.resolve(e)}catch(t){return Wr.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Wr.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Wr.reject(e)}static resolve(t){return new Wr(((e,n)=>{e(t)}))}static reject(t){return new Wr(((e,n)=>{n(t)}))}static waitFor(t){return new Wr(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Wr.resolve(!1);for(const n of t)e=e.next((t=>t?Wr.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Wr(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Wr(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.v=new dr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{e.error?this.v.reject(new Yr(t,e.error)):this.v.resolve()},this.transaction.onerror=e=>{const n=ts(e.target.error);this.v.reject(new Yr(t,n))}}static open(t,e,n,i){try{return new Hr(e,t.transaction(i,n))}catch(t){throw new Yr(e,t)}}get R(){return this.v.promise}abort(t){t&&this.v.reject(t),this.aborted||(nr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Jr(e)}}class Gr{constructor(t,e,n){this.name=t,this.version=e,this.V=n,12.2===Gr.S((0,a.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return nr("SimpleDb","Removing database:",t),Xr(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,a.hl)())return!1;if(Gr.C())return!0;const t=(0,a.z$)(),e=Gr.S(t),n=0<e&&e<10,i=Gr.N(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",BASE_URL:"/"})||void 0===t?void 0:t.k)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(t){return this.db||(nr("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Yr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new hr(ur.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new hr(ur.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Yr(t,i))},i.onupgradeneeded=t=>{nr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.V.O(e,i.transaction,t.oldVersion,this.version).next((()=>{nr("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=t=>this.F(t)),this.db}B(t){this.F=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.$(t);const e=Hr.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.P(),t))).catch((t=>(e.abort(t),Wr.reject(t)))).toPromise();return s.catch((()=>{})),await e.R,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(nr("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Kr{constructor(t){this.L=t,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(t){this.L=t}done(){this.q=!0}G(t){this.U=t}delete(){return Xr(this.L.delete())}}class Yr extends hr{constructor(t,e){super(ur.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Qr(t){return"IndexedDbTransactionError"===t.name}class Jr{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(nr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(nr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xr(n)}add(t){return nr("SimpleDb","ADD",this.store.name,t,t),Xr(this.store.add(t))}get(t){return Xr(this.store.get(t)).next((e=>(void 0===e&&(e=null),nr("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return nr("SimpleDb","DELETE",this.store.name,t),Xr(this.store.delete(t))}count(){return nr("SimpleDb","COUNT",this.store.name),Xr(this.store.count())}j(t,e){const n=this.options(t,e);if(n.index||"function"!=typeof this.store.getAll){const t=this.cursor(n),e=[];return this.W(t,((t,n)=>{e.push(n)})).next((()=>e))}{const t=this.store.getAll(n.range);return new Wr(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}}H(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Wr(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}J(t,e){nr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.Y=!1;const i=this.cursor(n);return this.W(i,((t,e,n)=>n.delete()))}X(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.W(i,e)}Z(t){const e=this.cursor({});return new Wr(((n,i)=>{e.onerror=t=>{const e=ts(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}W(t,e){const n=[];return new Wr(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Kr(r),o=e(r.primaryKey,r.value,s);if(o instanceof Wr){const t=o.catch((t=>(s.done(),Wr.reject(t))));n.push(t)}s.isDone?i():null===s.K?r.continue():r.continue(s.K)}})).next((()=>Wr.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.Y?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Xr(t){return new Wr(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=ts(t.target.error);n(e)}}))}let Zr=!1;function ts(t){const e=Gr.S((0,a.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new hr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zr||(Zr=!0,setTimeout((()=>{throw t}),0)),t}}return t}class es{constructor(t,e){this.asyncQueue=t,this.tt=e,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(t){nr("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{nr("IndexBackiller",`Documents written: ${await this.tt.nt()}`)}catch(t){Qr(t)?nr("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):await $r(t)}await this.et(6e4)}))}}class ns{constructor(t,e){this.localStore=t,this.persistence=e}async nt(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.st(e,t)))}st(t,e){const n=new Set;let i=e,r=!0;return Wr.doWhile((()=>!0===r&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((e=>{if(null!==e&&!n.has(e))return nr("IndexBackiller",`Processing collection: ${e}`),this.it(t,e,i).next((t=>{i-=t,n.add(e)}));r=!1})))).next((()=>e-i))}it(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((i=>this.localStore.localDocuments.getNextDocuments(t,e,i,n).next((n=>{const r=n.changes;return this.localStore.indexManager.updateIndexEntries(t,r).next((()=>this.rt(i,n))).next((n=>(nr("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(t,e,n)))).next((()=>r.size))}))))}rt(t,e){let n=t;return e.changes.forEach(((t,e)=>{const i=Ur(e);jr(i,n)>0&&(n=i)})),new Br(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ot(t),this.ut=t=>e.writeSequenceNumber(t))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}function rs(t){return null==t}function ss(t){return 0===t&&1/t==-1/0}function os(t){return"number"==typeof t&&Number.isInteger(t)&&!ss(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ls(e)),e=cs(t.get(n),e);return ls(e)}function cs(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function ls(t){return t+""}function us(t){const e=t.length;if(ar(e>=2),2===e)return ar(""===t.charAt(0)&&""===t.charAt(1)),Ar.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const e=t.indexOf("",s);switch((e<0||e>n)&&or(),t.charAt(e+1)){case"":const n=t.substring(s,e);let o;0===r.length?o=n:(r+=n,o=r,r=""),i.push(o);break;case"":r+=t.substring(s,e),r+="\0";break;case"":r+=t.substring(s,e+1);break;default:or()}s=e+2}return new Ar(i)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is.ct=-1;const hs=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t,e){return[t,as(e)]}function fs(t,e,n){return[t,as(e),n]}const ps={},gs=["prefixPath","collectionGroup","readTime","documentId"],ms=["prefixPath","collectionGroup","documentId"],ys=["collectionGroup","readTime","prefixPath","documentId"],vs=["canonicalId","targetId"],bs=["targetId","path"],ws=["path","targetId"],_s=["collectionId","parent"],xs=["indexId","uid"],Is=["uid","sequenceNumber"],Es=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ts=["indexId","uid","orderedDocumentKey"],Ss=["userId","collectionPath","documentId"],ks=["userId","collectionPath","largestBatchId"],Cs=["userId","collectionGroup","largestBatchId"],As=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ds=[...As,"documentOverlays"],Rs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Os=Rs,Ps=[...Os,"indexConfiguration","indexState","indexEntries"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends qr{constructor(t,e){super(),this.ht=t,this.currentSequenceNumber=e}}function Ns(t,e){const n=lr(t);return Gr.M(n.ht,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vs(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t,e){this.comparator=t,this.root=e||js.EMPTY}insert(t,e){return new Us(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,js.BLACK,null,null))}remove(t){return new Us(this.comparator,this.root.remove(t,this.comparator).copy(null,null,js.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Bs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Bs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Bs(this.root,t,this.comparator,!0)}}class Bs{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class js{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:js.RED,this.left=null!=i?i:js.EMPTY,this.right=null!=r?r:js.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new js(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return js.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return js.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,js.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw or();if(this.right.isRed())throw or();const t=this.left.check();if(t!==this.right.check())throw or();return t+(this.isRed()?0:1)}}js.EMPTY=null,js.RED=!0,js.BLACK=!1,js.EMPTY=new class{constructor(){this.size=0}get key(){throw or()}get value(){throw or()}get color(){throw or()}get left(){throw or()}get right(){throw or()}copy(t,e,n,i,r){return this}insert(t,e,n){return new js(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zs{constructor(t){this.comparator=t,this.data=new Us(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new qs(this.data.getIterator())}getIteratorFrom(t){return new qs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof zs))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new zs(this.comparator);return e.data=t,e}}class qs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $s(t){return t.hasNext()?t.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t){this.fields=t,t.sort(Rr.comparator)}static empty(){return new Ws([])}unionWith(t){let e=new zs(Rr.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ws(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Er(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Hs("Invalid base64 string: "+t):t}}(t);return new Ks(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Ks(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ir(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ks.EMPTY_BYTE_STRING=new Ks("");const Ys=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(t){if(ar(!!t),"string"==typeof t){let e=0;const n=Ys.exec(t);if(ar(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Js(t.seconds),nanos:Js(t.nanos)}}function Js(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Xs(t){return"string"==typeof t?Ks.fromBase64String(t):Ks.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function to(t){const e=t.mapValue.fields.__previous_value__;return Zs(e)?to(e):e}function eo(t){const e=Qs(t.mapValue.fields.__local_write_time__.timestampValue);return new Sr(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,e,n,i,r,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class io{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof io&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},so={nullValue:"NULL_VALUE"};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zs(t)?4:_o(t)?9007199254740991:10:or()}function ao(t,e){if(t===e)return!0;const n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eo(t).isEqual(eo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Qs(t.timestampValue),i=Qs(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Xs(t.bytesValue).isEqual(Xs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Js(t.geoPointValue.latitude)===Js(e.geoPointValue.latitude)&&Js(t.geoPointValue.longitude)===Js(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Js(t.integerValue)===Js(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Js(t.doubleValue),i=Js(e.doubleValue);return n===i?ss(n)===ss(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Er(t.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ls(n)!==Ls(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!ao(n[r],i[r])))return!1;return!0}(t,e);default:return or()}}function co(t,e){return void 0!==(t.values||[]).find((t=>ao(t,e)))}function lo(t,e){if(t===e)return 0;const n=oo(t),i=oo(e);if(n!==i)return Ir(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ir(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Js(t.integerValue||t.doubleValue),i=Js(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return uo(t.timestampValue,e.timestampValue);case 4:return uo(eo(t),eo(e));case 5:return Ir(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Xs(t),i=Xs(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=Ir(n[r],i[r]);if(0!==t)return t}return Ir(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ir(Js(t.latitude),Js(e.latitude));return 0!==n?n:Ir(Js(t.longitude),Js(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=lo(n[r],i[r]);if(t)return t}return Ir(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===ro.mapValue&&e===ro.mapValue)return 0;if(t===ro.mapValue)return 1;if(e===ro.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=Ir(i[o],s[o]);if(0!==t)return t;const e=lo(n[i[o]],r[s[o]]);if(0!==e)return e}return Ir(i.length,s.length)}(t.mapValue,e.mapValue);default:throw or()}}function uo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ir(t,e);const n=Qs(t),i=Qs(e),r=Ir(n.seconds,i.seconds);return 0!==r?r:Ir(n.nanos,i.nanos)}function ho(t){return fo(t)}function fo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Qs(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Or.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=fo(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${fo(t.fields[r])}`;return n+"}"}(t.mapValue):or();var e,n}function po(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function go(t){return!!t&&"integerValue"in t}function mo(t){return!!t&&"arrayValue"in t}function yo(t){return!!t&&"nullValue"in t}function vo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bo(t){return!!t&&"mapValue"in t}function wo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=wo(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _o(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function xo(t){return"nullValue"in t?so:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?po(io.empty(),Or.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:or()}function Io(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?po(io.empty(),Or.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ro:or()}function Eo(t,e){const n=lo(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function To(t,e){const n=lo(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(t){this.value=t}static empty(){return new So({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!bo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=wo(e)}setAll(t){let e=Rr.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=wo(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());bo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ao(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];bo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Fs(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new So(wo(this.value))}}function ko(t){const e=[];return Fs(t.fields,((t,n)=>{const i=new Rr([t]);if(bo(n)){const t=ko(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Ws(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Co{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Co(t,0,kr.min(),kr.min(),kr.min(),So.empty(),0)}static newFoundDocument(t,e,n,i){return new Co(t,1,e,kr.min(),n,i,0)}static newNoDocument(t,e){return new Co(t,2,e,kr.min(),kr.min(),So.empty(),0)}static newUnknownDocument(t,e){return new Co(t,3,e,kr.min(),kr.min(),So.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(kr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=So.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=So.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Co&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Co(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,e){this.position=t,this.inclusive=e}}function Do(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?Or.comparator(Or.fromName(o.referenceValue),n.key):lo(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Ro(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ao(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,e="asc"){this.field=t,this.dir=e}}function Po(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{}class No extends Mo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Wo(t,e,n):"array-contains"===e?new Yo(t,n):"in"===e?new Qo(t,n):"not-in"===e?new Jo(t,n):"array-contains-any"===e?new Xo(t,n):new No(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ho(t,n):new Go(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(lo(e,this.value)):null!==e&&oo(this.value)===oo(e)&&this.matchesComparison(lo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return or()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Lo extends Mo{constructor(t,e){super(),this.filters=t,this.op=e,this.lt=null}static create(t,e){return new Lo(t,e)}matches(t){return Fo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.ft((t=>t.isInequality()));return null!==t?t.field:null}ft(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function Fo(t){return"and"===t.op}function Vo(t){return"or"===t.op}function Uo(t){return Bo(t)&&Fo(t)}function Bo(t){for(const e of t.filters)if(e instanceof Lo)return!1;return!0}function jo(t){if(t instanceof No)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(Uo(t))return t.filters.map((t=>jo(t))).join(",");{const e=t.filters.map((t=>jo(t))).join(",");return`${t.op}(${e})`}}function zo(t,e){return t instanceof No?function(t,e){return e instanceof No&&t.op===e.op&&t.field.isEqual(e.field)&&ao(t.value,e.value)}(t,e):t instanceof Lo?function(t,e){return e instanceof Lo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&zo(n,e.filters[i])),!0)}(t,e):void or()}function qo(t,e){const n=t.filters.concat(e);return Lo.create(n,t.op)}function $o(t){return t instanceof No?function(t){return`${t.field.canonicalString()} ${t.op} ${ho(t.value)}`}(t):t instanceof Lo?function(t){return t.op.toString()+" {"+t.getFilters().map($o).join(" ,")+"}"}(t):"Filter"}class Wo extends No{constructor(t,e,n){super(t,e,n),this.key=Or.fromName(n.referenceValue)}matches(t){const e=Or.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ho extends No{constructor(t,e){super(t,"in",e),this.keys=Ko("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Go extends No{constructor(t,e){super(t,"not-in",e),this.keys=Ko("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Ko(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Or.fromName(t.referenceValue)))}class Yo extends No{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return mo(e)&&co(e.arrayValue,this.value)}}class Qo extends No{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&co(this.value.arrayValue,e)}}class Jo extends No{constructor(t,e){super(t,"not-in",e)}matches(t){if(co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!co(this.value.arrayValue,e)}}class Xo extends No{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!mo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>co(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.dt=null}}function ta(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Zo(t,e,n,i,r,s,o)}function ea(t){const e=lr(t);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>jo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),rs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ho(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ho(t))).join(",")),e.dt=t}return e.dt}function na(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Po(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ro(t.startAt,e.startAt)&&Ro(t.endAt,e.endAt)}function ia(t){return Or.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function ra(t,e){return t.filters.filter((t=>t instanceof No&&t.field.isEqual(e)))}function sa(t,e,n){let i=so,r=!0;for(const s of ra(t,e)){let t=so,e=!0;switch(s.op){case"<":case"<=":t=xo(s.value);break;case"==":case"in":case">=":t=s.value;break;case">":t=s.value,e=!1;break;case"!=":case"not-in":t=so}Eo({value:i,inclusive:r},{value:t,inclusive:e})<0&&(i=t,r=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];Eo({value:i,inclusive:r},{value:t,inclusive:n.inclusive})<0&&(i=t,r=n.inclusive);break}return{value:i,inclusive:r}}function oa(t,e,n){let i=ro,r=!0;for(const s of ra(t,e)){let t=ro,e=!0;switch(s.op){case">=":case">":t=Io(s.value),e=!1;break;case"==":case"in":case"<=":t=s.value;break;case"<":t=s.value,e=!1;break;case"!=":case"not-in":t=ro}To({value:i,inclusive:r},{value:t,inclusive:e})>0&&(i=t,r=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];To({value:i,inclusive:r},{value:t,inclusive:n.inclusive})>0&&(i=t,r=n.inclusive);break}return{value:i,inclusive:r}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function ca(t,e,n,i,r,s,o,a){return new aa(t,e,n,i,r,s,o,a)}function la(t){return new aa(t)}function ua(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function ha(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function da(t){for(const e of t.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function fa(t){return null!==t.collectionGroup}function pa(t){const e=lr(t);if(null===e.wt){e.wt=[];const t=da(e),n=ha(e);if(null!==t&&null===n)t.isKeyField()||e.wt.push(new Oo(t)),e.wt.push(new Oo(Rr.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.wt.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Oo(Rr.keyField(),t))}}}return e.wt}function ga(t){const e=lr(t);if(!e._t)if("F"===e.limitType)e._t=ta(e.path,e.collectionGroup,pa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of pa(e)){const e="desc"===r.dir?"asc":"desc";t.push(new Oo(r.field,e))}const n=e.endAt?new Ao(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ao(e.startAt.position,e.startAt.inclusive):null;e._t=ta(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e._t}function ma(t,e){e.getFirstInequalityField(),da(t);const n=t.filters.concat([e]);return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ya(t,e,n){return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function va(t,e){return na(ga(t),ga(e))&&t.limitType===e.limitType}function ba(t){return`${ea(ga(t))}|lt:${t.limitType}`}function wa(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>$o(t))).join(", ")}]`),rs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ho(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ho(t))).join(",")),`Target(${e})`}(ga(t))}; limitType=${t.limitType})`}function _a(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Or.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of pa(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Do(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,pa(t),e))&&!(t.endAt&&!function(t,e,n){const i=Do(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,pa(t),e))}(t,e)}function xa(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ia(t){return(e,n)=>{let i=!1;for(const r of pa(t)){const t=Ea(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function Ea(t,e,n){const i=t.field.isKeyField()?Or.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?lo(i,r):or()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return or()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Fs(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return Vs(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new Us(Or.comparator);function ka(){return Sa}const Ca=new Us(Or.comparator);function Aa(...t){let e=Ca;for(const n of t)e=e.insert(n.key,n);return e}function Da(t){let e=Ca;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ra(){return Pa()}function Oa(){return Pa()}function Pa(){return new Ta((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ma=new Us(Or.comparator),Na=new zs(Or.comparator);function La(...t){let e=Na;for(const n of t)e=e.add(n);return e}const Fa=new zs(Ir);function Va(){return Fa}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ss(e)?"-0":e}}function Ba(t){return{integerValue:""+t}}function ja(t,e){return os(e)?Ba(e):Ua(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this._=void 0}}function qa(t,e,n){return t instanceof Ha?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Zs(e)&&(e=to(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ga?Ka(t,e):t instanceof Ya?Qa(t,e):function(t,e){const n=Wa(t,e),i=Xa(n)+Xa(t.gt);return go(n)&&go(t.gt)?Ba(i):Ua(t.serializer,i)}(t,e)}function $a(t,e,n){return t instanceof Ga?Ka(t,e):t instanceof Ya?Qa(t,e):n}function Wa(t,e){return t instanceof Ja?go(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Ha extends za{}class Ga extends za{constructor(t){super(),this.elements=t}}function Ka(t,e){const n=Za(e);for(const i of t.elements)n.some((t=>ao(t,i)))||n.push(i);return{arrayValue:{values:n}}}class Ya extends za{constructor(t){super(),this.elements=t}}function Qa(t,e){let n=Za(e);for(const i of t.elements)n=n.filter((t=>!ao(t,i)));return{arrayValue:{values:n}}}class Ja extends za{constructor(t,e){super(),this.serializer=t,this.gt=e}}function Xa(t){return Js(t.integerValue||t.doubleValue)}function Za(t){return mo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t,e){this.field=t,this.transform=e}}function ec(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ga&&e instanceof Ga||t instanceof Ya&&e instanceof Ya?Er(t.elements,e.elements,ao):t instanceof Ja&&e instanceof Ja?ao(t.gt,e.gt):t instanceof Ha&&e instanceof Ha}(t.transform,e.transform)}class nc{constructor(t,e){this.version=t,this.transformResults=e}}class ic{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ic}static exists(t){return new ic(void 0,t)}static updateTime(t){return new ic(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class sc{}function oc(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new mc(t.key,ic.none()):new hc(t.key,t.data,ic.none());{const n=t.data,i=So.empty();let r=new zs(Rr.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new dc(t.key,i,new Ws(r.toArray()),ic.none())}}function ac(t,e,n){t instanceof hc?function(t,e,n){const i=t.value.clone(),r=pc(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof dc?function(t,e,n){if(!rc(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=pc(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(fc(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function cc(t,e,n,i){return t instanceof hc?function(t,e,n,i){if(!rc(t.precondition,e))return n;const r=t.value.clone(),s=gc(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof dc?function(t,e,n,i){if(!rc(t.precondition,e))return n;const r=gc(t.fieldTransforms,i,e),s=e.data;return s.setAll(fc(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return rc(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function lc(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Wa(i.transform,t||null);null!=r&&(null===n&&(n=So.empty()),n.set(i.field,r))}return n||null}function uc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Er(t,e,((t,e)=>ec(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hc extends sc{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dc extends sc{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function fc(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function pc(t,e,n){const i=new Map;ar(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,$a(o,a,n[r]))}return i}function gc(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,qa(t,s,e))}return i}class mc extends sc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yc extends sc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&ac(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=cc(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=cc(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Oa();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=oc(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(kr.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),La())}isEqual(t){return this.batchId===t.batchId&&Er(this.mutations,t.mutations,((t,e)=>uc(t,e)))&&Er(this.baseMutations,t.baseMutations,((t,e)=>uc(t,e)))}}class bc{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){ar(t.mutations.length===n.length);let i=Ma;const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new bc(t,e,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _c{constructor(t,e){this.count=t,this.unchangedNames=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc,Ic;function Ec(t){switch(t){default:return or();case ur.CANCELLED:case ur.UNKNOWN:case ur.DEADLINE_EXCEEDED:case ur.RESOURCE_EXHAUSTED:case ur.INTERNAL:case ur.UNAVAILABLE:case ur.UNAUTHENTICATED:return!1;case ur.INVALID_ARGUMENT:case ur.NOT_FOUND:case ur.ALREADY_EXISTS:case ur.PERMISSION_DENIED:case ur.FAILED_PRECONDITION:case ur.ABORTED:case ur.OUT_OF_RANGE:case ur.UNIMPLEMENTED:case ur.DATA_LOSS:return!0}}function Tc(t){if(void 0===t)return ir("GRPC error has no .code"),ur.UNKNOWN;switch(t){case xc.OK:return ur.OK;case xc.CANCELLED:return ur.CANCELLED;case xc.UNKNOWN:return ur.UNKNOWN;case xc.DEADLINE_EXCEEDED:return ur.DEADLINE_EXCEEDED;case xc.RESOURCE_EXHAUSTED:return ur.RESOURCE_EXHAUSTED;case xc.INTERNAL:return ur.INTERNAL;case xc.UNAVAILABLE:return ur.UNAVAILABLE;case xc.UNAUTHENTICATED:return ur.UNAUTHENTICATED;case xc.INVALID_ARGUMENT:return ur.INVALID_ARGUMENT;case xc.NOT_FOUND:return ur.NOT_FOUND;case xc.ALREADY_EXISTS:return ur.ALREADY_EXISTS;case xc.PERMISSION_DENIED:return ur.PERMISSION_DENIED;case xc.FAILED_PRECONDITION:return ur.FAILED_PRECONDITION;case xc.ABORTED:return ur.ABORTED;case xc.OUT_OF_RANGE:return ur.OUT_OF_RANGE;case xc.UNIMPLEMENTED:return ur.UNIMPLEMENTED;case xc.DATA_LOSS:return ur.DATA_LOSS;default:return or()}}(Ic=xc||(xc={}))[Ic.OK=0]="OK",Ic[Ic.CANCELLED=1]="CANCELLED",Ic[Ic.UNKNOWN=2]="UNKNOWN",Ic[Ic.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ic[Ic.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ic[Ic.NOT_FOUND=5]="NOT_FOUND",Ic[Ic.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ic[Ic.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ic[Ic.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ic[Ic.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ic[Ic.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ic[Ic.ABORTED=10]="ABORTED",Ic[Ic.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ic[Ic.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ic[Ic.INTERNAL=13]="INTERNAL",Ic[Ic.UNAVAILABLE=14]="UNAVAILABLE",Ic[Ic.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return kc}static getOrCreateInstance(){return null===kc&&(kc=new Sc),kc}onExistenceFilterMismatch(t){const e=Symbol();return this.onExistenceFilterMismatchCallbacks.set(e,t),()=>this.onExistenceFilterMismatchCallbacks.delete(e)}notifyOnExistenceFilterMismatch(t){this.onExistenceFilterMismatchCallbacks.forEach((e=>e(t)))}}let kc=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Yi([4294967295,4294967295],0);function Dc(t){const e=Cc().encode(t),n=new Ki;return n.update(e),new Uint8Array(n.digest())}function Rc(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yi([n,i],0),new Yi([r,s],0)]}class Oc{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Pc(`Invalid padding: ${e}`);if(n<0)throw new Pc(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Pc(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Pc(`Invalid padding when bitmap length is 0: ${e}`);this.It=8*t.length-e,this.Tt=Yi.fromNumber(this.It)}Et(t,e,n){let i=t.add(e.multiply(Yi.fromNumber(n)));return 1===i.compare(Ac)&&(i=new Yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}vt(t){if(0===this.It)return!1;const e=Dc(t),[n,i]=Rc(e);for(let r=0;r<this.hashCount;r++){const t=this.Et(n,i,r);if(!this.At(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new Oc(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.It)return;const e=Dc(t),[n,i]=Rc(e);for(let r=0;r<this.hashCount;r++){const t=this.Et(n,i,r);this.Rt(t)}}Rt(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Nc.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Mc(kr.min(),i,new Us(Ir),ka(),La())}}class Nc{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Nc(n,e,La(),La(),La())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t,e,n,i){this.Pt=t,this.removedTargetIds=e,this.key=n,this.bt=i}}class Fc{constructor(t,e){this.targetId=t,this.Vt=e}}class Vc{constructor(t,e,n=Ks.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Uc{constructor(){this.St=0,this.Dt=zc(),this.Ct=Ks.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(t){t.approximateByteSize()>0&&(this.Nt=!0,this.Ct=t)}Ot(){let t=La(),e=La(),n=La();return this.Dt.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:or()}})),new Nc(this.Ct,this.xt,t,e,n)}Ft(){this.Nt=!1,this.Dt=zc()}Bt(t,e){this.Nt=!0,this.Dt=this.Dt.insert(t,e)}Lt(t){this.Nt=!0,this.Dt=this.Dt.remove(t)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Bc{constructor(t){this.Gt=t,this.Qt=new Map,this.jt=ka(),this.zt=jc(),this.Wt=new Us(Ir)}Ht(t){for(const e of t.Pt)t.bt&&t.bt.isFoundDocument()?this.Jt(e,t.bt):this.Yt(e,t.key,t.bt);for(const e of t.removedTargetIds)this.Yt(e,t.key,t.bt)}Xt(t){this.forEachTarget(t,(e=>{const n=this.Zt(e);switch(t.state){case 0:this.te(e)&&n.$t(t.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(t.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(e);break;case 3:this.te(e)&&(n.Kt(),n.$t(t.resumeToken));break;case 4:this.te(e)&&(this.ee(e),n.$t(t.resumeToken));break;default:or()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Qt.forEach(((t,n)=>{this.te(n)&&e(n)}))}ne(t){var e;const n=t.targetId,i=t.Vt.count,r=this.se(n);if(r){const s=r.target;if(ia(s))if(0===i){const t=new Or(s.path);this.Yt(n,t,Co.newNoDocument(t,kr.min()))}else ar(1===i);else{const r=this.ie(n);if(r!==i){const i=this.re(t,r);if(0!==i){this.ee(n);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,t)}null===(e=Sc.instance)||void 0===e||e.notifyOnExistenceFilterMismatch(function(t,e,n){var i,r,s,o,a,c;const l={localCacheCount:e,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(l.bloomFilter={applied:0===t,hashCount:null!==(i=null==u?void 0:u.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===(s=null===(r=null==u?void 0:u.bits)||void 0===r?void 0:r.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),l}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i,r,t.Vt))}}}}re(t,e){const{unchangedNames:n,count:i}=t.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=Xs(r).toUint8Array()}catch(t){if(t instanceof Hs)return rr("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw t}try{c=new Oc(a,s,o)}catch(t){return rr(t instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",t),1}return 0===c.It?1:i!==e-this.oe(t.targetId,c)?2:0}oe(t,e){const n=this.Gt.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Gt.ue(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.vt(s)||(this.Yt(t,n,null),i++)})),i}ce(t){const e=new Map;this.Qt.forEach(((n,i)=>{const r=this.se(i);if(r){if(n.current&&ia(r.target)){const e=new Or(r.target.path);null!==this.jt.get(e)||this.ae(i,e)||this.Yt(i,e,Co.newNoDocument(e,t))}n.Mt&&(e.set(i,n.Ot()),n.Ft())}}));let n=La();this.zt.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.se(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.jt.forEach(((e,n)=>n.setReadTime(t)));const i=new Mc(t,e,this.Wt,this.jt,n);return this.jt=ka(),this.zt=jc(),this.Wt=new Us(Ir),i}Jt(t,e){if(!this.te(t))return;const n=this.ae(t,e.key)?2:0;this.Zt(t).Bt(e.key,n),this.jt=this.jt.insert(e.key,e),this.zt=this.zt.insert(e.key,this.he(e.key).add(t))}Yt(t,e,n){if(!this.te(t))return;const i=this.Zt(t);this.ae(t,e)?i.Bt(e,1):i.Lt(e),this.zt=this.zt.insert(e,this.he(e).delete(t)),n&&(this.jt=this.jt.insert(e,n))}removeTarget(t){this.Qt.delete(t)}ie(t){const e=this.Zt(t).Ot();return this.Gt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}qt(t){this.Zt(t).qt()}Zt(t){let e=this.Qt.get(t);return e||(e=new Uc,this.Qt.set(t,e)),e}he(t){let e=this.zt.get(t);return e||(e=new zs(Ir),this.zt=this.zt.insert(t,e)),e}te(t){const e=null!==this.se(t);return e||nr("WatchChangeAggregator","Detected inactive target",t),e}se(t){const e=this.Qt.get(t);return e&&e.kt?null:this.Gt.le(t)}ee(t){this.Qt.set(t,new Uc),this.Gt.getRemoteKeysForTarget(t).forEach((e=>{this.Yt(t,e,null)}))}ae(t,e){return this.Gt.getRemoteKeysForTarget(t).has(e)}}function jc(){return new Us(Or.comparator)}function zc(){return new Us(Or.comparator)}const qc=(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"};return t})(),$c=(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return t})(),Wc=(()=>{const t={and:"AND",or:"OR"};return t})();class Hc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Gc(t,e){return t.useProto3Json||rs(e)?e:{value:e}}function Kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Qc(t,e){return Kc(t,e.toTimestamp())}function Jc(t){return ar(!!t),kr.fromTimestamp(function(t){const e=Qs(t);return new Sr(e.seconds,e.nanos)}(t))}function Xc(t,e){return function(t){return new Ar(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Zc(t){const e=Ar.fromString(t);return ar(Tl(e)),e}function tl(t,e){return Xc(t.databaseId,e.path)}function el(t,e){const n=Zc(e);if(n.get(1)!==t.databaseId.projectId)throw new hr(ur.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new hr(ur.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Or(sl(n))}function nl(t,e){return Xc(t.databaseId,e)}function il(t){const e=Zc(t);return 4===e.length?Ar.emptyPath():sl(e)}function rl(t){return new Ar(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sl(t){return ar(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ol(t,e,n){return{name:tl(t,e),fields:n.value.mapValue.fields}}function al(t,e,n){const i=el(t,e.name),r=Jc(e.updateTime),s=e.createTime?Jc(e.createTime):kr.min(),o=new So({mapValue:{fields:e.fields}}),a=Co.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function cl(t,e){return"found"in e?function(t,e){ar(!!e.found),e.found.name,e.found.updateTime;const n=el(t,e.found.name),i=Jc(e.found.updateTime),r=e.found.createTime?Jc(e.found.createTime):kr.min(),s=new So({mapValue:{fields:e.found.fields}});return Co.newFoundDocument(n,i,r,s)}(t,e):"missing"in e?function(t,e){ar(!!e.missing),ar(!!e.readTime);const n=el(t,e.missing),i=Jc(e.readTime);return Co.newNoDocument(n,i)}(t,e):or()}function ll(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:or()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(ar(void 0===e||"string"==typeof e),Ks.fromBase64String(e||"")):(ar(void 0===e||e instanceof Uint8Array),Ks.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?ur.UNKNOWN:Tc(t.code);return new hr(e,t.message||"")}(o);n=new Vc(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=el(t,i.document.name),s=Jc(i.document.updateTime),o=i.document.createTime?Jc(i.document.createTime):kr.min(),a=new So({mapValue:{fields:i.document.fields}}),c=Co.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Lc(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=el(t,i.document),s=i.readTime?Jc(i.readTime):kr.min(),o=Co.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Lc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=el(t,i.document),s=i.removedTargetIds||[];n=new Lc([],s,r,null)}else{if(!("filter"in e))return or();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new _c(i,r),o=t.targetId;n=new Fc(o,s)}}return n}function ul(t,e){let n;if(e instanceof hc)n={update:ol(t,e.key,e.value)};else if(e instanceof mc)n={delete:tl(t,e.key)};else if(e instanceof dc)n={update:ol(t,e.key,e.data),updateMask:El(e.fieldMask)};else{if(!(e instanceof yc))return or();n={verify:tl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Ha)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ga)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ya)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ja)return{fieldPath:e.field.canonicalString(),increment:n.gt};throw or()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Qc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:or()}(t,e.precondition)),n}function hl(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?ic.updateTime(Jc(t.updateTime)):void 0!==t.exists?ic.exists(t.exists):ic.none()}(e.currentDocument):ic.none(),i=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)ar("REQUEST_TIME"===e.setToServerValue),n=new Ha;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new Ga(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new Ya(t)}else"increment"in e?n=new Ja(t,e.increment):or();const i=Rr.fromServerFormat(e.fieldPath);return new tc(i,n)}(t,e))):[];if(e.update){e.update.name;const r=el(t,e.update.name),s=new So({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new Ws(e.map((t=>Rr.fromServerFormat(t))))}(e.updateMask);return new dc(r,s,t,n,i)}return new hc(r,s,n,i)}if(e.delete){const i=el(t,e.delete);return new mc(i,n)}if(e.verify){const i=el(t,e.verify);return new yc(i,n)}return or()}function dl(t,e){return t&&t.length>0?(ar(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Jc(t.updateTime):Jc(e);return n.isEqual(kr.min())&&(n=Jc(e)),new nc(n,t.transformResults||[])}(t,e)))):[]}function fl(t,e){return{documents:[nl(t,e.path)]}}function pl(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=nl(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=nl(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(t){if(0!==t.length)return Il(Lo.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:_l(t.field),direction:vl(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Gc(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function gl(t){let e=il(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ar(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=yl(t);return e instanceof Lo&&Uo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Oo(xl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,rs(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Ao(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Ao(n,e)}(n.endAt)),ca(e,r,o,s,a,"F",c,l)}function ml(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return or()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}function yl(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=xl(t.unaryFilter.field);return No.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=xl(t.unaryFilter.field);return No.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xl(t.unaryFilter.field);return No.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=xl(t.unaryFilter.field);return No.create(r,"!=",{nullValue:"NULL_VALUE"});default:return or()}}(t):void 0!==t.fieldFilter?function(t){return No.create(xl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return or()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Lo.create(t.compositeFilter.filters.map((t=>yl(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return or()}}(t.compositeFilter.op))}(t):or()}function vl(t){return qc[t]}function bl(t){return $c[t]}function wl(t){return Wc[t]}function _l(t){return{fieldPath:t.canonicalString()}}function xl(t){return Rr.fromServerFormat(t.fieldPath)}function Il(t){return t instanceof No?function(t){if("=="===t.op){if(vo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(yo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(vo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(yo(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:bl(t.op),value:t.value}}}(t):t instanceof Lo?function(t){const e=t.getFilters().map((t=>Il(t)));return 1===e.length?e[0]:{compositeFilter:{op:wl(t.op),filters:e}}}(t):or()}function El(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Tl(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,e,n,i,r=kr.min(),s=kr.min(),o=Ks.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Sl(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t){this.fe=t}}function Cl(t,e){let n;if(e.document)n=al(t.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=Or.fromSegments(e.noDocument.path),i=Ol(e.noDocument.readTime);n=Co.newNoDocument(t,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return or();{const t=Or.fromSegments(e.unknownDocument.path),i=Ol(e.unknownDocument.version);n=Co.newUnknownDocument(t,i)}}return e.readTime&&n.setReadTime(function(t){const e=new Sr(t[0],t[1]);return kr.fromTimestamp(e)}(e.readTime)),n}function Al(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Dl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(t,e){return{name:tl(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Kc(t,e.version.toTimestamp()),createTime:Kc(t,e.createTime.toTimestamp())}}(t.fe,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Rl(e.version)};else{if(!e.isUnknownDocument())return or();i.unknownDocument={path:n.path.toArray(),version:Rl(e.version)}}return i}function Dl(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Rl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ol(t){const e=new Sr(t.seconds,t.nanoseconds);return kr.fromTimestamp(e)}function Pl(t,e){const n=(e.baseMutations||[]).map((e=>hl(t.fe,e)));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];if(s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform){const n=e.mutations[s+1];t.updateTransforms=n.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map((e=>hl(t.fe,e))),r=Sr.fromMillis(e.localWriteTimeMs);return new vc(e.batchId,r,n,i)}function Ml(t){const e=Ol(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Ol(t.lastLimboFreeSnapshotVersion):kr.min();let i;var r;return void 0!==t.query.documents?(ar(1===(r=t.query).documents.length),i=ga(la(il(r.documents[0])))):i=function(t){return ga(gl(t))}(t.query),new Sl(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ks.fromBase64String(t.resumeToken))}function Nl(t,e){const n=Rl(e.snapshotVersion),i=Rl(e.lastLimboFreeSnapshotVersion);let r;r=ia(e.target)?fl(t.fe,e.target):pl(t.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ea(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Ll(t){const e=gl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ya(e,e.limit,"L"):e}function Fl(t,e){return new wc(e.largestBatchId,hl(t.fe,e.overlayMutation))}function Vl(t,e){const n=e.path.lastSegment();return[t,as(e.path.popLast()),n]}function Ul(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Rl(i.readTime),documentKey:as(i.documentKey.path),largestBatchId:i.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{getBundleMetadata(t,e){return jl(t).get(e).next((t=>{if(t)return{id:(e=t).bundleId,createTime:Ol(e.createTime),version:e.version};var e}))}saveBundleMetadata(t,e){return jl(t).put({bundleId:(n=e).id,createTime:Rl(Jc(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return zl(t).get(e).next((t=>{if(t)return{name:(e=t).name,query:Ll(e.bundledQuery),readTime:Ol(e.readTime)};var e}))}saveNamedQuery(t,e){return zl(t).put(function(t){return{name:t.name,readTime:Rl(Jc(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function jl(t){return Ns(t,"bundles")}function zl(t){return Ns(t,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,e){this.serializer=t,this.userId=e}static de(t,e){const n=e.uid||"";return new ql(t,n)}getOverlay(t,e){return $l(t).get(Vl(this.userId,e)).next((t=>t?Fl(this.serializer,t):null))}getOverlays(t,e){const n=Ra();return Wr.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){const i=[];return n.forEach(((n,r)=>{const s=new wc(e,r);i.push(this.we(t,s))})),Wr.waitFor(i)}removeOverlaysForBatchId(t,e,n){const i=new Set;e.forEach((t=>i.add(as(t.getCollectionPath()))));const r=[];return i.forEach((e=>{const i=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);r.push($l(t).J("collectionPathOverlayIndex",i))})),Wr.waitFor(r)}getOverlaysForCollection(t,e,n){const i=Ra(),r=as(e),s=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return $l(t).j("collectionPathOverlayIndex",s).next((t=>{for(const e of t){const t=Fl(this.serializer,e);i.set(t.getKey(),t)}return i}))}getOverlaysForCollectionGroup(t,e,n,i){const r=Ra();let s;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return $l(t).X({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=Fl(this.serializer,e);r.size()<i||o.largestBatchId===s?(r.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>r))}we(t,e){return $l(t).put(function(t,e,n){const[i,r,s]=Vl(e,n.mutation.key);return{userId:e,collectionPath:r,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ul(t.fe,n.mutation)}}(this.serializer,this.userId,e))}}function $l(t){return Ns(t,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){}_e(t,e){this.me(t,e),e.ge()}me(t,e){if("nullValue"in t)this.ye(e,5);else if("booleanValue"in t)this.ye(e,10),e.pe(t.booleanValue?1:0);else if("integerValue"in t)this.ye(e,15),e.pe(Js(t.integerValue));else if("doubleValue"in t){const n=Js(t.doubleValue);isNaN(n)?this.ye(e,13):(this.ye(e,15),ss(n)?e.pe(0):e.pe(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ye(e,20),"string"==typeof n?e.Ie(n):(e.Ie(`${n.seconds||""}`),e.pe(n.nanos||0))}else if("stringValue"in t)this.Te(t.stringValue,e),this.Ee(e);else if("bytesValue"in t)this.ye(e,30),e.Ae(Xs(t.bytesValue)),this.Ee(e);else if("referenceValue"in t)this.ve(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ye(e,45),e.pe(n.latitude||0),e.pe(n.longitude||0)}else"mapValue"in t?_o(t)?this.ye(e,Number.MAX_SAFE_INTEGER):(this.Re(t.mapValue,e),this.Ee(e)):"arrayValue"in t?(this.Pe(t.arrayValue,e),this.Ee(e)):or()}Te(t,e){this.ye(e,25),this.be(t,e)}be(t,e){e.Ie(t)}Re(t,e){const n=t.fields||{};this.ye(e,55);for(const i of Object.keys(n))this.Te(i,e),this.me(n[i],e)}Pe(t,e){const n=t.values||[];this.ye(e,50);for(const i of n)this.me(i,e)}ve(t,e){this.ye(e,37),Or.fromName(t).path.forEach((t=>{this.ye(e,60),this.be(t,e)}))}ye(t,e){t.pe(e)}Ee(t){t.pe(2)}}function Hl(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Gl(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const i=Hl(255&t[n]);if(e+=i,8!==i)break}return e}(t);return Math.ceil(e/8)}Wl.Ve=new Wl;class Kl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.De(n.value),n=e.next();this.Ce()}xe(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Ne(n.value),n=e.next();this.ke()}Me(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.De(t);else if(t<2048)this.De(960|t>>>6),this.De(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.De(480|t>>>12),this.De(128|63&t>>>6),this.De(128|63&t);else{const t=e.codePointAt(0);this.De(240|t>>>18),this.De(128|63&t>>>12),this.De(128|63&t>>>6),this.De(128|63&t)}}this.Ce()}$e(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Ne(t);else if(t<2048)this.Ne(960|t>>>6),this.Ne(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Ne(480|t>>>12),this.Ne(128|63&t>>>6),this.Ne(128|63&t);else{const t=e.codePointAt(0);this.Ne(240|t>>>18),this.Ne(128|63&t>>>12),this.Ne(128|63&t>>>6),this.Ne(128|63&t)}}this.ke()}Oe(t){const e=this.Fe(t),n=Gl(e);this.Be(1+n),this.buffer[this.position++]=255&n;for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Le(t){const e=this.Fe(t),n=Gl(e);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(t){this.Be(t.length),this.buffer.set(t,this.position),this.position+=t.length}Qe(){return this.buffer.slice(0,this.position)}Fe(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let i=1;i<e.length;++i)e[i]^=n?255:0;return e}De(t){const e=255&t;0===e?(this.Ue(0),this.Ue(255)):255===e?(this.Ue(255),this.Ue(0)):this.Ue(e)}Ne(t){const e=255&t;0===e?(this.Ge(0),this.Ge(255)):255===e?(this.Ge(255),this.Ge(0)):this.Ge(t)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(t){this.Be(1),this.buffer[this.position++]=t}Ge(t){this.Be(1),this.buffer[this.position++]=~t}Be(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Yl{constructor(t){this.je=t}Ae(t){this.je.Se(t)}Ie(t){this.je.Me(t)}pe(t){this.je.Oe(t)}ge(){this.je.qe()}}class Ql{constructor(t){this.je=t}Ae(t){this.je.xe(t)}Ie(t){this.je.$e(t)}pe(t){this.je.Le(t)}ge(){this.je.Ke()}}class Jl{constructor(){this.je=new Kl,this.ze=new Yl(this.je),this.We=new Ql(this.je)}seed(t){this.je.seed(t)}He(t){return 0===t?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}Je(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new Xl(this.indexId,this.documentKey,this.arrayValue,n)}}function Zl(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=tu(t.arrayValue,e.arrayValue),0!==n?n:(n=tu(t.directionalValue,e.directionalValue),0!==n?n:Or.comparator(t.documentKey,e.documentKey)))}function tu(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(0!==i)return i}return t.length-e.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];for(const e of t.filters){const t=e;t.isInequality()?this.Ze=t:this.Xe.push(t)}}tn(t){ar(t.collectionGroup===this.collectionId);const e=Mr(t);if(void 0!==e&&!this.en(e))return!1;const n=Nr(t);let i=0,r=0;for(;i<n.length&&this.en(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Ze){const t=n[i];if(!this.nn(this.Ze,t)||!this.sn(this.Ye[r++],t))return!1;++i}for(;i<n.length;++i){const t=n[i];if(r>=this.Ye.length||!this.sn(this.Ye[r++],t))return!1}return!0}en(t){for(const e of this.Xe)if(this.nn(e,t))return!0;return!1}nn(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){var e,n;if(ar(t instanceof No||t instanceof Lo),t instanceof No){if(t instanceof Qo){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map((e=>No.create(t.field,"==",e))))||[];return Lo.create(i,"or")}return t}const i=t.filters.map((t=>nu(t)));return Lo.create(i,t.op)}function iu(t){if(0===t.getFilters().length)return[];const e=au(nu(t));return ar(ou(e)),ru(e)||su(e)?[e]:e.getFilters()}function ru(t){return t instanceof No}function su(t){return t instanceof Lo&&Uo(t)}function ou(t){return ru(t)||su(t)||function(t){if(t instanceof Lo&&Vo(t)){for(const e of t.getFilters())if(!ru(e)&&!su(e))return!1;return!0}return!1}(t)}function au(t){if(ar(t instanceof No||t instanceof Lo),t instanceof No)return t;if(1===t.filters.length)return au(t.filters[0]);const e=t.filters.map((t=>au(t)));let n=Lo.create(e,t.op);return n=uu(n),ou(n)?n:(ar(n instanceof Lo),ar(Fo(n)),ar(n.filters.length>1),n.filters.reduce(((t,e)=>cu(t,e))))}function cu(t,e){let n;return ar(t instanceof No||t instanceof Lo),ar(e instanceof No||e instanceof Lo),n=t instanceof No?e instanceof No?function(t,e){return Lo.create([t,e],"and")}(t,e):lu(t,e):e instanceof No?lu(e,t):function(t,e){if(ar(t.filters.length>0&&e.filters.length>0),Fo(t)&&Fo(e))return qo(t,e.getFilters());const n=Vo(t)?t:e,i=Vo(t)?e:t,r=n.filters.map((t=>cu(t,i)));return Lo.create(r,"or")}(t,e),uu(n)}function lu(t,e){if(Fo(e))return qo(e,t.getFilters());{const n=e.filters.map((e=>cu(t,e)));return Lo.create(n,"or")}}function uu(t){if(ar(t instanceof No||t instanceof Lo),t instanceof No)return t;const e=t.getFilters();if(1===e.length)return uu(e[0]);if(Bo(t))return t;const n=e.map((t=>uu(t))),i=[];return n.forEach((e=>{e instanceof No?i.push(e):e instanceof Lo&&(e.op===t.op?i.push(...e.filters):i.push(e))})),1===i.length?i[0]:Lo.create(i,t.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class hu{constructor(){this.rn=new du}addToCollectionParentIndex(t,e){return this.rn.add(e),Wr.resolve()}getCollectionParents(t,e){return Wr.resolve(this.rn.getEntries(e))}addFieldIndex(t,e){return Wr.resolve()}deleteFieldIndex(t,e){return Wr.resolve()}getDocumentsMatchingTarget(t,e){return Wr.resolve(null)}getIndexType(t,e){return Wr.resolve(0)}getFieldIndexes(t,e){return Wr.resolve([])}getNextCollectionGroupToUpdate(t){return Wr.resolve(null)}getMinOffset(t,e){return Wr.resolve(Br.min())}getMinOffsetFromCollectionGroup(t,e){return Wr.resolve(Br.min())}updateCollectionGroup(t,e,n){return Wr.resolve()}updateIndexEntries(t,e){return Wr.resolve()}}class du{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new zs(Ar.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new zs(Ar.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=new Uint8Array(0);class pu{constructor(t,e){this.user=t,this.databaseId=e,this.on=new du,this.un=new Ta((t=>ea(t)),((t,e)=>na(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.on.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((()=>{this.on.add(e)}));const r={collectionId:n,parent:as(i)};return gu(t).put(r)}return Wr.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[Tr(e),""],!1,!0);return gu(t).j(i).next((t=>{for(const i of t){if(i.collectionId!==e)break;n.push(us(i.parent))}return n}))}addFieldIndex(t,e){const n=yu(t),i=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);delete i.indexId;const r=n.add(i);if(e.indexState){const n=vu(t);return r.next((t=>{n.put(Ul(t,this.user,e.indexState.sequenceNumber,e.indexState.offset))}))}return r.next()}deleteFieldIndex(t,e){const n=yu(t),i=vu(t),r=mu(t);return n.delete(e.indexId).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}getDocumentsMatchingTarget(t,e){const n=mu(t);let i=!0;const r=new Map;return Wr.forEach(this.cn(e),(e=>this.an(t,e).next((t=>{i&&(i=!!t),r.set(e,t)})))).next((()=>{if(i){let t=La();const i=[];return Wr.forEach(r,((r,s)=>{var o;nr("IndexedDbIndexManager",`Using index ${o=r,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`} to execute ${ea(e)}`);const a=function(t,e){const n=Mr(e);if(void 0===n)return null;for(const i of ra(t,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(s,r),c=function(t,e){const n=new Map;for(const i of Nr(e))for(const e of ra(t,i.fieldPath))switch(e.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(s,r),l=function(t,e){const n=[];let i=!0;for(const r of Nr(e)){const e=0===r.kind?sa(t,r.fieldPath,t.startAt):oa(t,r.fieldPath,t.startAt);n.push(e.value),i&&(i=e.inclusive)}return new Ao(n,i)}(s,r),u=function(t,e){const n=[];let i=!0;for(const r of Nr(e)){const e=0===r.kind?oa(t,r.fieldPath,t.endAt):sa(t,r.fieldPath,t.endAt);n.push(e.value),i&&(i=e.inclusive)}return new Ao(n,i)}(s,r),h=this.hn(r,s,l),d=this.hn(r,s,u),f=this.ln(r,s,c),p=this.fn(r.indexId,a,h,l.inclusive,d,u.inclusive,f);return Wr.forEach(p,(r=>n.H(r,e.limit).next((e=>{e.forEach((e=>{const n=Or.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),i.push(n))}))}))))})).next((()=>i))}return Wr.resolve(null)}))}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:iu(Lo.create(t.filters,"and")).map((e=>ta(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt))),this.un.set(t,e),e)}fn(t,e,n,i,r,s,o){const a=(null!=e?e.length:1)*Math.max(n.length,r.length),c=a/(null!=e?e.length:1),l=[];for(let u=0;u<a;++u){const a=e?this.dn(e[u/c]):fu,h=this.wn(t,a,n[u%c],i),d=this._n(t,a,r[u%c],s),f=o.map((e=>this.wn(t,a,e,!0)));l.push(...this.createRange(h,d,f))}return l}wn(t,e,n,i){const r=new Xl(t,Or.empty(),e,n);return i?r:r.Je()}_n(t,e,n,i){const r=new Xl(t,Or.empty(),e,n);return i?r.Je():r}an(t,e){const n=new eu(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next((t=>{let e=null;for(const i of t)n.tn(i)&&(!e||i.fields.length>e.fields.length)&&(e=i);return e}))}getIndexType(t,e){let n=2;const i=this.cn(e);return Wr.forEach(i,(e=>this.an(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new zs(Rr.comparator),n=!1;for(const i of t.filters)for(const t of i.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const i of t.orderBy)i.field.isKeyField()||(e=e.add(i.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>function(t){return null!==t.limit}(e)&&i.length>1&&2===n?1:n))}mn(t,e){const n=new Jl;for(const i of Nr(t)){const t=e.data.field(i.fieldPath);if(null==t)return null;const r=n.He(i.kind);Wl.Ve._e(t,r)}return n.Qe()}dn(t){const e=new Jl;return Wl.Ve._e(t,e.He(0)),e.Qe()}gn(t,e){const n=new Jl;return Wl.Ve._e(po(this.databaseId,e),n.He(function(t){const e=Nr(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Qe()}ln(t,e,n){if(null===n)return[];let i=[];i.push(new Jl);let r=0;for(const s of Nr(t)){const t=n[r++];for(const n of i)if(this.yn(e,s.fieldPath)&&mo(t))i=this.pn(i,s,t);else{const e=n.He(s.kind);Wl.Ve._e(t,e)}}return this.In(i)}hn(t,e,n){return this.ln(t,e,n.position)}In(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Qe();return e}pn(t,e,n){const i=[...t],r=[];for(const s of n.arrayValue.values||[])for(const t of i){const n=new Jl;n.seed(t.Qe()),Wl.Ve._e(s,n.He(e.kind)),r.push(n)}return r}yn(t,e){return!!t.filters.find((t=>t instanceof No&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=yu(t),i=vu(t);return(e?n.j("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.j()).next((t=>{const e=[];return Wr.forEach(t,(t=>i.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new Fr(e.sequenceNumber,new Br(Ol(e.readTime),new Or(us(e.documentKey)),e.largestBatchId)):Fr.empty(),i=t.fields.map((([t,e])=>new Lr(Rr.fromServerFormat(t),e)));return new Pr(t.indexId,t.collectionGroup,i,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:Ir(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const i=yu(t),r=vu(t);return this.Tn(t).next((t=>i.j("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>Wr.forEach(e,(e=>r.put(Ul(e.indexId,this.user,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return Wr.forEach(e,((e,i)=>{const r=n.get(e.collectionGroup);return(r?Wr.resolve(r):this.getFieldIndexes(t,e.collectionGroup)).next((r=>(n.set(e.collectionGroup,r),Wr.forEach(r,(n=>this.En(t,e,n).next((e=>{const r=this.An(i,n);return e.isEqual(r)?Wr.resolve():this.vn(t,i,n,e,r)})))))))}))}Rn(t,e,n,i){return mu(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(n,e.key),documentKey:e.key.path.toArray()})}Pn(t,e,n,i){return mu(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(n,e.key),e.key.path.toArray()])}En(t,e,n){const i=mu(t);let r=new zs(Zl);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,e)])},((t,i)=>{r=r.add(new Xl(n.indexId,e,i.arrayValue,i.directionalValue))})).next((()=>r))}An(t,e){let n=new zs(Zl);const i=this.mn(e,t);if(null==i)return n;const r=Mr(e);if(null!=r){const s=t.data.field(r.fieldPath);if(mo(s))for(const r of s.arrayValue.values||[])n=n.add(new Xl(e.indexId,t.key,this.dn(r),i))}else n=n.add(new Xl(e.indexId,t.key,fu,i));return n}vn(t,e,n,i,r){nr("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(t,e,n,i,r){const s=t.getIterator(),o=e.getIterator();let a=$s(s),c=$s(o);for(;a||c;){let t=!1,e=!1;if(a&&c){const i=n(a,c);i<0?e=!0:i>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(i(c),c=$s(o)):e?(r(a),a=$s(s)):(a=$s(s),c=$s(o))}}(i,r,Zl,(i=>{s.push(this.Rn(t,e,n,i))}),(i=>{s.push(this.Pn(t,e,n,i))})),Wr.waitFor(s)}Tn(t){let e=1;return vu(t).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,i)=>{i.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>Zl(t,e))).filter(((t,e,n)=>!e||0!==Zl(t,n[e-1])));const i=[];i.push(t);for(const s of n){const n=Zl(s,t),r=Zl(s,e);if(0===n)i[0]=t.Je();else if(n>0&&r<0)i.push(s),i.push(s.Je());else if(r>0)break}i.push(e);const r=[];for(let s=0;s<i.length;s+=2){if(this.bn(i[s],i[s+1]))return[];const t=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,fu,[]],e=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,fu,[]];r.push(IDBKeyRange.bound(t,e))}return r}bn(t,e){return Zl(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(bu)}getMinOffset(t,e){return Wr.mapArray(this.cn(e),(e=>this.an(t,e).next((t=>t||or())))).next(bu)}}function gu(t){return Ns(t,"collectionParents")}function mu(t){return Ns(t,"indexEntries")}function yu(t){return Ns(t,"indexConfiguration")}function vu(t){return Ns(t,"indexState")}function bu(t){ar(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;jr(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Br(e.readTime,e.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _u{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new _u(t,_u.DEFAULT_COLLECTION_PERCENTILE,_u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=i.X({range:o},((t,e,n)=>(a++,n.delete())));s.push(c.next((()=>{ar(1===a)})));const l=[];for(const u of n.mutations){const t=fs(e,u.key.path,n.batchId);s.push(r.delete(t)),l.push(u.key)}return Wr.waitFor(s).next((()=>l))}function Iu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw or();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_u.DEFAULT_COLLECTION_PERCENTILE=10,_u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_u.DEFAULT=new _u(41943040,_u.DEFAULT_COLLECTION_PERCENTILE,_u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_u.DISABLED=new _u(-1,0,0);class Eu{constructor(t,e,n,i){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=i,this.Vn={}}static de(t,e,n,i){ar(""!==t.uid);const r=t.isAuthenticated()?t.uid:"";return new Eu(r,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Su(t).X({index:"userMutationsIndex",range:n},((t,n,i)=>{e=!1,i.done()})).next((()=>e))}addMutationBatch(t,e,n,i){const r=ku(t),s=Su(t);return s.add({}).next((o=>{ar("number"==typeof o);const a=new vc(o,e,n,i),c=function(t,e,n){const i=n.baseMutations.map((e=>ul(t.fe,e))),r=n.mutations.map((e=>ul(t.fe,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(this.serializer,this.userId,a),l=[];let u=new zs(((t,e)=>Ir(t.canonicalString(),e.canonicalString())));for(const t of i){const e=fs(this.userId,t.key.path,o);u=u.add(t.key.path.popLast()),l.push(s.put(c)),l.push(r.put(e,ps))}return u.forEach((e=>{l.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),Wr.waitFor(l).next((()=>a))}))}lookupMutationBatch(t,e){return Su(t).get(e).next((t=>t?(ar(t.userId===this.userId),Pl(this.serializer,t)):null))}Sn(t,e){return this.Vn[e]?Wr.resolve(this.Vn[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.Vn[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return Su(t).X({index:"userMutationsIndex",range:i},((t,e,i)=>{e.userId===this.userId&&(ar(e.batchId>=n),r=Pl(this.serializer,e)),i.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Su(t).X({index:"userMutationsIndex",range:e,reverse:!0},((t,e,i)=>{n=e.batchId,i.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Su(t).j("userMutationsIndex",e).next((t=>t.map((t=>Pl(this.serializer,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=ds(this.userId,e.path),i=IDBKeyRange.lowerBound(n),r=[];return ku(t).X({range:i},((n,i,s)=>{const[o,a,c]=n,l=us(a);if(o===this.userId&&e.path.isEqual(l))return Su(t).get(c).next((t=>{if(!t)throw or();ar(t.userId===this.userId),r.push(Pl(this.serializer,t))}));s.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new zs(Ir);const i=[];return e.forEach((e=>{const r=ds(this.userId,e.path),s=IDBKeyRange.lowerBound(r),o=ku(t).X({range:s},((t,i,r)=>{const[s,o,a]=t,c=us(o);s===this.userId&&e.path.isEqual(c)?n=n.add(a):r.done()}));i.push(o)})),Wr.waitFor(i).next((()=>this.Dn(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,r=ds(this.userId,n),s=IDBKeyRange.lowerBound(r);let o=new zs(Ir);return ku(t).X({range:s},((t,e,r)=>{const[s,a,c]=t,l=us(a);s===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(c)):r.done()})).next((()=>this.Dn(t,o)))}Dn(t,e){const n=[],i=[];return e.forEach((e=>{i.push(Su(t).get(e).next((t=>{if(null===t)throw or();ar(t.userId===this.userId),n.push(Pl(this.serializer,t))})))})),Wr.waitFor(i).next((()=>n))}removeMutationBatch(t,e){return xu(t.ht,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.Cn(e.batchId)})),Wr.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}Cn(t){delete this.Vn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return Wr.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return ku(t).X({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=us(t[1]);i.push(e)}else n.done()})).next((()=>{ar(0===i.length)}))}))}containsKey(t,e){return Tu(t,this.userId,e)}xn(t){return Cu(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Tu(t,e,n){const i=ds(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return ku(t).X({range:s,Y:!0},((t,n,i)=>{const[s,a,c]=t;s===e&&a===r&&(o=!0),i.done()})).next((()=>o))}function Su(t){return Ns(t,"mutations")}function ku(t){return Ns(t,"documentMutations")}function Cu(t){return Ns(t,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static kn(){return new Au(0)}static Mn(){return new Au(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.$n(t).next((e=>{const n=new Au(e.highestTargetId);return e.highestTargetId=n.next(),this.On(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.$n(t).next((t=>kr.fromTimestamp(new Sr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.$n(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.$n(t).next((i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.On(t,i))))}addTargetData(t,e){return this.Fn(t,e).next((()=>this.$n(t).next((n=>(n.targetCount+=1,this.Bn(e,n),this.On(t,n))))))}updateTargetData(t,e){return this.Fn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Ru(t).delete(e.targetId))).next((()=>this.$n(t))).next((e=>(ar(e.targetCount>0),e.targetCount-=1,this.On(t,e))))}removeTargets(t,e,n){let i=0;const r=[];return Ru(t).X(((s,o)=>{const a=Ml(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(t,a)))})).next((()=>Wr.waitFor(r))).next((()=>i))}forEachTarget(t,e){return Ru(t).X(((t,n)=>{const i=Ml(n);e(i)}))}$n(t){return Ou(t).get("targetGlobalKey").next((t=>(ar(null!==t),t)))}On(t,e){return Ou(t).put("targetGlobalKey",e)}Fn(t,e){return Ru(t).put(Nl(this.serializer,e))}Bn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.$n(t).next((t=>t.targetCount))}getTargetData(t,e){const n=ea(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return Ru(t).X({range:i,index:"queryTargetsIndex"},((t,n,i)=>{const s=Ml(n);na(e,s.target)&&(r=s,i.done())})).next((()=>r))}addMatchingKeys(t,e,n){const i=[],r=Pu(t);return e.forEach((e=>{const s=as(e.path);i.push(r.put({targetId:n,path:s})),i.push(this.referenceDelegate.addReference(t,n,e))})),Wr.waitFor(i)}removeMatchingKeys(t,e,n){const i=Pu(t);return Wr.forEach(e,(e=>{const r=as(e.path);return Wr.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=Pu(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=Pu(t);let r=La();return i.X({range:n,Y:!0},((t,e,n)=>{const i=us(t[1]),s=new Or(i);r=r.add(s)})).next((()=>r))}containsKey(t,e){const n=as(e.path),i=IDBKeyRange.bound([n],[Tr(n)],!1,!0);let r=0;return Pu(t).X({index:"documentTargetsIndex",Y:!0,range:i},(([t,e],n,i)=>{0!==t&&(r++,i.done())})).next((()=>r>0))}le(t,e){return Ru(t).get(e).next((t=>t?Ml(t):null))}}function Ru(t){return Ns(t,"targets")}function Ou(t){return Ns(t,"targetGlobal")}function Pu(t){return Ns(t,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu([t,e],[n,i]){const r=Ir(t,n);return 0===r?Ir(e,i):r}class Nu{constructor(t){this.Ln=t,this.buffer=new zs(Mu),this.qn=0}Un(){return++this.qn}Kn(t){const e=[t,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Mu(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Lu{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(t){nr("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qr(t)?nr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await $r(t)}await this.Qn(3e5)}))}}class Fu{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.zn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return Wr.resolve(is.ct);const n=new Nu(e);return this.jn.forEachTarget(t,(t=>n.Kn(t.sequenceNumber))).next((()=>this.jn.Wn(t,(t=>n.Kn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.jn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(nr("LruGarbageCollector","Garbage collection skipped; disabled"),Wr.resolve(wu)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(nr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wu):this.Hn(t,e)))}getCacheSize(t){return this.jn.getCacheSize(t)}Hn(t,e){let n,i,r,s,a,c,l;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(nr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,a=Date.now(),this.removeTargets(t,n,e)))).next((e=>(r=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(l=Date.now(),tr()<=o["in"].DEBUG&&nr("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${i} in `+(a-s)+"ms\n"+`\tRemoved ${r} targets in `+(c-a)+"ms\n"+`\tRemoved ${t} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-u}ms`),Wr.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t}))))}}function Vu(t,e){return new Fu(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(t,e){this.db=t,this.garbageCollector=Vu(this,e)}zn(t){const e=this.Jn(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Jn(t){let e=0;return this.Wn(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Wn(t,e){return this.Yn(t,((t,n)=>e(n)))}addReference(t,e,n){return Bu(t,n)}removeReference(t,e,n){return Bu(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Bu(t,e)}Xn(t,e){return function(t,e){let n=!1;return Cu(t).Z((i=>Tu(t,i,e).next((t=>(t&&(n=!0),Wr.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Yn(t,((s,o)=>{if(o<=e){const e=this.Xn(t,s).next((e=>{if(!e)return r++,n.getEntry(t,s).next((()=>(n.removeEntry(s,kr.min()),Pu(t).delete([0,as(s.path)]))))}));i.push(e)}})).next((()=>Wr.waitFor(i))).next((()=>n.apply(t))).next((()=>r))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Bu(t,e)}Yn(t,e){const n=Pu(t);let i,r=is.ct;return n.X({index:"documentTargetsIndex"},(([t,n],{path:s,sequenceNumber:o})=>{0===t?(r!==is.ct&&e(new Or(us(i)),r),r=o,i=s):r=is.ct})).next((()=>{r!==is.ct&&e(new Or(us(i)),r)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Bu(t,e){return Pu(t).put(function(t,e){return{targetId:0,path:as(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.changes=new Ta((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Co.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Wr.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return Hu(t).put(n)}removeEntry(t,e,n){return Hu(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Dl(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.Zn(t,n))))}getEntry(t,e){let n=Co.newInvalidDocument(e);return Hu(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(e))},((t,i)=>{n=this.ts(e,i)})).next((()=>n))}es(t,e){let n={size:0,document:Co.newInvalidDocument(e)};return Hu(t).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(e))},((t,i)=>{n={document:this.ts(e,i),size:Iu(i)}})).next((()=>n))}getEntries(t,e){let n=ka();return this.ns(t,e,((t,e)=>{const i=this.ts(t,e);n=n.insert(t,i)})).next((()=>n))}ss(t,e){let n=ka(),i=new Us(Or.comparator);return this.ns(t,e,((t,e)=>{const r=this.ts(t,e);n=n.insert(t,r),i=i.insert(t,Iu(e))})).next((()=>({documents:n,rs:i})))}ns(t,e,n){if(e.isEmpty())return Wr.resolve();let i=new zs(Yu);e.forEach((t=>i=i.add(t)));const r=IDBKeyRange.bound(Gu(i.first()),Gu(i.last())),s=i.getIterator();let o=s.getNext();return Hu(t).X({index:"documentKeyIndex",range:r},((t,e,i)=>{const r=Or.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&Yu(o,r)<0;)n(o,null),o=s.getNext();o&&o.isEqual(r)&&(n(o,e),o=s.hasNext()?s.getNext():null),o?i.G(Gu(o)):i.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(t,e,n,i){const r=e.path,s=[r.popLast().toArray(),r.lastSegment(),Dl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[r.popLast().toArray(),r.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hu(t).j(IDBKeyRange.bound(s,o,!0)).next((t=>{let n=ka();for(const r of t){const t=this.ts(Or.fromSegments(r.prefixPath.concat(r.collectionGroup,r.documentId)),r);t.isFoundDocument()&&(_a(e,t)||i.has(t.key))&&(n=n.insert(t.key,t))}return n}))}getAllFromCollectionGroup(t,e,n,i){let r=ka();const s=Ku(e,n),o=Ku(e,Br.max());return Hu(t).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((t,e,n)=>{const s=this.ts(Or.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);r=r.insert(s.key,s),r.size===i&&n.done()})).next((()=>r))}newChangeBuffer(t){return new $u(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return Wu(t).get("remoteDocumentGlobalKey").next((t=>(ar(!!t),t)))}Zn(t,e){return Wu(t).put("remoteDocumentGlobalKey",e)}ts(t,e){if(e){const t=Cl(this.serializer,e);if(!t.isNoDocument()||!t.version.isEqual(kr.min()))return t}return Co.newInvalidDocument(t)}}function qu(t){return new zu(t)}class $u extends ju{constructor(t,e){super(),this.os=t,this.trackRemovals=e,this.us=new Ta((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,i=new zs(((t,e)=>Ir(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((r,s)=>{const o=this.us.get(r);if(e.push(this.os.removeEntry(t,r,o.readTime)),s.isValidDocument()){const a=Al(this.os.serializer,s);i=i.add(r.path.popLast());const c=Iu(a);n+=c-o.size,e.push(this.os.addEntry(t,r,a))}else if(n-=o.size,this.trackRemovals){const n=Al(this.os.serializer,s.convertToNoDocument(kr.min()));e.push(this.os.addEntry(t,r,n))}})),i.forEach((n=>{e.push(this.os.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.os.updateMetadata(t,n)),Wr.waitFor(e)}getFromCache(t,e){return this.os.es(t,e).next((t=>(this.us.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.os.ss(t,e).next((({documents:t,rs:e})=>(e.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t)))}}function Wu(t){return Ns(t,"remoteDocumentGlobal")}function Hu(t){return Ns(t,"remoteDocumentsV14")}function Gu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ku(t,e){const n=e.documentKey.path.toArray();return[t,Dl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Yu(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=Ir(n[s],i[s]),r)return r;return r=Ir(n.length,i.length),r||(r=Ir(n[n.length-2],i[i.length-2]),r||Ir(n[n.length-1],i[i.length-1]))
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Qu{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&cc(n.mutation,t,Ws.empty(),Sr.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,La()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=La()){const i=Ra();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Aa();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Ra();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,La())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=ka();const s=Pa(),o=Pa();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof dc)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),cc(o.mutation,e,o.mutation.getFieldMask(),Sr.now())):s.set(e.key,Ws.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Qu(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Pa();let i=new Us(((t,e)=>t-e)),r=La();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ws.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||La()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Oa();c.forEach((t=>{if(!r.has(t)){const i=oc(e.get(t),n.get(t));null!==i&&l.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Wr.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Or.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):fa(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Wr.resolve(Ra());let o=-1,a=r;return s.next((e=>Wr.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Wr.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,La()))).next((t=>({batchId:o,changes:Da(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Or(e)).next((t=>{let e=Aa();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n){const i=e.collectionGroup;let r=Aa();return this.indexManager.getCollectionParents(t,i).next((s=>Wr.forEach(s,(s=>{const o=function(t,e){return new aa(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.getDocumentsMatchingCollectionQuery(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i)))).next((t=>{i.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Co.newInvalidDocument(i)))}));let n=Aa();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&cc(s.mutation,r,Ws.empty(),Sr.now()),_a(e,r)&&(n=n.insert(t,r))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(t){this.serializer=t,this.cs=new Map,this.hs=new Map}getBundleMetadata(t,e){return Wr.resolve(this.cs.get(e))}saveBundleMetadata(t,e){var n;return this.cs.set(e.id,{id:(n=e).id,version:n.version,createTime:Jc(n.createTime)}),Wr.resolve()}getNamedQuery(t,e){return Wr.resolve(this.hs.get(e))}saveNamedQuery(t,e){return this.hs.set(e.name,function(t){return{name:t.name,query:Ll(t.bundledQuery),readTime:Jc(t.readTime)}}(e)),Wr.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this.overlays=new Us(Or.comparator),this.ls=new Map}getOverlay(t,e){return Wr.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Ra();return Wr.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.we(t,e,i)})),Wr.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.ls.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.ls.delete(n)),Wr.resolve()}getOverlaysForCollection(t,e,n){const i=Ra(),r=e.length+1,s=new Or(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Wr.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Us(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=Ra(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Ra(),a=r.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((t,e)=>o.set(t,e))),o.size()>=i)break;return Wr.resolve(o)}we(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new wc(e,n));let r=this.ls.get(e);void 0===r&&(r=La(),this.ls.set(e,r)),this.ls.set(e,r.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this.fs=new zs(eh.ds),this.ws=new zs(eh._s)}isEmpty(){return this.fs.isEmpty()}addReference(t,e){const n=new eh(t,e);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.ys(new eh(t,e))}ps(t,e){t.forEach((t=>this.removeReference(t,e)))}Is(t){const e=new Or(new Ar([])),n=new eh(e,t),i=new eh(e,t+1),r=[];return this.ws.forEachInRange([n,i],(t=>{this.ys(t),r.push(t.key)})),r}Ts(){this.fs.forEach((t=>this.ys(t)))}ys(t){this.fs=this.fs.delete(t),this.ws=this.ws.delete(t)}Es(t){const e=new Or(new Ar([])),n=new eh(e,t),i=new eh(e,t+1);let r=La();return this.ws.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new eh(t,0),n=this.fs.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class eh{constructor(t,e){this.key=t,this.As=e}static ds(t,e){return Or.comparator(t.key,e.key)||Ir(t.As,e.As)}static _s(t,e){return Ir(t.As,e.As)||Or.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.vs=1,this.Rs=new zs(eh.ds)}checkEmpty(t){return Wr.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new vc(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.Rs=this.Rs.add(new eh(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Wr.resolve(s)}lookupMutationBatch(t,e){return Wr.resolve(this.Ps(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.bs(n),r=i<0?0:i;return Wr.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Wr.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(t){return Wr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new eh(e,0),i=new eh(e,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,i],(t=>{const e=this.Ps(t.As);r.push(e)})),Wr.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new zs(Ir);return e.forEach((t=>{const e=new eh(t,0),i=new eh(t,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([e,i],(t=>{n=n.add(t.As)}))})),Wr.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Or.isDocumentKey(r)||(r=r.child(""));const s=new eh(new Or(r),0);let o=new zs(Ir);return this.Rs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.As)),!0)}),s),Wr.resolve(this.Vs(o))}Vs(t){const e=[];return t.forEach((t=>{const n=this.Ps(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){ar(0===this.Ss(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Wr.forEach(e.mutations,(i=>{const r=new eh(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Rs=n}))}Cn(t){}containsKey(t,e){const n=new eh(e,0),i=this.Rs.firstAfterOrEqual(n);return Wr.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Wr.resolve()}Ss(t,e){return this.bs(t)}bs(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Ps(t){const e=this.bs(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t){this.Ds=t,this.docs=new Us(Or.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.Ds(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Wr.resolve(n?n.document.mutableCopy():Co.newInvalidDocument(e))}getEntries(t,e){let n=ka();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Co.newInvalidDocument(t))})),Wr.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=ka();const s=e.path,o=new Or(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||jr(Ur(o),n)<=0||(i.has(o.key)||_a(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Wr.resolve(r)}getAllFromCollectionGroup(t,e,n,i){or()}Cs(t,e){return Wr.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new rh(this)}getSize(t){return Wr.resolve(this.size)}}class rh extends ju{constructor(t){super(),this.os=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.os.addEntry(t,i)):this.os.removeEntry(n)})),Wr.waitFor(e)}getFromCache(t,e){return this.os.getEntry(t,e)}getAllFromCache(t,e){return this.os.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t){this.persistence=t,this.xs=new Ta((t=>ea(t)),na),this.lastRemoteSnapshotVersion=kr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new th,this.targetCount=0,this.Ms=Au.kn()}forEachTarget(t,e){return this.xs.forEach(((t,n)=>e(n))),Wr.resolve()}getLastRemoteSnapshotVersion(t){return Wr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Wr.resolve(this.Ns)}allocateTargetId(t){return this.highestTargetId=this.Ms.next(),Wr.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ns&&(this.Ns=e),Wr.resolve()}Fn(t){this.xs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ms=new Au(e),this.highestTargetId=e),t.sequenceNumber>this.Ns&&(this.Ns=t.sequenceNumber)}addTargetData(t,e){return this.Fn(e),this.targetCount+=1,Wr.resolve()}updateTargetData(t,e){return this.Fn(e),Wr.resolve()}removeTargetData(t,e){return this.xs.delete(e.target),this.ks.Is(e.targetId),this.targetCount-=1,Wr.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.xs.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Wr.waitFor(r).next((()=>i))}getTargetCount(t){return Wr.resolve(this.targetCount)}getTargetData(t,e){const n=this.xs.get(e)||null;return Wr.resolve(n)}addMatchingKeys(t,e,n){return this.ks.gs(e,n),Wr.resolve()}removeMatchingKeys(t,e,n){this.ks.ps(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Wr.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.ks.Is(e),Wr.resolve()}getMatchingKeysForTargetId(t,e){const n=this.ks.Es(e);return Wr.resolve(n)}containsKey(t,e){return Wr.resolve(this.ks.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,e){this.$s={},this.overlays={},this.Os=new is(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new sh(this),this.indexManager=new hu,this.remoteDocumentCache=function(t){return new ih(t)}((t=>this.referenceDelegate.Ls(t))),this.serializer=new kl(e),this.qs=new Xu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Zu,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.$s[t.toKey()];return n||(n=new nh(e,this.referenceDelegate),this.$s[t.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(t,e,n){nr("MemoryPersistence","Starting transaction:",t);const i=new ah(this.Os.next());return this.referenceDelegate.Us(),n(i).next((t=>this.referenceDelegate.Ks(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gs(t,e){return Wr.or(Object.values(this.$s).map((n=>()=>n.containsKey(t,e))))}}class ah extends qr{constructor(t){super(),this.currentSequenceNumber=t}}class ch{constructor(t){this.persistence=t,this.Qs=new th,this.js=null}static zs(t){return new ch(t)}get Ws(){if(this.js)return this.js;throw or()}addReference(t,e,n){return this.Qs.addReference(n,e),this.Ws.delete(n.toString()),Wr.resolve()}removeReference(t,e,n){return this.Qs.removeReference(n,e),this.Ws.add(n.toString()),Wr.resolve()}markPotentiallyOrphaned(t,e){return this.Ws.add(e.toString()),Wr.resolve()}removeTarget(t,e){this.Qs.Is(e.targetId).forEach((t=>this.Ws.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Ws.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Us(){this.js=new Set}Ks(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wr.forEach(this.Ws,(n=>{const i=Or.fromPath(n);return this.Hs(t,i).next((t=>{t||e.removeEntry(i,kr.min())}))})).next((()=>(this.js=null,e.apply(t))))}updateLimboDocument(t,e){return this.Hs(t,e).next((t=>{t?this.Ws.delete(e.toString()):this.Ws.add(e.toString())}))}Ls(t){return 0}Hs(t,e){return Wr.or([()=>Wr.resolve(this.Qs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gs(t,e)])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t){this.serializer=t}O(t,e,n,i){const r=new Hr("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hs,{unique:!0}),t.createObjectStore("documentMutations")}(t),uh(t),function(t){t.createObjectStore("remoteDocuments")}(t));let s=Wr.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),uh(t)),s=s.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kr.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(r)))),n<4&&i>=4&&(0!==n&&(s=s.next((()=>function(t,e){return e.store("mutations").j().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hs,{unique:!0});const i=e.store("mutations"),r=n.map((t=>i.put(t)));return Wr.waitFor(r)}))}(t,r)))),s=s.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&i>=5&&(s=s.next((()=>this.Ys(r)))),n<6&&i>=6&&(s=s.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.Xs(r))))),n<7&&i>=7&&(s=s.next((()=>this.Zs(r)))),n<8&&i>=8&&(s=s.next((()=>this.ti(t,r)))),n<9&&i>=9&&(s=s.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&i>=10&&(s=s.next((()=>this.ei(r)))),n<11&&i>=11&&(s=s.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&i>=12&&(s=s.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:Ss});e.createIndex("collectionPathOverlayIndex",ks,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",Cs,{unique:!1})}(t)}))),n<13&&i>=13&&(s=s.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:gs});e.createIndex("documentKeyIndex",ms),e.createIndex("collectionGroupIndex",ys)}(t))).next((()=>this.ni(t,r))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.si(t,r)))),n<15&&i>=15&&(s=s.next((()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:xs}).createIndex("sequenceNumberIndex",Is,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:Es}).createIndex("documentKeyIndex",Ts,{unique:!1})}(t)))),s}Xs(t){let e=0;return t.store("remoteDocuments").X(((t,n)=>{e+=Iu(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.j().next((e=>Wr.forEach(e,(e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",i).next((n=>Wr.forEach(n,(n=>{ar(n.userId===e.userId);const i=Pl(this.serializer,n);return xu(t,e.userId,i).next((()=>{}))}))))}))))}Zs(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const i=[];return n.X(((n,r)=>{const s=new Ar(n),o=function(t){return[0,as(t)]}(s);i.push(e.get(o).next((n=>n?Wr.resolve():(n=>e.put({targetId:0,path:as(n),sequenceNumber:t.highestListenSequenceNumber}))(s))))})).next((()=>Wr.waitFor(i)))}))}ti(t,e){t.createObjectStore("collectionParents",{keyPath:_s});const n=e.store("collectionParents"),i=new du,r=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:as(i)})}};return e.store("remoteDocuments").X({Y:!0},((t,e)=>{const n=new Ar(t);return r(n.popLast())})).next((()=>e.store("documentMutations").X({Y:!0},(([t,e,n],i)=>{const s=us(e);return r(s.popLast())}))))}ei(t){const e=t.store("targets");return e.X(((t,n)=>{const i=Ml(n),r=Nl(this.serializer,i);return e.put(r)}))}ni(t,e){const n=e.store("remoteDocuments"),i=[];return n.X(((t,n)=>{const r=e.store("remoteDocumentsV14"),s=(o=n,o.document?new Or(Ar.fromString(o.document.name).popFirst(5)):o.noDocument?Or.fromSegments(o.noDocument.path):o.unknownDocument?Or.fromSegments(o.unknownDocument.path):or()).path.toArray();var o;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(r.put(a))})).next((()=>Wr.waitFor(i)))}si(t,e){const n=e.store("mutations"),i=qu(this.serializer),r=new oh(ch.zs,this.serializer.fe);return n.j().next((t=>{const n=new Map;return t.forEach((t=>{var e;let i=null!==(e=n.get(t.userId))&&void 0!==e?e:La();Pl(this.serializer,t).keys().forEach((t=>i=i.add(t))),n.set(t.userId,i)})),Wr.forEach(n,((t,n)=>{const s=new Ji(n),o=ql.de(this.serializer,s),a=r.getIndexManager(s),c=Eu.de(s,this.serializer,a,r.referenceDelegate);return new Ju(i,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Ms(e,is.ct),t).next()}))}))}}function uh(t){t.createObjectStore("targetDocuments",{keyPath:bs}).createIndex("documentTargetsIndex",ws,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vs,{unique:!0}),t.createObjectStore("targetGlobal")}const hh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dh{constructor(t,e,n,i,r,s,o,a,c,l,u=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.ii=r,this.window=s,this.document=o,this.ri=c,this.oi=l,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=t=>Promise.resolve(),!dh.D())throw new hr(ur.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uu(this,i),this.di=e+"main",this.serializer=new kl(a),this.wi=new Gr(this.di,this.ui,new lh(this.serializer)),this.Bs=new Du(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qu(this.serializer),this.qs=new Bl,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new hr(ur.FAILED_PRECONDITION,hh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Bs.getHighestSequenceNumber(t)))})).then((t=>{this.Os=new is(t,this.ri)})).then((()=>{this.Fs=!0})).catch((t=>(this.wi&&this.wi.close(),Promise.reject(t))))}Ii(t){return this.fi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.wi.B((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>ph(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(t).next((t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(t))).next((e=>this.isPrimary&&!e?this.Ai(t).next((()=>!1)):!!e&&this.vi(t).next((()=>!0)))))).catch((t=>{if(Qr(t))return nr("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return nr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.ii.enqueueRetryable((()=>this.fi(t))),this.isPrimary=t}))}Ti(t){return fh(t).get("owner").next((t=>Wr.resolve(this.Ri(t))))}Pi(t){return ph(t).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=Ns(t,"clientMetadata");return e.j().next((t=>{const n=this.Si(t,18e5),i=t.filter((t=>-1===n.indexOf(t)));return Wr.forEach(i,(t=>e.delete(t.clientId))).next((()=>i))}))})).catch((()=>[]));if(this._i)for(const e of t)this._i.removeItem(this.Di(e.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(t){return!!t&&t.ownerId===this.clientId}Ei(t){return this.oi?Wr.resolve(!0):fh(t).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)){if(this.Ri(e)&&this.networkEnabled)return!0;if(!this.Ri(e)){if(!e.allowTabSynchronization)throw new hr(ur.FAILED_PRECONDITION,hh);return!1}}return!(!this.networkEnabled||!this.inForeground)||ph(t).j().next((t=>void 0===this.Si(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(e||n&&i)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&nr("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new Ms(t,is.ct);return this.Ai(e).next((()=>this.Pi(e)))})),this.wi.close(),this.Mi()}Si(t,e){return t.filter((t=>this.Vi(t.updateTimeMs,e)&&!this.Ci(t.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(t=>ph(t).j().next((t=>this.Si(t,18e5).map((t=>t.clientId))))))}get started(){return this.Fs}getMutationQueue(t,e){return Eu.de(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new pu(t,this.serializer.fe.databaseId)}getDocumentOverlayCache(t){return ql.de(this.serializer,t)}getBundleCache(){return this.qs}runTransaction(t,e,n){nr("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",r=15===(s=this.ui)?Ps:14===s?Os:13===s?Rs:12===s?Ds:11===s?As:void or();var s;let o;return this.wi.runTransaction(t,i,r,(i=>(o=new Ms(i,this.Os?this.Os.next():is.ct),"readwrite-primary"===e?this.Ti(o).next((t=>!!t||this.Ei(o))).next((e=>{if(!e)throw ir(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new hr(ur.FAILED_PRECONDITION,zr);return n(o)})).next((t=>this.vi(o).next((()=>t)))):this.Oi(o).next((()=>n(o)))))).then((t=>(o.raiseOnCommittedEvent(),t)))}Oi(t){return fh(t).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new hr(ur.FAILED_PRECONDITION,hh)}))}vi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fh(t).put("owner",e)}static D(){return Gr.D()}Ai(t){const e=fh(t);return e.get("owner").next((t=>this.Ri(t)?(nr("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Wr.resolve()))}Vi(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(ir(`Detected an update time that is in the future: ${t} > ${n}`),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,a.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(t){var e;try{const n=null!==(null===(e=this._i)||void 0===e?void 0:e.getItem(this.Di(t)));return nr("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return ir("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(t){ir("Failed to set zombie client id.",t)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(t){}}Di(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function fh(t){return Ns(t,"owner")}function ph(t){return Ns(t,"clientMetadata")}function gh(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class mh{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Fi=n,this.Bi=i}static Li(t,e){let n=La(),i=La();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new mh(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.qi=!1}initialize(t,e){this.Ui=t,this.indexManager=e,this.qi=!0}getDocumentsMatchingQuery(t,e,n,i){return this.Ki(t,e).next((r=>r||this.Gi(t,e,i,n))).next((n=>n||this.Qi(t,e)))}Ki(t,e){if(ua(e))return Wr.resolve(null);let n=ga(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=ya(e,null,"F"),n=ga(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=La(...i);return this.Ui.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.ji(e,i);return this.zi(e,s,r,n.readTime)?this.Ki(t,ya(e,null,"F")):this.Wi(t,s,e,n)}))))})))))}Gi(t,e,n,i){return ua(e)||i.isEqual(kr.min())?this.Qi(t,e):this.Ui.getDocuments(t,n).next((r=>{const s=this.ji(e,r);return this.zi(e,s,n,i)?this.Qi(t,e):(tr()<=o["in"].DEBUG&&nr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wa(e)),this.Wi(t,s,e,Vr(i,-1)))}))}ji(t,e){let n=new zs(Ia(t));return e.forEach(((e,i)=>{_a(t,i)&&(n=n.add(i))})),n}zi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Qi(t,e){return tr()<=o["in"].DEBUG&&nr("QueryEngine","Using full collection scan to execute query:",wa(e)),this.Ui.getDocumentsMatchingQuery(t,e,Br.min())}Wi(t,e,n,i){return this.Ui.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,e,n,i){this.persistence=t,this.Hi=e,this.serializer=i,this.Ji=new Us(Ir),this.Yi=new Ta((t=>ea(t)),na),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(n)}tr(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ju(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ji)))}}function bh(t,e,n,i){return new vh(t,e,n,i)}async function wh(t,e){const n=lr(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n.tr(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=La();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({er:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function _h(t,e){const n=lr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Wr.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);ar(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=La();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}function xh(t){const e=lr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Bs.getLastRemoteSnapshotVersion(t)))}function Ih(t,e){const n=lr(t),i=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const o=[];e.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(Ks.EMPTY_BYTE_STRING,kr.min()).withLastLimboFreeSnapshotVersion(kr.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,s)&&o.push(n.Bs.updateTargetData(t,l))}));let a=ka(),c=La();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(Eh(t,s,e.documentUpdates).next((t=>{a=t.nr,c=t.sr}))),!i.isEqual(kr.min())){const e=n.Bs.getLastRemoteSnapshotVersion(t).next((e=>n.Bs.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Wr.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ji=r,t)))}function Eh(t,e,n){let i=La(),r=La();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=ka();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(kr.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):nr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:i,sr:r}}))}function Th(t,e){const n=lr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Sh(t,e){const n=lr(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Bs.getTargetData(t,e).next((r=>r?(i=r,Wr.resolve(i)):n.Bs.allocateTargetId(t).next((r=>(i=new Sl(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Bs.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.Ji.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(t.targetId,t),n.Yi.set(e,t.targetId)),t}))}async function kh(t,e,n){const i=lr(t),r=i.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Qr(t))throw t;nr("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}function Ch(t,e,n){const i=lr(t);let r=kr.min(),s=La();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=lr(t),r=i.Yi.get(n);return void 0!==r?Wr.resolve(i.Ji.get(r)):i.Bs.getTargetData(e,n)}(i,t,ga(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.Hi.getDocumentsMatchingQuery(t,e,n?r:kr.min(),n?s:La()))).next((t=>(Rh(i,xa(e),t),{documents:t,ir:s})))))}function Ah(t,e){const n=lr(t),i=lr(n.Bs),r=n.Ji.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(t=>i.le(t,e).next((t=>t?t.target:null))))}function Dh(t,e){const n=lr(t),i=n.Xi.get(e)||kr.min();return n.persistence.runTransaction("Get new document changes","readonly",(t=>n.Zi.getAllFromCollectionGroup(t,e,Vr(i,-1),Number.MAX_SAFE_INTEGER))).then((t=>(Rh(n,e,t),t)))}function Rh(t,e,n){let i=t.Xi.get(e)||kr.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.Xi.set(e,i)}async function Oh(t,e,n,i){const r=lr(t);let s=La(),o=ka();for(const l of n){const t=e.rr(l.metadata.name);l.document&&(s=s.add(t));const n=e.ur(l);n.setReadTime(e.cr(l.metadata.readTime)),o=o.insert(t,n)}const a=r.Zi.newChangeBuffer({trackRemovals:!0}),c=await Sh(r,function(t){return ga(la(Ar.fromString(`__bundle__/docs/${t}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",(t=>Eh(t,a,o).next((e=>(a.apply(t),e))).next((e=>r.Bs.removeMatchingKeysForTargetId(t,c.targetId).next((()=>r.Bs.addMatchingKeys(t,s,c.targetId))).next((()=>r.localDocuments.getLocalViewOfDocuments(t,e.nr,e.sr))).next((()=>e.nr))))))}async function Ph(t,e,n=La()){const i=await Sh(t,ga(Ll(e.bundledQuery))),r=lr(t);return r.persistence.runTransaction("Save named query","readwrite",(t=>{const s=Jc(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.qs.saveNamedQuery(t,e);const o=i.withResumeToken(Ks.EMPTY_BYTE_STRING,s);return r.Ji=r.Ji.insert(o.targetId,o),r.Bs.updateTargetData(t,o).next((()=>r.Bs.removeMatchingKeysForTargetId(t,i.targetId))).next((()=>r.Bs.addMatchingKeys(t,n,i.targetId))).next((()=>r.qs.saveNamedQuery(t,e)))}))}function Mh(t,e){return`firestore_clients_${t}_${e}`}function Nh(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Lh(t,e){return`firestore_targets_${t}_${e}`}class Fh{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static ar(t,e,n){const i=JSON.parse(n);let r,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new hr(i.error.code,i.error.message))),s?new Fh(t,e,i.state,r):(ir("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Vh{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static ar(t,e){const n=JSON.parse(e);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new hr(n.error.code,n.error.message))),r?new Vh(t,n.state,i):(ir("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}hr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Uh{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static ar(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=Va();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=os(n.activeTargetIds[s]),r=r.add(n.activeTargetIds[s]);return i?new Uh(t,r):(ir("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Bh{constructor(t,e){this.clientId=t,this.onlineState=e}static ar(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Bh(e.clientId,e.onlineState):(ir("SharedClientState",`Failed to parse online state: ${t}`),null)}}class jh{constructor(){this.activeTargetIds=Va()}lr(t){this.activeTargetIds=this.activeTargetIds.add(t)}dr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}hr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class zh{constructor(t,e,n,i,r){this.window=t,this.ii=e,this.persistenceKey=n,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Us(Ir),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.pr=Mh(this.persistenceKey,this.wr),this.Ir=function(t){return`firestore_sequence_number_${t}`}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.gr=this.gr.insert(this.wr,new jh),this.Tr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vr=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Rr=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.$i();for(const n of t){if(n===this.wr)continue;const t=this.getItem(Mh(this.persistenceKey,n));if(t){const e=Uh.ar(n,t);e&&(this.gr=this.gr.insert(e.clientId,e))}}this.Pr();const e=this.storage.getItem(this.vr);if(e){const t=this.br(e);t&&this.Vr(t)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ir,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(t){let e=!1;return this.gr.forEach(((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.Dr(t,"pending")}updateMutationState(t,e,n){this.Dr(t,e,n),this.Cr(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(Lh(this.persistenceKey,t));if(n){const i=Vh.ar(t,n);i&&(e=i.state)}}return this.Nr.lr(t),this.Pr(),e}removeLocalQueryTarget(t){this.Nr.dr(t),this.Pr()}isLocalQueryTarget(t){return this.Nr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Lh(this.persistenceKey,t))}updateQueryState(t,e,n){this.kr(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.Cr(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.Mr(t)}notifyBundleLoaded(t){this.$r(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return nr("SharedClientState","READ",t,e),e}setItem(t,e){nr("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){nr("SharedClientState","REMOVE",t),this.storage.removeItem(t)}mr(t){const e=t;if(e.storageArea===this.storage){if(nr("SharedClientState","EVENT",e.key,e.newValue),e.key===this.pr)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.Tr.test(e.key)){if(null==e.newValue){const t=this.Or(e.key);return this.Fr(t,null)}{const t=this.Br(e.key,e.newValue);if(t)return this.Fr(t.clientId,t)}}else if(this.Er.test(e.key)){if(null!==e.newValue){const t=this.Lr(e.key,e.newValue);if(t)return this.qr(t)}}else if(this.Ar.test(e.key)){if(null!==e.newValue){const t=this.Ur(e.key,e.newValue);if(t)return this.Kr(t)}}else if(e.key===this.vr){if(null!==e.newValue){const t=this.br(e.newValue);if(t)return this.Vr(t)}}else if(e.key===this.Ir){const t=function(t){let e=is.ct;if(null!=t)try{const n=JSON.parse(t);ar("number"==typeof n),e=n}catch(t){ir("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==is.ct&&this.sequenceNumberHandler(t)}else if(e.key===this.Rr){const t=this.Gr(e.newValue);await Promise.all(t.map((t=>this.syncEngine.Qr(t))))}}else this.yr.push(e)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(t,e,n){const i=new Fh(this.currentUser,t,e,n),r=Nh(this.persistenceKey,this.currentUser,t);this.setItem(r,i.hr())}Cr(t){const e=Nh(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Mr(t){const e={clientId:this.wr,onlineState:t};this.storage.setItem(this.vr,JSON.stringify(e))}kr(t,e,n){const i=Lh(this.persistenceKey,t),r=new Vh(t,e,n);this.setItem(i,r.hr())}$r(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Rr,e)}Or(t){const e=this.Tr.exec(t);return e?e[1]:null}Br(t,e){const n=this.Or(t);return Uh.ar(n,e)}Lr(t,e){const n=this.Er.exec(t),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return Fh.ar(new Ji(r),i,e)}Ur(t,e){const n=this.Ar.exec(t),i=Number(n[1]);return Vh.ar(i,e)}br(t){return Bh.ar(t)}Gr(t){return JSON.parse(t)}async qr(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.jr(t.batchId,t.state,t.error);nr("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}Kr(t){return this.syncEngine.zr(t.targetId,t.state,t.error)}Fr(t,e){const n=e?this.gr.insert(t,e):this.gr.remove(t),i=this.Sr(this.gr),r=this.Sr(n),s=[],o=[];return r.forEach((t=>{i.has(t)||s.push(t)})),i.forEach((t=>{r.has(t)||o.push(t)})),this.syncEngine.Wr(s,o).then((()=>{this.gr=n}))}Vr(t){this.gr.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Sr(t){let e=Va();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class qh{constructor(){this.Hr=new jh,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Hr.lr(t),this.Jr[t]||"not-current"}updateQueryState(t,e,n){this.Jr[t]=e}removeLocalQueryTarget(t){this.Hr.dr(t)}isLocalQueryTarget(t){return this.Hr.activeTargetIds.has(t)}clearQueryState(t){delete this.Jr[t]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(t){return this.Hr.activeTargetIds.has(t)}start(){return this.Hr=new jh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{Yr(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(t){this.so.push(t)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){nr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.so)t(0)}no(){nr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.so)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function Gh(){return null===Hh?Hh=268435456+Math.round(2147483648*Math.random()):Hh++,"0x"+Hh.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Kh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t){this.ro=t.ro,this.oo=t.oo}uo(t){this.co=t}ao(t){this.ho=t}onMessage(t){this.lo=t}close(){this.oo()}send(t){this.ro(t)}fo(){this.co()}wo(t){this.ho(t)}_o(t){this.lo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="WebChannelConnection";class Jh extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.mo=e+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(t,e,n,i,r){const s=Gh(),o=this.To(t,e);nr("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={};return this.Eo(a,i,r),this.Ao(t,o,a,n).then((e=>(nr("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw rr("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.Io(t,e,n,i,r)}Eo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Xi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}To(t,e){const n=Kh[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ao(t,e,n,i){const r=Gh();return new Promise(((s,o)=>{const a=new Gi;a.setWithCredentials(!0),a.listenOnce(zi.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ji.NO_ERROR:const e=a.getResponseJson();nr(Qh,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case ji.TIMEOUT:nr(Qh,`RPC '${t}' ${r} timed out`),o(new hr(ur.DEADLINE_EXCEEDED,"Request time out"));break;case ji.HTTP_ERROR:const n=a.getStatus();if(nr(Qh,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(ur).indexOf(e)>=0?e:ur.UNKNOWN}(e.status);o(new hr(t,e.message))}else o(new hr(ur.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new hr(ur.UNAVAILABLE,"Connection failed."));break;default:or()}}finally{nr(Qh,`RPC '${t}' ${r} completed.`)}}));const c=JSON.stringify(i);nr(Qh,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",c,n,15)}))}Ro(t,e,n){const i=Gh(),r=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Ui(),o=Bi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Wi({})),this.Eo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=r.join("");nr(Qh,`Creating RPC '${t}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Yh({ro:e=>{d?nr(Qh,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(nr(Qh,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),nr(Qh,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},oo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,Hi.EventType.OPEN,(()=>{d||nr(Qh,`RPC '${t}' stream ${i} transport opened.`)})),p(u,Hi.EventType.CLOSE,(()=>{d||(d=!0,nr(Qh,`RPC '${t}' stream ${i} transport closed`),f.wo())})),p(u,Hi.EventType.ERROR,(e=>{d||(d=!0,rr(Qh,`RPC '${t}' stream ${i} transport errored:`,e),f.wo(new hr(ur.UNAVAILABLE,"The operation could not be completed")))})),p(u,Hi.EventType.MESSAGE,(e=>{var n;if(!d){const r=e.data[0];ar(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){nr(Qh,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=xc[t];if(void 0!==e)return Tc(e)}(e),r=o.message;void 0===n&&(n=ur.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),d=!0,f.wo(new hr(n,r)),u.close()}else nr(Qh,`RPC '${t}' stream ${i} received:`,r),f._o(r)}})),p(o,qi.STAT_EVENT,(e=>{e.stat===$i.PROXY?nr(Qh,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===$i.NOPROXY&&nr(Qh,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(){return"undefined"!=typeof window?window:null}function Zh(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return new Hc(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,e,n=1e3,i=1.5,r=6e4){this.ii=t,this.timerId=e,this.Po=n,this.bo=i,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(t){this.cancel();const e=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,e-n);i>0&&nr("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(()=>(this.Co=Date.now(),t()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t,e,n,i,r,s,o,a){this.ii=t,this.$o=n,this.Oo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ed(t,e)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(t){this.Ho(),this.stream.send(t)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(t,e){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():e&&e.code===ur.RESOURCE_EXHAUSTED?(ir(e.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):e&&e.code===ur.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.ao(e)}Yo(){}auth(){this.state=1;const t=this.Xo(this.Fo),e=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Fo===e&&this.Zo(t,n)}),(e=>{t((()=>{const t=new hr(ur.UNKNOWN,"Fetching auth token failed: "+e.message);return this.tu(t)}))}))}Zo(t,e){const n=this.Xo(this.Fo);this.stream=this.eu(t,e),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((t=>{n((()=>this.tu(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(t){return nr("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Xo(t){return e=>{this.ii.enqueueAndForget((()=>this.Fo===t?e():(nr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class id extends nd{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}eu(t,e){return this.connection.Ro("Listen",t,e)}onMessage(t){this.qo.reset();const e=ll(this.serializer,t),n=function(t){if(!("targetChange"in t))return kr.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?kr.min():e.readTime?Jc(e.readTime):kr.min()}(t);return this.listener.nu(e,n)}su(t){const e={};e.database=rl(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=ia(i)?{documents:fl(t,i)}:{query:pl(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Yc(t,e.resumeToken);const i=Gc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(kr.min())>0){n.readTime=Kc(t,e.snapshotVersion.toTimestamp());const i=Gc(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=ml(this.serializer,t);n&&(e.labels=n),this.Wo(e)}iu(t){const e={};e.database=rl(this.serializer),e.removeTarget=t,this.Wo(e)}}class rd extends nd{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(t,e){return this.connection.Ro("Write",t,e)}onMessage(t){if(ar(!!t.streamToken),this.lastStreamToken=t.streamToken,this.ru){this.qo.reset();const e=dl(t.writeResults,t.commitTime),n=Jc(t.commitTime);return this.listener.cu(n,e)}return ar(!t.writeResults||0===t.writeResults.length),this.ru=!0,this.listener.au()}hu(){const t={};t.database=rl(this.serializer),this.Wo(t)}uu(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>ul(this.serializer,t)))};this.Wo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new hr(ur.FAILED_PRECONDITION,"The client has already been terminated.")}Io(t,e,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.Io(t,e,n,i,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new hr(ur.UNKNOWN,t.toString())}))}vo(t,e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.vo(t,e,n,r,s,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new hr(ur.UNKNOWN,t.toString())}))}terminate(){this.lu=!0}}class od{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(t){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.yu("Offline")))}set(t){this.Tu(),this.wu=0,"Online"===t&&(this.mu=!1),this.yu(t)}yu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}pu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ir(e),this.mu=!1):nr("OnlineStateTracker",e)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr((t=>{n.enqueueAndForget((async()=>{md(this)&&(nr("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=lr(t);e.vu.add(4),await ld(e),e.bu.set("Unknown"),e.vu.delete(4),await cd(e)}(this))}))})),this.bu=new od(n,i)}}async function cd(t){if(md(t))for(const e of t.Ru)await e(!0)}async function ld(t){for(const e of t.Ru)await e(!1)}function ud(t,e){const n=lr(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),gd(n)?pd(n):Md(n).Ko()&&dd(n,e))}function hd(t,e){const n=lr(t),i=Md(n);n.Au.delete(e),i.Ko()&&fd(n,e),0===n.Au.size&&(i.Ko()?i.jo():md(n)&&n.bu.set("Unknown"))}function dd(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kr.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Md(t).su(e)}function fd(t,e){t.Vu.qt(e),Md(t).iu(e)}function pd(t){t.Vu=new Bc({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Md(t).start(),t.bu.gu()}function gd(t){return md(t)&&!Md(t).Uo()&&t.Au.size>0}function md(t){return 0===lr(t).vu.size}function yd(t){t.Vu=void 0}async function vd(t){t.Au.forEach(((e,n)=>{dd(t,e)}))}async function bd(t,e){yd(t),gd(t)?(t.bu.Iu(e),pd(t)):t.bu.set("Unknown")}async function wd(t,e,n){if(t.bu.set("Online"),e instanceof Vc&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.Au.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.Au.delete(i),t.Vu.removeTarget(i))}(t,e)}catch(n){nr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await _d(t,n)}else if(e instanceof Lc?t.Vu.Ht(e):e instanceof Fc?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(kr.min()))try{const e=await xh(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Vu.ce(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.Au.get(i);r&&t.Au.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.Au.get(e);if(!i)return;t.Au.set(e,i.withResumeToken(Ks.EMPTY_BYTE_STRING,i.snapshotVersion)),fd(t,e);const r=new Sl(i.target,e,n,i.sequenceNumber);dd(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){nr("RemoteStore","Failed to raise snapshot:",e),await _d(t,e)}}async function _d(t,e,n){if(!Qr(e))throw e;t.vu.add(1),await ld(t),t.bu.set("Offline"),n||(n=()=>xh(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{nr("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await cd(t)}))}function xd(t,e){return e().catch((n=>_d(t,n,e)))}async function Id(t){const e=lr(t),n=Nd(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Ed(e);)try{const t=await Th(e.localStore,i);if(null===t){0===e.Eu.length&&n.jo();break}i=t.batchId,Td(e,t)}catch(t){await _d(e,t)}Sd(e)&&kd(e)}function Ed(t){return md(t)&&t.Eu.length<10}function Td(t,e){t.Eu.push(e);const n=Nd(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Sd(t){return md(t)&&!Nd(t).Uo()&&t.Eu.length>0}function kd(t){Nd(t).start()}async function Cd(t){Nd(t).hu()}async function Ad(t){const e=Nd(t);for(const n of t.Eu)e.uu(n.mutations)}async function Dd(t,e,n){const i=t.Eu.shift(),r=bc.from(i,e,n);await xd(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Id(t)}async function Rd(t,e){e&&Nd(t).ou&&await async function(t,e){if(n=e.code,Ec(n)&&n!==ur.ABORTED){const n=t.Eu.shift();Nd(t).Qo(),await xd(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Id(t)}var n}(t,e),Sd(t)&&kd(t)}async function Od(t,e){const n=lr(t);n.asyncQueue.verifyOperationInProgress(),nr("RemoteStore","RemoteStore received new credentials");const i=md(n);n.vu.add(3),await ld(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await cd(n)}async function Pd(t,e){const n=lr(t);e?(n.vu.delete(2),await cd(n)):e||(n.vu.add(2),await ld(n),n.bu.set("Unknown"))}function Md(t){return t.Su||(t.Su=function(t,e,n){const i=lr(t);return i.fu(),new id(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t.datastore,t.asyncQueue,{uo:vd.bind(null,t),ao:bd.bind(null,t),nu:wd.bind(null,t)}),t.Ru.push((async e=>{e?(t.Su.Qo(),gd(t)?pd(t):t.bu.set("Unknown")):(await t.Su.stop(),yd(t))}))),t.Su}function Nd(t){return t.Du||(t.Du=function(t,e,n){const i=lr(t);return i.fu(),new rd(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{uo:Cd.bind(null,t),ao:Rd.bind(null,t),au:Ad.bind(null,t),cu:Dd.bind(null,t)}),t.Ru.push((async e=>{e?(t.Du.Qo(),await Id(t)):(await t.Du.stop(),t.Eu.length>0&&(nr("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))}))),t.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ld{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new Ld(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hr(ur.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fd(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Qr(t))return new hr(ur.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Or.comparator(e.key,n.key):(t,e)=>Or.comparator(t.key,e.key),this.keyedMap=Aa(),this.sortedSet=new Us(this.comparator)}static emptySet(t){return new Vd(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Vd))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Vd;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.Cu=new Us(Or.comparator)}track(t){const e=t.doc.key,n=this.Cu.get(e);n?0!==t.type&&3===n.type?this.Cu=this.Cu.insert(e,t):3===t.type&&1!==n.type?this.Cu=this.Cu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Cu=this.Cu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Cu=this.Cu.remove(e):1===t.type&&2===n.type?this.Cu=this.Cu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Cu=this.Cu.insert(e,{type:2,doc:t.doc}):or():this.Cu=this.Cu.insert(e,t)}xu(){const t=[];return this.Cu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Bd{constructor(t,e,n,i,r,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Bd(t,e,Vd.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&va(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this.Nu=void 0,this.listeners=[]}}class zd{constructor(){this.queries=new Ta((t=>ba(t)),va),this.onlineState="Unknown",this.ku=new Set}}async function qd(t,e){const n=lr(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new jd),r)try{s.Nu=await n.onListen(i)}catch(t){const n=Fd(t,`Initialization of query '${wa(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&Gd(n)}async function $d(t,e){const n=lr(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function Wd(t,e){const n=lr(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.listeners)t.$u(r)&&(i=!0);e.Nu=r}}i&&Gd(n)}function Hd(t,e,n){const i=lr(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function Gd(t){t.ku.forEach((t=>{t.next()}))}class Kd{constructor(t,e,n){this.query=t,this.Ou=e,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Bd(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Fu?this.Lu(t)&&(this.Ou.next(t),e=!0):this.qu(t,this.onlineState)&&(this.Uu(t),e=!0),this.Bu=t,e}onError(t){this.Ou.error(t)}Mu(t){this.onlineState=t;let e=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,t)&&(this.Uu(this.Bu),e=!0),e}qu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Ku||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Lu(t){if(t.docChanges.length>0)return!0;const e=this.Bu&&this.Bu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Uu(t){t=Bd.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Fu=!0,this.Ou.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,e){this.Gu=t,this.byteLength=e}Qu(){return"metadata"in this.Gu}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(t){this.serializer=t}rr(t){return el(this.serializer,t)}ur(t){return t.metadata.exists?al(this.serializer,t.document,!1):Co.newNoDocument(this.rr(t.metadata.name),this.cr(t.metadata.readTime))}cr(t){return Jc(t)}}class Jd{constructor(t,e,n){this.ju=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Xd(t)}zu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Gu.namedQuery)this.queries.push(t.Gu.namedQuery);else if(t.Gu.documentMetadata){this.documents.push({metadata:t.Gu.documentMetadata}),t.Gu.documentMetadata.exists||++e;const n=Ar.fromString(t.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.Gu.document&&(this.documents[this.documents.length-1].document=t.Gu.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Wu(t){const e=new Map,n=new Qd(this.serializer);for(const i of t)if(i.metadata.queries){const t=n.rr(i.metadata.name);for(const n of i.metadata.queries){const i=(e.get(n)||La()).add(t);e.set(n,i)}}return e}async complete(){const t=await Oh(this.localStore,new Qd(this.serializer),this.documents,this.ju.id),e=this.Wu(this.documents);for(const n of this.queries)await Ph(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}}}function Xd(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t){this.key=t}}class tf{constructor(t){this.key=t}}class ef{constructor(t,e){this.query=t,this.Yu=e,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=La(),this.mutatedKeys=La(),this.tc=Ia(t),this.ec=new Vd(this.tc)}get nc(){return this.Yu}sc(t,e){const n=e?e.ic:new Ud,i=e?e.ec:this.ec;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),u=_a(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||c&&this.tc(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ec:s,ic:n,zi:o,mutatedKeys:r}}rc(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.ec;this.ec=t.ec,this.mutatedKeys=t.mutatedKeys;const r=t.ic.xu();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return or()}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||this.tc(t.doc,e.doc))),this.oc(n);const s=e?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==r.length||a?{snapshot:new Bd(this.query,t.ec,i,r,t.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ud,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(t){return!this.Yu.has(t)&&!!this.ec.has(t)&&!this.ec.get(t).hasLocalMutations}oc(t){t&&(t.addedDocuments.forEach((t=>this.Yu=this.Yu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Yu=this.Yu.delete(t))),this.current=t.current)}uc(){if(!this.current)return[];const t=this.Zu;this.Zu=La(),this.ec.forEach((t=>{this.ac(t.key)&&(this.Zu=this.Zu.add(t.key))}));const e=[];return t.forEach((t=>{this.Zu.has(t)||e.push(new tf(t))})),this.Zu.forEach((n=>{t.has(n)||e.push(new Zd(n))})),e}hc(t){this.Yu=t.ir,this.Zu=La();const e=this.sc(t.documents);return this.applyChanges(e,!0)}lc(){return Bd.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class nf{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class rf{constructor(t){this.key=t,this.fc=!1}}class sf{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Ta((t=>ba(t)),va),this._c=new Map,this.mc=new Set,this.gc=new Us(Or.comparator),this.yc=new Map,this.Ic=new th,this.Tc={},this.Ec=new Map,this.Ac=Au.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function of(t,e){const n=Nf(t);let i,r;const s=n.wc.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const t=await Sh(n.localStore,ga(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await af(n,e,i,"current"===s,t.resumeToken),n.isPrimaryClient&&ud(n.remoteStore,t)}return r}async function af(t,e,n,i,r){t.Rc=(e,n,i)=>async function(t,e,n,i){let r=e.view.sc(n);r.zi&&(r=await Ch(t.localStore,e.query,!1).then((({documents:t})=>e.view.sc(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s);return wf(t,e.targetId,o.cc),o.snapshot}(t,e,n,i);const s=await Ch(t.localStore,e,!0),o=new ef(e,s.ir),a=o.sc(s.documents),c=Nc.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),l=o.applyChanges(a,t.isPrimaryClient,c);wf(t,n,l.cc);const u=new nf(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),l.snapshot}async function cf(t,e){const n=lr(t),i=n.wc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter((t=>!va(t,e)))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await kh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),hd(n.remoteStore,i.targetId),vf(n,i.targetId)})).catch($r)):(vf(n,i.targetId),await kh(n.localStore,i.targetId,!0))}async function lf(t,e,n){const i=Lf(t);try{const t=await function(t,e){const n=lr(t),i=Sr.now(),r=e.reduce(((t,e)=>t.add(e.key)),La());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=ka(),c=La();return n.Zi.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=lc(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new dc(t.key,e,ko(e.value.mapValue),ic.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Da(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Tc[t.currentUser.toKey()];i||(i=new Us(Ir)),i=i.insert(e,n),t.Tc[t.currentUser.toKey()]=i}(i,t.batchId,n),await If(i,t.changes),await Id(i.remoteStore)}catch(t){const e=Fd(t,"Failed to persist write");n.reject(e)}}async function uf(t,e){const n=lr(t);try{const t=await Ih(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.yc.get(e);i&&(ar(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.fc=!0:t.modifiedDocuments.size>0?ar(i.fc):t.removedDocuments.size>0&&(ar(i.fc),i.fc=!1))})),await If(n,t,e)}catch(t){await $r(t)}}function hf(t,e,n){const i=lr(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.wc.forEach(((n,i)=>{const r=i.view.Mu(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=lr(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.listeners)r.Mu(e)&&(i=!0)})),i&&Gd(n)}(i.eventManager,e),t.length&&i.dc.nu(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function df(t,e,n){const i=lr(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.yc.get(e),s=r&&r.key;if(s){let t=new Us(Or.comparator);t=t.insert(s,Co.newNoDocument(s,kr.min()));const n=La().add(s),r=new Mc(kr.min(),new Map,new Us(Ir),t,n);await uf(i,r),i.gc=i.gc.remove(s),i.yc.delete(e),xf(i)}else await kh(i.localStore,e,!1).then((()=>vf(i,e,n))).catch($r)}async function ff(t,e){const n=lr(t),i=e.batch.batchId;try{const t=await _h(n.localStore,e);yf(n,i,null),mf(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await If(n,t)}catch(t){await $r(t)}}async function pf(t,e,n){const i=lr(t);try{const t=await function(t,e){const n=lr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(ar(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);yf(i,e,n),mf(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await If(i,t)}catch(n){await $r(n)}}async function gf(t,e){const n=lr(t);md(n.remoteStore)||nr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=lr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.mutationQueue.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const i=n.Ec.get(t)||[];i.push(e),n.Ec.set(t,i)}catch(t){const n=Fd(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}function mf(t,e){(t.Ec.get(e)||[]).forEach((t=>{t.resolve()})),t.Ec.delete(e)}function yf(t,e,n){const i=lr(t);let r=i.Tc[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function vf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach((e=>{t.Ic.containsKey(e)||bf(t,e)}))}function bf(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);null!==n&&(hd(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),xf(t))}function wf(t,e,n){for(const i of n)i instanceof Zd?(t.Ic.addReference(i.key,e),_f(t,i)):i instanceof tf?(nr("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||bf(t,i.key)):or()}function _f(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(nr("SyncEngine","New document in limbo: "+n),t.mc.add(i),xf(t))}function xf(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new Or(Ar.fromString(e)),i=t.Ac.next();t.yc.set(i,new rf(n)),t.gc=t.gc.insert(n,i),ud(t.remoteStore,new Sl(ga(la(n.path)),i,"TargetPurposeLimboResolution",is.ct))}}async function If(t,e,n){const i=lr(t),r=[],s=[],o=[];i.wc.isEmpty()||(i.wc.forEach(((t,a)=>{o.push(i.Rc(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=mh.Li(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.dc.nu(r),await async function(t,e){const n=lr(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Wr.forEach(e,(e=>Wr.forEach(e.Fi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Wr.forEach(e.Bi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Qr(t))throw t;nr("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.Ji.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.Ji=n.Ji.insert(t,r)}}}(i.localStore,s))}async function Ef(t,e){const n=lr(t);if(!n.currentUser.isEqual(e)){nr("SyncEngine","User change. New user:",e.toKey());const t=await wh(n.localStore,e);n.currentUser=e,function(t,e){t.Ec.forEach((t=>{t.forEach((t=>{t.reject(new hr(ur.CANCELLED,e))}))})),t.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await If(n,t.er)}}function Tf(t,e){const n=lr(t),i=n.yc.get(e);if(i&&i.fc)return La().add(i.key);{let t=La();const i=n._c.get(e);if(!i)return t;for(const e of i){const i=n.wc.get(e);t=t.unionWith(i.view.nc)}return t}}async function Sf(t,e){const n=lr(t),i=await Ch(n.localStore,e.query,!0),r=e.view.hc(i);return n.isPrimaryClient&&wf(n,e.targetId,r.cc),r}async function kf(t,e){const n=lr(t);return Dh(n.localStore,e).then((t=>If(n,t)))}async function Cf(t,e,n,i){const r=lr(t),s=await function(t,e){const n=lr(t),i=lr(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>i.Sn(t,e).next((e=>e?n.localDocuments.getDocuments(t,e):Wr.resolve(null)))))}(r.localStore,e);null!==s?("pending"===n?await Id(r.remoteStore):"acknowledged"===n||"rejected"===n?(yf(r,e,i||null),mf(r,e),function(t,e){lr(lr(t).mutationQueue).Cn(e)}(r.localStore,e)):or(),await If(r,s)):nr("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Af(t,e){const n=lr(t);if(Nf(n),Lf(n),!0===e&&!0!==n.vc){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await Df(n,t.toArray());n.vc=!0,await Pd(n.remoteStore,!0);for(const i of e)ud(n.remoteStore,i)}else if(!1===e&&!1!==n.vc){const t=[];let e=Promise.resolve();n._c.forEach(((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?t.push(r):e=e.then((()=>(vf(n,r),kh(n.localStore,r,!0)))),hd(n.remoteStore,r)})),await e,await Df(n,t),function(t){const e=lr(t);e.yc.forEach(((t,n)=>{hd(e.remoteStore,n)})),e.Ic.Ts(),e.yc=new Map,e.gc=new Us(Or.comparator)}(n),n.vc=!1,await Pd(n.remoteStore,!1)}}async function Df(t,e,n){const i=lr(t),r=[],s=[];for(const o of e){let t;const e=i._c.get(o);if(e&&0!==e.length){t=await Sh(i.localStore,ga(e[0]));for(const t of e){const e=i.wc.get(t),n=await Sf(i,e);n.snapshot&&s.push(n.snapshot)}}else{const e=await Ah(i.localStore,o);t=await Sh(i.localStore,e),await af(i,Rf(e),o,!1,t.resumeToken)}r.push(t)}return i.dc.nu(s),r}function Rf(t){return ca(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Of(t){const e=lr(t);return lr(lr(e.localStore).persistence).$i()}async function Pf(t,e,n,i){const r=lr(t);if(r.vc)return void nr("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const t=await Dh(r.localStore,xa(s[0])),i=Mc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Ks.EMPTY_BYTE_STRING);await If(r,t,i);break}case"rejected":await kh(r.localStore,e,!0),vf(r,e,i);break;default:or()}}async function Mf(t,e,n){const i=Nf(t);if(i.vc){for(const t of e){if(i._c.has(t)){nr("SyncEngine","Adding an already active target "+t);continue}const e=await Ah(i.localStore,t),n=await Sh(i.localStore,e);await af(i,Rf(e),n.targetId,!1,n.resumeToken),ud(i.remoteStore,n)}for(const t of n)i._c.has(t)&&await kh(i.localStore,t,!1).then((()=>{hd(i.remoteStore,t),vf(i,t)})).catch($r)}}function Nf(t){const e=lr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=df.bind(null,e),e.dc.nu=Wd.bind(null,e.eventManager),e.dc.Pc=Hd.bind(null,e.eventManager),e}function Lf(t){const e=lr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ff.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pf.bind(null,e),e}function Ff(t,e,n){const i=lr(t);(async function(t,e,n){try{const i=await e.getMetadata();if(await function(t,e){const n=lr(t),i=Jc(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n.qs.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(i)>=0))}(t.localStore,i))return await e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(Xd(i));const r=new Jd(i,t.localStore,e.serializer);let s=await e.bc();for(;s;){const t=await r.zu(s);t&&n._updateProgress(t),s=await e.bc()}const o=await r.complete();return await If(t,o.Ju,void 0),await function(t,e){const n=lr(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n.qs.saveBundleMetadata(t,e)))}(t.localStore,i),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(t){return rr("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,e,n).then((t=>{i.sharedClientState.notifyBundleLoaded(t)}))}class Vf{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=td(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return bh(this.persistence,new yh,t.initialUser,this.serializer)}createPersistence(t){return new oh(ch.zs,this.serializer)}createSharedClientState(t){return new qh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Uf extends Vf{constructor(t,e,n){super(),this.Vc=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Vc.initialize(this,t),await Lf(this.Vc.syncEngine),await Id(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(t){return bh(this.persistence,new yh,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new Lu(n,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const n=new ns(e,this.persistence);return new es(t.asyncQueue,n)}createPersistence(t){const e=gh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_u.withCacheSize(this.cacheSizeBytes):_u.DEFAULT;return new dh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Xh(),Zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new qh}}class Bf extends Uf{constructor(t,e){super(t,e,!1),this.Vc=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Vc.syncEngine;this.sharedClientState instanceof zh&&(this.sharedClientState.syncEngine={jr:Cf.bind(null,e),zr:Pf.bind(null,e),Wr:Mf.bind(null,e),$i:Of.bind(null,e),Qr:kf.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ii((async t=>{await Af(this.Vc.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start():t||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(t&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():t||this.indexBackfillerScheduler.stop())}))}createSharedClientState(t){const e=Xh();if(!zh.D(e))throw new hr(ur.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=gh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new zh(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class jf{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>hf(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ef.bind(null,this.syncEngine),await Pd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new zd}createDatastore(t){const e=td(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new Jh(i));var i;return function(t,e,n,i){return new sd(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>hf(this.syncEngine,t,0),s=Wh.D()?new Wh:new $h,new ad(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new sf(t,e,n,i,r,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=lr(t);nr("RemoteStore","RemoteStore shutting down."),e.vu.add(5),await ld(e),e.Pu.shutdown(),e.bu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Sc(this.observer.next,t)}error(t){this.observer.error?this.Sc(this.observer.error,t):ir("Uncaught Error in snapshot listener:",t.toString())}Dc(){this.muted=!0}Sc(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t,e){this.Cc=t,this.serializer=e,this.metadata=new dr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((t=>{t&&t.Qu()?this.metadata.resolve(t.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.Gu)}`))}),(t=>this.metadata.reject(t)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const t=await this.kc();if(null===t)return null;const e=this.xc.decode(t),n=Number(e);isNaN(n)&&this.Mc(`length string (${e}) is not valid number`);const i=await this.$c(n);return new Yd(JSON.parse(i),t.length+n)}Oc(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0;)if(await this.Fc())break;if(0===this.buffer.length)return null;const t=this.Oc();t<0&&this.Mc("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async $c(t){for(;this.buffer.length<t;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const e=this.xc.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}Mc(t){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${t}`)}async Fc(){const t=await this.Cc.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new hr(ur.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const e=await async function(t,e){const n=lr(t),i=rl(n.serializer)+"/documents",r={documents:e.map((t=>tl(n.serializer,t)))},s=await n.vo("BatchGetDocuments",i,r,e.length),o=new Map;s.forEach((t=>{const e=cl(n.serializer,t);o.set(e.key.toString(),e)}));const a=[];return e.forEach((t=>{const e=o.get(t.toString());ar(!!e),a.push(e)})),a}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new mc(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=Or.fromPath(e);this.mutations.push(new yc(n,this.precondition(n)))})),await async function(t,e){const n=lr(t),i=rl(n.serializer)+"/documents",r={writes:e.map((t=>ul(n.serializer,t)))};await n.Io("Commit",i,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw or();e=kr.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new hr(ur.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(kr.min())?ic.exists(!1):ic.updateTime(e):ic.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(kr.min()))throw new hr(ur.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ic.updateTime(e)}return ic.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t,e,n,i,r){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=i,this.deferred=r,this.Bc=n.maxAttempts,this.qo=new ed(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const t=new Wf(this.datastore),e=this.qc(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.Uc(t)}))))})).catch((t=>{this.Uc(t)}))}))}qc(t){try{const e=this.updateFunction(t);return!rs(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(t){this.Bc>0&&this.Kc(t)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(t)}Kc(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!Ec(e)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=Ji.UNAUTHENTICATED,this.clientId=xr.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{nr("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(nr("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hr(ur.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Fd(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Kf(t,e){t.asyncQueue.verifyOperationInProgress(),nr("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await wh(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Yf(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Jf(t);nr("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>Od(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Od(e.remoteStore,n))),t._onlineComponents=e}function Qf(t){return"FirebaseError"===t.name?t.code===ur.FAILED_PRECONDITION||t.code===ur.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function Jf(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){nr("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Qf(n))throw n;rr("Error using user provided cache. Falling back to memory cache: "+n),await Kf(t,new Vf)}}else nr("FirestoreClient","Using default OfflineComponentProvider"),await Kf(t,new Vf);return t._offlineComponents}async function Xf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(nr("FirestoreClient","Using user provided OnlineComponentProvider"),await Yf(t,t._uninitializedComponentsProvider._online)):(nr("FirestoreClient","Using default OnlineComponentProvider"),await Yf(t,new jf))),t._onlineComponents}function Zf(t){return Jf(t).then((t=>t.persistence))}function tp(t){return Jf(t).then((t=>t.localStore))}function ep(t){return Xf(t).then((t=>t.remoteStore))}function np(t){return Xf(t).then((t=>t.syncEngine))}function ip(t){return Xf(t).then((t=>t.datastore))}async function rp(t){const e=await Xf(t),n=e.eventManager;return n.onListen=of.bind(null,e.syncEngine),n.onUnlisten=cf.bind(null,e.syncEngine),n}function sp(t){return t.asyncQueue.enqueue((async()=>{const e=await Zf(t),n=await ep(t);return e.setNetworkEnabled(!0),function(t){const e=lr(t);return e.vu.delete(0),cd(e)}(n)}))}function op(t){return t.asyncQueue.enqueue((async()=>{const e=await Zf(t),n=await ep(t);return e.setNetworkEnabled(!1),async function(t){const e=lr(t);e.vu.add(0),await ld(e),e.bu.set("Offline")}(n)}))}function ap(t,e){const n=new dr;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await function(t,e){const n=lr(t);return n.persistence.runTransaction("read document","readonly",(t=>n.localDocuments.getDocument(t,e)))}(t,e);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new hr(ur.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const i=Fd(t,`Failed to get document '${e} from cache`);n.reject(i)}}(await tp(t),e,n))),n.promise}function cp(t,e,n={}){const i=new dr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new qf({next:s=>{e.enqueueAndForget((()=>$d(t,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new hr(ur.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new hr(ur.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new Kd(la(n.path),s,{includeMetadataChanges:!0,Ku:!0});return qd(t,o)}(await rp(t),t.asyncQueue,e,n,i))),i.promise}function lp(t,e){const n=new dr;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await Ch(t,e,!0),r=new ef(e,i.ir),s=r.sc(i.documents),o=r.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const i=Fd(t,`Failed to execute query '${e} against cache`);n.reject(i)}}(await tp(t),e,n))),n.promise}function up(t,e,n={}){const i=new dr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new qf({next:n=>{e.enqueueAndForget((()=>$d(t,o))),n.fromCache&&"server"===i.source?r.reject(new hr(ur.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new Kd(n,s,{includeMetadataChanges:!0,Ku:!0});return qd(t,o)}(await rp(t),t.asyncQueue,e,n,i))),i.promise}function hp(t,e){const n=new qf(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){lr(t).ku.add(e),e.next()}(await rp(t),n))),()=>{n.Dc(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){lr(t).ku.delete(e)}(await rp(t),n)))}}function dp(t,e,n,i){const r=function(t,e){let n;return n="string"==typeof t?Cc().encode(t):t,function(t,e){return new $f(t,e)}(function(t,e){if(t instanceof Uint8Array)return zf(t,e);if(t instanceof ArrayBuffer)return zf(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,td(e));t.asyncQueue.enqueueAndForget((async()=>{Ff(await np(t),r,i)}))}function fp(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=lr(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n.qs.getNamedQuery(t,e)))}(await tp(t),e)))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pp(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const gp=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e,n){if(!n)throw new hr(ur.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yp(t,e,n,i){if(!0===e&&!0===i)throw new hr(ur.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vp(t){if(!Or.isDocumentKey(t))throw new hr(ur.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bp(t){if(Or.isDocumentKey(t))throw new hr(ur.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":or()}function _p(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new hr(ur.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wp(t);throw new hr(ur.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xp(t,e){if(e<=0)throw new hr(ur.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new hr(ur.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hr(ur.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}yp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pp(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new hr(ur.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new hr(ur.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new hr(ur.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class Ep{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ip({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hr(ur.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new hr(ur.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ip(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new pr;switch(t.type){case"firstParty":return new vr(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new hr(ur.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=gp.get(t);e&&(nr("ComponentProvider","Removing Datastore"),gp.delete(t),e.terminate())}(this),Promise.resolve()}}function Tp(t,e,n,i={}){var r;const s=(t=_p(t,Ep))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&rr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=Ji.MOCK_USER;else{e=(0,a.Sg)(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new hr(ur.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ji(s)}t._authCredentials=new gr(new fr(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cp(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Sp(this.firestore,t,this._key)}}class kp{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new kp(this.firestore,t,this._query)}}class Cp extends kp{constructor(t,e,n){super(t,e,la(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Sp(this.firestore,null,new Or(t))}withConverter(t){return new Cp(this.firestore,t,this._path)}}function Ap(t,e,...n){if(t=(0,a.m9)(t),mp("collection","path",e),t instanceof Ep){const i=Ar.fromString(e,...n);return bp(i),new Cp(t,null,i)}{if(!(t instanceof Sp||t instanceof Cp))throw new hr(ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ar.fromString(e,...n));return bp(i),new Cp(t.firestore,null,i)}}function Dp(t,e){if(t=_p(t,Ep),mp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new hr(ur.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kp(t,null,function(t){return new aa(Ar.emptyPath(),t)}(e))}function Rp(t,e,...n){if(t=(0,a.m9)(t),1===arguments.length&&(e=xr.A()),mp("doc","path",e),t instanceof Ep){const i=Ar.fromString(e,...n);return vp(i),new Sp(t,null,new Or(i))}{if(!(t instanceof Sp||t instanceof Cp))throw new hr(ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ar.fromString(e,...n));return vp(i),new Sp(t.firestore,t instanceof Cp?t.converter:null,new Or(i))}}function Op(t,e){return t=(0,a.m9)(t),e=(0,a.m9)(e),(t instanceof Sp||t instanceof Cp)&&(e instanceof Sp||e instanceof Cp)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Pp(t,e){return t=(0,a.m9)(t),e=(0,a.m9)(e),t instanceof kp&&e instanceof kp&&t.firestore===e.firestore&&va(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Mp{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ed(this,"async_queue_retry"),this.Xc=()=>{const t=Zh();t&&nr("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const t=Zh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Zc(),this.ta(t)}enterRestrictedMode(t){if(!this.jc){this.jc=!0,this.Jc=t||!1;const e=Zh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Xc)}}enqueue(t){if(this.Zc(),this.jc)return new Promise((()=>{}));const e=new dr;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Qc.push(t),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(t){if(!Qr(t))throw t;nr("AsyncQueue","Operation failed with retryable error: "+t)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(t){const e=this.Gc.then((()=>(this.Hc=!0,t().catch((t=>{this.Wc=t,this.Hc=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);throw ir("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Hc=!1,t))))));return this.Gc=e,e}enqueueAfterDelay(t,e,n){this.Zc(),this.Yc.indexOf(t)>-1&&(e=0);const i=Ld.createAndSchedule(this,t,e,n,(t=>this.na(t)));return this.zc.push(i),i}Zc(){this.Wc&&or()}verifyOperationInProgress(){}async sa(){let t;do{t=this.Gc,await t}while(t!==this.Gc)}ia(t){for(const e of this.zc)if(e.timerId===t)return!0;return!1}ra(t){return this.sa().then((()=>{this.zc.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.zc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.sa()}))}oa(t){this.Yc.push(t)}na(t){const e=this.zc.indexOf(t);this.zc.splice(e,1)}}function Np(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"==typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,["next","error","complete"])}class Lp{constructor(){this._progressObserver={},this._taskCompletionResolver=new dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-1;class Vp extends Ep{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=new Mp,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bp(this),this._firestoreClient.terminate()}}function Up(t){return t._firestoreClient||Bp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Bp(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new no(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,pp(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Gf(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function jp(t,e){Qp(t=_p(t,Vp));const n=Up(t);if(n._uninitializedComponentsProvider)throw new hr(ur.FAILED_PRECONDITION,"SDK cache is already specified.");rr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new jf;return qp(n,r,new Uf(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function zp(t){Qp(t=_p(t,Vp));const e=Up(t);if(e._uninitializedComponentsProvider)throw new hr(ur.FAILED_PRECONDITION,"SDK cache is already specified.");rr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new jf;return qp(e,i,new Bf(i,n.cacheSizeBytes))}function qp(t,e,n){const i=new dr;return t.asyncQueue.enqueue((async()=>{try{await Kf(t,n),await Yf(t,e),i.resolve()}catch(t){const n=t;if(!Qf(n))throw n;rr("Error enabling indexeddb cache. Falling back to memory cache: "+n),i.reject(n)}})).then((()=>i.promise))}function $p(t){if(t._initialized&&!t._terminated)throw new hr(ur.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dr;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!Gr.D())return Promise.resolve();const e=t+"main";await Gr.delete(e)}(gh(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Wp(t){return function(t){const e=new dr;return t.asyncQueue.enqueueAndForget((async()=>gf(await np(t),e))),e.promise}(Up(t=_p(t,Vp)))}function Hp(t){return sp(Up(t=_p(t,Vp)))}function Gp(t){return op(Up(t=_p(t,Vp)))}function Kp(t,e){const n=Up(t=_p(t,Vp)),i=new Lp;return dp(n,t._databaseId,e,i),i}function Yp(t,e){return fp(Up(t=_p(t,Vp)),e).then((e=>e?new kp(t,null,e.query):null))}function Qp(t){if(t._initialized||t._terminated)throw new hr(ur.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jp{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Jp(Ks.fromBase64String(t))}catch(t){throw new hr(ur.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Jp(Ks.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new hr(ur.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Zp{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new hr(ur.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new hr(ur.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ir(this._lat,t._lat)||Ir(this._long,t._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=/^__.*__$/;class ng{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new dc(t,this.data,this.fieldMask,e,this.fieldTransforms):new hc(t,this.data,e,this.fieldTransforms)}}class ig{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new dc(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function rg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw or()}}class sg{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(t){return new sg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.aa({path:n,la:!1});return i.fa(t),i}da(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.aa({path:n,la:!1});return i.ua(),i}wa(t){return this.aa({path:void 0,la:!0})}_a(t){return Tg(t,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}ua(){if(this.path)for(let t=0;t<this.path.length;t++)this.fa(this.path.get(t))}fa(t){if(0===t.length)throw this._a("Document fields must not be empty");if(rg(this.ca)&&eg.test(t))throw this._a('Document fields cannot begin and end with "__"')}}class og{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||td(t)}ya(t,e,n,i=!1){return new sg({ca:t,methodName:e,ga:n,path:Rr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ag(t){const e=t._freezeSettings(),n=td(t._databaseId);return new og(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cg(t,e,n,i,r,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,r);_g("Data must be an object, but it was:",o,i);const a=bg(i,o);let c,l;if(s.merge)c=new Ws(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=xg(e,i,n);if(!o.contains(r))throw new hr(ur.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Sg(t,r)||t.push(r)}c=new Ws(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new ng(new So(a),c,l)}class lg extends Zp{_toFieldTransform(t){if(2!==t.ca)throw 1===t.ca?t._a(`${this._methodName}() can only appear at the top level of your update data`):t._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof lg}}function ug(t,e,n){return new sg({ca:3,ga:e.settings.ga,methodName:t._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hg extends Zp{_toFieldTransform(t){return new tc(t.path,new Ha)}isEqual(t){return t instanceof hg}}class dg extends Zp{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=ug(this,t,!0),n=this.pa.map((t=>vg(t,e))),i=new Ga(n);return new tc(t.path,i)}isEqual(t){return this===t}}class fg extends Zp{constructor(t,e){super(t),this.pa=e}_toFieldTransform(t){const e=ug(this,t,!0),n=this.pa.map((t=>vg(t,e))),i=new Ya(n);return new tc(t.path,i)}isEqual(t){return this===t}}class pg extends Zp{constructor(t,e){super(t),this.Ia=e}_toFieldTransform(t){const e=new Ja(t.serializer,ja(t.serializer,this.Ia));return new tc(t.path,e)}isEqual(t){return this===t}}function gg(t,e,n,i){const r=t.ya(1,e,n);_g("Data must be an object, but it was:",r,i);const s=[],o=So.empty();Fs(i,((t,i)=>{const c=Eg(e,t,n);i=(0,a.m9)(i);const l=r.da(c);if(i instanceof lg)s.push(c);else{const t=vg(i,l);null!=t&&(s.push(c),o.set(c,t))}}));const c=new Ws(s);return new ig(o,c,r.fieldTransforms)}function mg(t,e,n,i,r,s){const o=t.ya(1,e,n),c=[xg(e,i,n)],l=[r];if(s.length%2!=0)throw new hr(ur.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let a=0;a<s.length;a+=2)c.push(xg(e,s[a])),l.push(s[a+1]);const u=[],h=So.empty();for(let f=c.length-1;f>=0;--f)if(!Sg(u,c[f])){const t=c[f];let e=l[f];e=(0,a.m9)(e);const n=o.da(t);if(e instanceof lg)u.push(t);else{const i=vg(e,n);null!=i&&(u.push(t),h.set(t,i))}}const d=new Ws(u);return new ig(h,d,o.fieldTransforms)}function yg(t,e,n,i=!1){return vg(n,t.ya(i?4:3,e))}function vg(t,e){if(wg(t=(0,a.m9)(t)))return _g("Unsupported field value:",e,t),bg(t,e);if(t instanceof Zp)return function(t,e){if(!rg(e.ca))throw e._a(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e._a(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=vg(r,e.wa(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ja(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Sr.fromDate(t);return{timestampValue:Kc(e.serializer,n)}}if(t instanceof Sr){const n=new Sr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kc(e.serializer,n)}}if(t instanceof tg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Jp)return{bytesValue:Yc(e.serializer,t._byteString)};if(t instanceof Sp){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e._a(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Xc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e._a(`Unsupported field value: ${wp(t)}`)}(t,e)}function bg(t,e){const n={};return Vs(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,((t,i)=>{const r=vg(i,e.ha(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function wg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Sr||t instanceof tg||t instanceof Jp||t instanceof Sp||t instanceof Zp)}function _g(t,e,n){if(!wg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=wp(n);throw"an object"===i?e._a(t+" a custom object"):e._a(t+" "+i)}}function xg(t,e,n){if((e=(0,a.m9)(e))instanceof Xp)return e._internalPath;if("string"==typeof e)return Eg(t,e);throw Tg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Ig=new RegExp("[~\\*/\\[\\]]");function Eg(t,e,n){if(e.search(Ig)>=0)throw Tg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xp(...e.split("."))._internalPath}catch(i){throw Tg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tg(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new hr(ur.INVALID_ARGUMENT,a+t+c)}function Sg(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Sp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Cg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ag("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Cg extends kg{data(){return super.data()}}function Ag(t,e){return"string"==typeof e?Eg(t,e):e instanceof Xp?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new hr(ur.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class Og extends Rg{}function Pg(t,e,...n){let i=[];e instanceof Rg&&i.push(e),i=i.concat(n),function(t){const e=t.filter((t=>t instanceof Lg)).length,n=t.filter((t=>t instanceof Mg)).length;if(e>1||e>0&&n>0)throw new hr(ur.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i);for(const r of i)t=r._apply(t);return t}class Mg extends Og{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Mg(t,e,n)}_apply(t){const e=this._parse(t);return Jg(t._query,e),new kp(t.firestore,t.converter,ma(t._query,e))}_parse(t){const e=ag(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new hr(ur.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Qg(o,s);const e=[];for(const n of o)e.push(Yg(i,t,n));a={arrayValue:{values:e}}}else a=Yg(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Qg(o,s),a=yg(n,e,o,"in"===s||"not-in"===s);return No.create(r,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function Ng(t,e,n){const i=e,r=Ag("where",t);return Mg._create(r,i,n)}class Lg extends Rg{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Lg(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Lo.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)Jg(n,r),n=ma(n,r)}(t._query,e),new kp(t.firestore,t.converter,ma(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Fg extends Og{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Fg(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new hr(ur.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new hr(ur.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Oo(e,n);return function(t,e){if(null===ha(t)){const n=da(t);null!==n&&Xg(t,n,e.field)}}(t,i),i}(t._query,this._field,this._direction);return new kp(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new aa(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function Vg(t,e="asc"){const n=e,i=Ag("orderBy",t);return Fg._create(i,n)}class Ug extends Og{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new Ug(t,e,n)}_apply(t){return new kp(t.firestore,t.converter,ya(t._query,this._limit,this._limitType))}}function Bg(t){return xp("limit",t),Ug._create("limit",t,"F")}function jg(t){return xp("limitToLast",t),Ug._create("limitToLast",t,"L")}class zg extends Og{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new zg(t,e,n)}_apply(t){const e=Kg(t,this.type,this._docOrFields,this._inclusive);return new kp(t.firestore,t.converter,function(t,e){return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function qg(...t){return zg._create("startAt",t,!0)}function $g(...t){return zg._create("startAfter",t,!1)}class Wg extends Og{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new Wg(t,e,n)}_apply(t){const e=Kg(t,this.type,this._docOrFields,this._inclusive);return new kp(t.firestore,t.converter,function(t,e){return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Hg(...t){return Wg._create("endBefore",t,!1)}function Gg(...t){return Wg._create("endAt",t,!0)}function Kg(t,e,n,i){if(n[0]=(0,a.m9)(n[0]),n[0]instanceof kg)return function(t,e,n,i,r){if(!i)throw new hr(ur.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of pa(t))if(o.field.isKeyField())s.push(po(e,i.key));else{const t=i.data.field(o.field);if(Zs(t))throw new hr(ur.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new hr(ur.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new Ao(s,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=ag(t.firestore);return function(t,e,n,i,r,s){const o=t.explicitOrderBy;if(r.length>o.length)throw new hr(ur.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<r.length;c++){const s=r[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new hr(ur.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof s}`);if(!fa(t)&&-1!==s.indexOf("/"))throw new hr(ur.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(Ar.fromString(s));if(!Or.isDocumentKey(n))throw new hr(ur.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new Or(n);a.push(po(e,r))}else{const t=yg(n,i,s);a.push(t)}}return new Ao(a,s)}(t._query,t.firestore._databaseId,r,e,n,i)}}function Yg(t,e,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new hr(ur.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fa(e)&&-1!==n.indexOf("/"))throw new hr(ur.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ar.fromString(n));if(!Or.isDocumentKey(i))throw new hr(ur.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return po(t,new Or(i))}if(n instanceof Sp)return po(t,n._key);throw new hr(ur.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wp(n)}.`)}function Qg(t,e){if(!Array.isArray(t)||0===t.length)throw new hr(ur.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jg(t,e){if(e.isInequality()){const n=da(t),i=e.field;if(null!==n&&!n.isEqual(i))throw new hr(ur.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const r=ha(t);null!==r&&Xg(t,i,r)}const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new hr(ur.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new hr(ur.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Xg(t,e,n){if(!n.isEqual(e))throw new hr(ur.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Zg{convertValue(t,e="none"){switch(oo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Js(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Xs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw or()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Fs(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new tg(Js(t.latitude),Js(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=to(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(eo(t));default:return null}}convertTimestamp(t){const e=Qs(t);return new Sr(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Ar.fromString(t);ar(Tl(n));const i=new io(n.get(1),n.get(3)),r=new Or(n.popFirst(5));return i.isEqual(e)||ir(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class em extends Zg{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jp(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sp(this.firestore,null,e)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class im extends kg{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Ag("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class rm extends im{data(t={}){return super.data(t)}}class sm{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new nm(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new rm(this._firestore,this._userDataWriter,n.key,n,new nm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hr(ur.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new rm(t._firestore,t._userDataWriter,n.doc.key,n.doc,new nm(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new rm(t._firestore,t._userDataWriter,e.doc.key,e.doc,new nm(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:om(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function om(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return or()}}function am(t,e){return t instanceof im&&e instanceof im?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof sm&&e instanceof sm&&t._firestore===e._firestore&&Pp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){t=_p(t,Sp);const e=_p(t.firestore,Vp);return cp(Up(e),t._key).then((n=>xm(e,t,n)))}class lm extends Zg{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jp(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sp(this.firestore,null,e)}}function um(t){t=_p(t,Sp);const e=_p(t.firestore,Vp),n=Up(e),i=new lm(e);return ap(n,t._key).then((n=>new im(e,i,t._key,n,new nm(null!==n&&n.hasLocalMutations,!0),t.converter)))}function hm(t){t=_p(t,Sp);const e=_p(t.firestore,Vp);return cp(Up(e),t._key,{source:"server"}).then((n=>xm(e,t,n)))}function dm(t){t=_p(t,kp);const e=_p(t.firestore,Vp),n=Up(e),i=new lm(e);return Dg(t._query),up(n,t._query).then((n=>new sm(e,i,t,n)))}function fm(t){t=_p(t,kp);const e=_p(t.firestore,Vp),n=Up(e),i=new lm(e);return lp(n,t._query).then((n=>new sm(e,i,t,n)))}function pm(t){t=_p(t,kp);const e=_p(t.firestore,Vp),n=Up(e),i=new lm(e);return up(n,t._query,{source:"server"}).then((n=>new sm(e,i,t,n)))}function gm(t,e,n){t=_p(t,Sp);const i=_p(t.firestore,Vp),r=tm(t.converter,e,n);return _m(i,[cg(ag(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,ic.none())])}function mm(t,e,n,...i){t=_p(t,Sp);const r=_p(t.firestore,Vp),s=ag(r);let o;return o="string"==typeof(e=(0,a.m9)(e))||e instanceof Xp?mg(s,"updateDoc",t._key,e,n,i):gg(s,"updateDoc",t._key,e),_m(r,[o.toMutation(t._key,ic.exists(!0))])}function ym(t){return _m(_p(t.firestore,Vp),[new mc(t._key,ic.none())])}function vm(t,e){const n=_p(t.firestore,Vp),i=Rp(t),r=tm(t.converter,e);return _m(n,[cg(ag(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,ic.exists(!1))]).then((()=>i))}function bm(t,...e){var n,i,r;t=(0,a.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||Np(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Np(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[o+2]=null===(r=t.complete)||void 0===r?void 0:r.bind(t)}let l,u,h;if(t instanceof Sp)u=_p(t.firestore,Vp),h=la(t._key.path),l={next:n=>{e[o]&&e[o](xm(u,t,n))},error:e[o+1],complete:e[o+2]};else{const n=_p(t,kp);u=_p(n.firestore,Vp),h=n._query;const i=new lm(u);l={next:t=>{e[o]&&e[o](new sm(u,i,n,t))},error:e[o+1],complete:e[o+2]},Dg(t._query)}return function(t,e,n,i){const r=new qf(i),s=new Kd(e,r,n);return t.asyncQueue.enqueueAndForget((async()=>qd(await rp(t),s))),()=>{r.Dc(),t.asyncQueue.enqueueAndForget((async()=>$d(await rp(t),s)))}}(Up(u),h,c,l)}function wm(t,e){return hp(Up(t=_p(t,Vp)),Np(e)?e:{next:e})}function _m(t,e){return function(t,e){const n=new dr;return t.asyncQueue.enqueueAndForget((async()=>lf(await np(t),e,n))),n.promise}(Up(t),e)}function xm(t,e,n){const i=n.docs.get(e._key),r=new lm(t);return new im(t,r,e._key,i,new nm(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Im={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ag(t)}set(t,e,n){this._verifyNotCommitted();const i=Tm(t,this._firestore),r=tm(i.converter,e,n),s=cg(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,ic.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const r=Tm(t,this._firestore);let s;return s="string"==typeof(e=(0,a.m9)(e))||e instanceof Xp?mg(this._dataReader,"WriteBatch.update",r._key,e,n,i):gg(this._dataReader,"WriteBatch.update",r._key,e),this._mutations.push(s.toMutation(r._key,ic.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Tm(t,this._firestore);return this._mutations=this._mutations.concat(new mc(e._key,ic.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new hr(ur.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tm(t,e){if((t=(0,a.m9)(t)).firestore!==e)throw new hr(ur.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=ag(t)}get(t){const e=Tm(t,this._firestore),n=new em(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return or();const i=t[0];if(i.isFoundDocument())return new kg(this._firestore,n,i.key,i,e.converter);if(i.isNoDocument())return new kg(this._firestore,n,e._key,null,e.converter);throw or()}))}set(t,e,n){const i=Tm(t,this._firestore),r=tm(i.converter,e,n),s=cg(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(t,e,n,...i){const r=Tm(t,this._firestore);let s;return s="string"==typeof(e=(0,a.m9)(e))||e instanceof Xp?mg(this._dataReader,"Transaction.update",r._key,e,n,i):gg(this._dataReader,"Transaction.update",r._key,e),this._transaction.update(r._key,s),this}delete(t){const e=Tm(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Tm(t,this._firestore),n=new lm(this._firestore);return super.get(t).then((t=>new im(this._firestore,n,e._key,t._document,new nm(!1,!1),e.converter)))}}function km(t,e,n){t=_p(t,Vp);const i=Object.assign(Object.assign({},Im),n);return function(t){if(t.maxAttempts<1)throw new hr(ur.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(t,e,n){const i=new dr;return t.asyncQueue.enqueueAndForget((async()=>{const r=await ip(t);new Hf(t.asyncQueue,r,n,e,i).run()})),i.promise}(Up(t),(n=>e(new Sm(t,n))),i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(){return new lg("deleteField")}function Am(){return new hg("serverTimestamp")}function Dm(...t){return new dg("arrayUnion",t)}function Rm(...t){return new fg("arrayRemove",t)}function Om(t){return new pg("increment",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,e=!0){!function(t){Xi=t}(r.SDK_VERSION),(0,r._registerComponent)(new s.wA("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new Vp(new mr(t.getProvider("auth-internal")),new wr(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new hr(ur.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),(0,r.registerVersion)(Qi,"3.12.0",t),(0,r.registerVersion)(Qi,"3.12.0","esm2017")}()},223:function(t,e,n){"use strict";n.d(e,{BH:function(){return w},G6:function(){return A},L:function(){return c},LL:function(){return M},Pz:function(){return b},Sg:function(){return _},UG:function(){return E},ZB:function(){return u},ZR:function(){return P},aH:function(){return v},b$:function(){return k},eu:function(){return R},hl:function(){return D},jU:function(){return T},m9:function(){return K},ne:function(){return $},pd:function(){return q},q4:function(){return y},r3:function(){return F},ru:function(){return S},tV:function(){return l},uI:function(){return I},vZ:function(){return U},w1:function(){return C},xO:function(){return j},xb:function(){return V},z$:function(){return x},zd:function(){return z}});n(2801),n(7658);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},r=function(t){const e=[];let n=0,i=0;while(n<t.length){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],c=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(1023&c))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,c=a?t[r+2]:0,l=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length,a=s?n[t.charAt(r)]:0;++r;const c=r<t.length,l=c?n[t.charAt(r)]:64;++r;const u=r<t.length,h=u?n[t.charAt(r)]:64;if(++r,null==e||null==a||null==l||null==h)throw new o;const d=e<<2|a>>4;if(i.push(d),64!==l){const t=a<<4&240|l>>2;if(i.push(t),64!==h){const t=l<<6&192|h;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(t){const e=i(t);return s.encodeByteArray(e,!0)},c=function(t){return a(t).replace(/\./g,"")},l=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&h(n)&&(t[n]=u(t[n],e[n]));return t}function h(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f=()=>d().__FIREBASE_DEFAULTS__,p=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},g=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&l(t[1]);return e&&JSON.parse(e)},m=()=>{try{return f()||p()||g()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},y=t=>{var e,n;return null===(n=null===(e=m())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},v=()=>{var t;return null===(t=m())||void 0===t?void 0:t.config},b=t=>{var e;return null===(e=m())||void 0===e?void 0:e[`_${t}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[c(JSON.stringify(n)),c(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function I(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function E(){var t;const e=null===(t=m())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function T(){return"object"===typeof self&&self.self===self}function S(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function k(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function C(){const t=x();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A(){return!E()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function D(){try{return"object"===typeof indexedDB}catch(t){return!1}}function R(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const O="FirebaseError";class P extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=O,Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M.prototype.create)}}class M{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?N(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new P(i,o,n);return a}}function N(t,e){return t.replace(L,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}const L=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function V(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(B(n)&&B(s)){if(!U(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function B(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function j(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function z(t){const e={},n=t.replace(/^\?/,"").split("&");return n.forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function q(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t,e){const n=new W(t,e);return n.subscribe.bind(n)}class W{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=H(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=G),void 0===i.error&&(i.error=G),void 0===i.complete&&(i.complete=G);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function H(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}function G(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function K(t){return t&&t._delegate?t._delegate:t}},4870:function(t,e,n){"use strict";n.d(e,{Bj:function(){return s},Fl:function(){return Ht},IU:function(){return Dt},Jd:function(){return E},PG:function(){return St},SU:function(){return jt},Um:function(){return It},WL:function(){return qt},X$:function(){return C},X3:function(){return At},XI:function(){return Vt},Xl:function(){return Rt},dq:function(){return Lt},iH:function(){return Ft},j:function(){return S},lk:function(){return T},nZ:function(){return a},qj:function(){return xt},qq:function(){return w},yT:function(){return Ct}});n(7658);var i=n(7139);let r;class s{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=r,!t&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=r;try{return r=this,t()}finally{r=e}}else 0}on(){r=this}off(){r=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function o(t,e=r){e&&e.active&&e.effects.push(t)}function a(){return r}const c=t=>{const e=new Set(t);return e.w=0,e.n=0,e},l=t=>(t.w&g)>0,u=t=>(t.n&g)>0,h=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=g},d=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];l(r)&&!u(r)?r.delete(t):e[n++]=r,r.w&=~g,r.n&=~g}e.length=n}},f=new WeakMap;let p=0,g=1;const m=30;let y;const v=Symbol(""),b=Symbol("");class w{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,o(this,n)}run(){if(!this.active)return this.fn();let t=y,e=x;while(t){if(t===this)return;t=t.parent}try{return this.parent=y,y=this,x=!0,g=1<<++p,p<=m?h(this):_(this),this.fn()}finally{p<=m&&d(this),g=1<<--p,y=this.parent,x=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){y===this?this.deferStop=!0:this.active&&(_(this),this.onStop&&this.onStop(),this.active=!1)}}function _(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let x=!0;const I=[];function E(){I.push(x),x=!1}function T(){const t=I.pop();x=void 0===t||t}function S(t,e,n){if(x&&y){let e=f.get(t);e||f.set(t,e=new Map);let i=e.get(n);i||e.set(n,i=c());const r=void 0;k(i,r)}}function k(t,e){let n=!1;p<=m?u(t)||(t.n|=g,n=!l(t)):n=!t.has(y),n&&(t.add(y),y.deps.push(t))}function C(t,e,n,r,s,o){const a=f.get(t);if(!a)return;let l=[];if("clear"===e)l=[...a.values()];else if("length"===n&&(0,i.kJ)(t)){const t=Number(r);a.forEach(((e,n)=>{("length"===n||n>=t)&&l.push(e)}))}else switch(void 0!==n&&l.push(a.get(n)),e){case"add":(0,i.kJ)(t)?(0,i.S0)(n)&&l.push(a.get("length")):(l.push(a.get(v)),(0,i._N)(t)&&l.push(a.get(b)));break;case"delete":(0,i.kJ)(t)||(l.push(a.get(v)),(0,i._N)(t)&&l.push(a.get(b)));break;case"set":(0,i._N)(t)&&l.push(a.get(v));break}if(1===l.length)l[0]&&A(l[0]);else{const t=[];for(const e of l)e&&t.push(...e);A(c(t))}}function A(t,e){const n=(0,i.kJ)(t)?t:[...t];for(const i of n)i.computed&&D(i,e);for(const i of n)i.computed||D(i,e)}function D(t,e){(t!==y||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const R=(0,i.fY)("__proto__,__v_isRef,__isVue"),O=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(i.yk)),P=U(),M=U(!1,!0),N=U(!0),L=F();function F(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Dt(this);for(let e=0,r=this.length;e<r;e++)S(n,"get",e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(Dt)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){E();const n=Dt(this)[e].apply(this,t);return T(),n}})),t}function V(t){const e=Dt(this);return S(e,"has",t),e.hasOwnProperty(t)}function U(t=!1,e=!1){return function(n,r,s){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_isShallow"===r)return e;if("__v_raw"===r&&s===(t?e?bt:vt:e?yt:mt).get(n))return n;const o=(0,i.kJ)(n);if(!t){if(o&&(0,i.RI)(L,r))return Reflect.get(L,r,s);if("hasOwnProperty"===r)return V}const a=Reflect.get(n,r,s);return((0,i.yk)(r)?O.has(r):R(r))?a:(t||S(n,"get",r),e?a:Lt(a)?o&&(0,i.S0)(r)?a:a.value:(0,i.Kn)(a)?t?Et(a):xt(a):a)}}const B=z(),j=z(!0);function z(t=!1){return function(e,n,r,s){let o=e[n];if(kt(o)&&Lt(o)&&!Lt(r))return!1;if(!t&&(Ct(r)||kt(r)||(o=Dt(o),r=Dt(r)),!(0,i.kJ)(e)&&Lt(o)&&!Lt(r)))return o.value=r,!0;const a=(0,i.kJ)(e)&&(0,i.S0)(n)?Number(n)<e.length:(0,i.RI)(e,n),c=Reflect.set(e,n,r,s);return e===Dt(s)&&(a?(0,i.aU)(r,o)&&C(e,"set",n,r,o):C(e,"add",n,r)),c}}function q(t,e){const n=(0,i.RI)(t,e),r=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&C(t,"delete",e,void 0,r),s}function $(t,e){const n=Reflect.has(t,e);return(0,i.yk)(e)&&O.has(e)||S(t,"has",e),n}function W(t){return S(t,"iterate",(0,i.kJ)(t)?"length":v),Reflect.ownKeys(t)}const H={get:P,set:B,deleteProperty:q,has:$,ownKeys:W},G={get:N,set(t,e){return!0},deleteProperty(t,e){return!0}},K=(0,i.l7)({},H,{get:M,set:j}),Y=t=>t,Q=t=>Reflect.getPrototypeOf(t);function J(t,e,n=!1,i=!1){t=t["__v_raw"];const r=Dt(t),s=Dt(e);n||(e!==s&&S(r,"get",e),S(r,"get",s));const{has:o}=Q(r),a=i?Y:n?Pt:Ot;return o.call(r,e)?a(t.get(e)):o.call(r,s)?a(t.get(s)):void(t!==r&&t.get(e))}function X(t,e=!1){const n=this["__v_raw"],i=Dt(n),r=Dt(t);return e||(t!==r&&S(i,"has",t),S(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Z(t,e=!1){return t=t["__v_raw"],!e&&S(Dt(t),"iterate",v),Reflect.get(t,"size",t)}function tt(t){t=Dt(t);const e=Dt(this),n=Q(e),i=n.has.call(e,t);return i||(e.add(t),C(e,"add",t,t)),this}function et(t,e){e=Dt(e);const n=Dt(this),{has:r,get:s}=Q(n);let o=r.call(n,t);o||(t=Dt(t),o=r.call(n,t));const a=s.call(n,t);return n.set(t,e),o?(0,i.aU)(e,a)&&C(n,"set",t,e,a):C(n,"add",t,e),this}function nt(t){const e=Dt(this),{has:n,get:i}=Q(e);let r=n.call(e,t);r||(t=Dt(t),r=n.call(e,t));const s=i?i.call(e,t):void 0,o=e.delete(t);return r&&C(e,"delete",t,void 0,s),o}function it(){const t=Dt(this),e=0!==t.size,n=void 0,i=t.clear();return e&&C(t,"clear",void 0,void 0,n),i}function rt(t,e){return function(n,i){const r=this,s=r["__v_raw"],o=Dt(s),a=e?Y:t?Pt:Ot;return!t&&S(o,"iterate",v),s.forEach(((t,e)=>n.call(i,a(t),a(e),r)))}}function st(t,e,n){return function(...r){const s=this["__v_raw"],o=Dt(s),a=(0,i._N)(o),c="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=s[t](...r),h=n?Y:e?Pt:Ot;return!e&&S(o,"iterate",l?b:v),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function ot(t){return function(...e){return"delete"!==t&&this}}function at(){const t={get(t){return J(this,t)},get size(){return Z(this)},has:X,add:tt,set:et,delete:nt,clear:it,forEach:rt(!1,!1)},e={get(t){return J(this,t,!1,!0)},get size(){return Z(this)},has:X,add:tt,set:et,delete:nt,clear:it,forEach:rt(!1,!0)},n={get(t){return J(this,t,!0)},get size(){return Z(this,!0)},has(t){return X.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:rt(!0,!1)},i={get(t){return J(this,t,!0,!0)},get size(){return Z(this,!0)},has(t){return X.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:rt(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{t[r]=st(r,!1,!1),n[r]=st(r,!0,!1),e[r]=st(r,!1,!0),i[r]=st(r,!0,!0)})),[t,n,e,i]}const[ct,lt,ut,ht]=at();function dt(t,e){const n=e?t?ht:ut:t?lt:ct;return(e,r,s)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get((0,i.RI)(n,r)&&r in e?n:e,r,s)}const ft={get:dt(!1,!1)},pt={get:dt(!1,!0)},gt={get:dt(!0,!1)};const mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,bt=new WeakMap;function wt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _t(t){return t["__v_skip"]||!Object.isExtensible(t)?0:wt((0,i.W7)(t))}function xt(t){return kt(t)?t:Tt(t,!1,H,ft,mt)}function It(t){return Tt(t,!1,K,pt,yt)}function Et(t){return Tt(t,!0,G,gt,vt)}function Tt(t,e,n,r,s){if(!(0,i.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=s.get(t);if(o)return o;const a=_t(t);if(0===a)return t;const c=new Proxy(t,2===a?r:n);return s.set(t,c),c}function St(t){return kt(t)?St(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function kt(t){return!(!t||!t["__v_isReadonly"])}function Ct(t){return!(!t||!t["__v_isShallow"])}function At(t){return St(t)||kt(t)}function Dt(t){const e=t&&t["__v_raw"];return e?Dt(e):t}function Rt(t){return(0,i.Nj)(t,"__v_skip",!0),t}const Ot=t=>(0,i.Kn)(t)?xt(t):t,Pt=t=>(0,i.Kn)(t)?Et(t):t;function Mt(t){x&&y&&(t=Dt(t),k(t.dep||(t.dep=c())))}function Nt(t,e){t=Dt(t);const n=t.dep;n&&A(n)}function Lt(t){return!(!t||!0!==t.__v_isRef)}function Ft(t){return Ut(t,!1)}function Vt(t){return Ut(t,!0)}function Ut(t,e){return Lt(t)?t:new Bt(t,e)}class Bt{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Dt(t),this._value=e?t:Ot(t)}get value(){return Mt(this),this._value}set value(t){const e=this.__v_isShallow||Ct(t)||kt(t);t=e?t:Dt(t),(0,i.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Ot(t),Nt(this,t))}}function jt(t){return Lt(t)?t.value:t}const zt={get:(t,e,n)=>jt(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Lt(r)&&!Lt(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function qt(t){return St(t)?t:new Proxy(t,zt)}var $t;class Wt{constructor(t,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this[$t]=!1,this._dirty=!0,this.effect=new w(t,(()=>{this._dirty||(this._dirty=!0,Nt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const t=Dt(this);return Mt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Ht(t,e,n=!1){let r,s;const o=(0,i.mf)(t);o?(r=t,s=i.dG):(r=t.get,s=t.set);const a=new Wt(r,s,o||!s,n);return a}$t="__v_isReadonly"},3396:function(t,e,n){"use strict";n.d(e,{$d:function(){return o},FN:function(){return hn},Fl:function(){return kn},HY:function(){return Ae},JJ:function(){return $},Jd:function(){return Et},P$:function(){return et},Q6:function(){return at},U2:function(){return it},Uk:function(){return Xe},Us:function(){return Ie},Wm:function(){return Ke},Y3:function(){return v},Y8:function(){return X},YP:function(){return G},_:function(){return Ge},aZ:function(){return ct},bv:function(){return _t},f3:function(){return W},h:function(){return Cn},i8:function(){return Rn},iD:function(){return Be},ic:function(){return It},j4:function(){return je},kq:function(){return tn},nK:function(){return ot},uE:function(){return Ze},up:function(){return Pt},w5:function(){return N},wg:function(){return Ne},wy:function(){return Dt}});n(7658);var i=n(4870),r=n(7139);function s(t,e,n,i){let r;try{r=i?t(...i):t()}catch(s){a(s,e,n)}return r}function o(t,e,n,i){if((0,r.mf)(t)){const o=s(t,e,n,i);return o&&(0,r.tI)(o)&&o.catch((t=>{a(t,e,n)})),o}const c=[];for(let r=0;r<t.length;r++)c.push(o(t[r],e,n,i));return c}function a(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const r=e.proxy,o=n;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,r,o))return;i=i.parent}const a=e.appContext.config.errorHandler;if(a)return void s(a,null,10,[t,r,o])}c(t,n,r,i)}function c(t,e,n,i=!0){console.error(t)}let l=!1,u=!1;const h=[];let d=0;const f=[];let p=null,g=0;const m=Promise.resolve();let y=null;function v(t){const e=y||m;return t?e.then(this?t.bind(this):t):e}function b(t){let e=d+1,n=h.length;while(e<n){const i=e+n>>>1,r=S(h[i]);r<t?e=i+1:n=i}return e}function w(t){h.length&&h.includes(t,l&&t.allowRecurse?d+1:d)||(null==t.id?h.push(t):h.splice(b(t.id),0,t),_())}function _(){l||u||(u=!0,y=m.then(C))}function x(t){const e=h.indexOf(t);e>d&&h.splice(e,1)}function I(t){(0,r.kJ)(t)?f.push(...t):p&&p.includes(t,t.allowRecurse?g+1:g)||f.push(t),_()}function E(t,e=(l?d+1:0)){for(0;e<h.length;e++){const t=h[e];t&&t.pre&&(h.splice(e,1),e--,t())}}function T(t){if(f.length){const t=[...new Set(f)];if(f.length=0,p)return void p.push(...t);for(p=t,p.sort(((t,e)=>S(t)-S(e))),g=0;g<p.length;g++)p[g]();p=null,g=0}}const S=t=>null==t.id?1/0:t.id,k=(t,e)=>{const n=S(t)-S(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function C(t){u=!1,l=!0,h.sort(k);r.dG;try{for(d=0;d<h.length;d++){const t=h[d];t&&!1!==t.active&&s(t,null,14)}}finally{d=0,h.length=0,T(t),l=!1,y=null,(h.length||f.length)&&C(t)}}new Set;new Map;function A(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||r.kT;let s=n;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in i){const t=`${"modelValue"===c?"model":c}Modifiers`,{number:e,trim:o}=i[t]||r.kT;o&&(s=n.map((t=>(0,r.HD)(t)?t.trim():t))),e&&(s=n.map(r.h5))}let l;let u=i[l=(0,r.hR)(e)]||i[l=(0,r.hR)((0,r._A)(e))];!u&&a&&(u=i[l=(0,r.hR)((0,r.rs)(e))]),u&&o(u,t,6,s);const h=i[l+"Once"];if(h){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,o(h,t,6,s)}}function D(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(void 0!==s)return s;const o=t.emits;let a={},c=!1;if(!(0,r.mf)(t)){const i=t=>{const n=D(t,e,!0);n&&(c=!0,(0,r.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return o||c?((0,r.kJ)(o)?o.forEach((t=>a[t]=null)):(0,r.l7)(a,o),(0,r.Kn)(t)&&i.set(t,a),a):((0,r.Kn)(t)&&i.set(t,null),null)}function R(t,e){return!(!t||!(0,r.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,r.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,r.RI)(t,(0,r.rs)(e))||(0,r.RI)(t,e))}let O=null,P=null;function M(t){const e=O;return O=t,P=t&&t.type.__scopeId||null,e}function N(t,e=O,n){if(!e)return t;if(t._n)return t;const i=(...n)=>{i._d&&Ve(-1);const r=M(e);let s;try{s=t(...n)}finally{M(r),i._d&&Ve(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function L(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[c],slots:l,attrs:u,emit:h,render:d,renderCache:f,data:p,setupState:g,ctx:m,inheritAttrs:y}=t;let v,b;const w=M(t);try{if(4&n.shapeFlag){const t=s||i;v=en(d.call(t,t,f,o,g,p,m)),b=u}else{const t=e;0,v=en(t.length>1?t(o,{attrs:u,slots:l,emit:h}):t(o,null)),b=e.props?u:F(u)}}catch(x){Pe.length=0,a(x,t,1),v=Ke(Re)}let _=v;if(b&&!1!==y){const t=Object.keys(b),{shapeFlag:e}=_;t.length&&7&e&&(c&&t.some(r.tR)&&(b=V(b,c)),_=Je(_,b))}return n.dirs&&(_=Je(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),v=_,M(w),v}const F=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,r.F7)(n))&&((e||(e={}))[n]=t[n]);return e},V=(t,e)=>{const n={};for(const i in t)(0,r.tR)(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function U(t,e,n){const{props:i,children:r,component:s}=t,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!r&&!a||a&&a.$stable)||i!==o&&(i?!o||B(i,o,l):!!o);if(1024&c)return!0;if(16&c)return i?B(i,o,l):!!o;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==i[n]&&!R(l,n))return!0}}return!1}function B(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==t[s]&&!R(n,s))return!0}return!1}function j({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const z=t=>t.__isSuspense;function q(t,e){e&&e.pendingBranch?(0,r.kJ)(t)?e.effects.push(...t):e.effects.push(t):I(t)}function $(t,e){if(un){let n=un.provides;const i=un.parent&&un.parent.provides;i===n&&(n=un.provides=Object.create(i)),n[t]=e}else 0}function W(t,e,n=!1){const i=un||O;if(i){const s=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&(0,r.mf)(e)?e.call(i.proxy):e}else 0}const H={};function G(t,e,n){return K(t,e,n)}function K(t,e,{immediate:n,deep:a,flush:c,onTrack:l,onTrigger:u}=r.kT){const h=(0,i.nZ)()===(null===un||void 0===un?void 0:un.scope)?un:null;let d,f,p=!1,g=!1;if((0,i.dq)(t)?(d=()=>t.value,p=(0,i.yT)(t)):(0,i.PG)(t)?(d=()=>t,a=!0):(0,r.kJ)(t)?(g=!0,p=t.some((t=>(0,i.PG)(t)||(0,i.yT)(t))),d=()=>t.map((t=>(0,i.dq)(t)?t.value:(0,i.PG)(t)?J(t):(0,r.mf)(t)?s(t,h,2):void 0))):d=(0,r.mf)(t)?e?()=>s(t,h,2):()=>{if(!h||!h.isUnmounted)return f&&f(),o(t,h,3,[y])}:r.dG,e&&a){const t=d;d=()=>J(t())}let m,y=t=>{f=x.onStop=()=>{s(t,h,4)}};if(yn){if(y=r.dG,e?n&&o(e,h,3,[d(),g?[]:void 0,y]):d(),"sync"!==c)return r.dG;{const t=Dn();m=t.__watcherHandles||(t.__watcherHandles=[])}}let v=g?new Array(t.length).fill(H):H;const b=()=>{if(x.active)if(e){const t=x.run();(a||p||(g?t.some(((t,e)=>(0,r.aU)(t,v[e]))):(0,r.aU)(t,v)))&&(f&&f(),o(e,h,3,[t,v===H?void 0:g&&v[0]===H?[]:v,y]),v=t)}else x.run()};let _;b.allowRecurse=!!e,"sync"===c?_=b:"post"===c?_=()=>xe(b,h&&h.suspense):(b.pre=!0,h&&(b.id=h.uid),_=()=>w(b));const x=new i.qq(d,_);e?n?b():v=x.run():"post"===c?xe(x.run.bind(x),h&&h.suspense):x.run();const I=()=>{x.stop(),h&&h.scope&&(0,r.Od)(h.scope.effects,x)};return m&&m.push(I),I}function Y(t,e,n){const i=this.proxy,s=(0,r.HD)(t)?t.includes(".")?Q(i,t):()=>i[t]:t.bind(i,i);let o;(0,r.mf)(e)?o=e:(o=e.handler,n=e);const a=un;dn(this);const c=K(s,o.bind(i),n);return a?dn(a):fn(),c}function Q(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function J(t,e){if(!(0,r.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,i.dq)(t))J(t.value,e);else if((0,r.kJ)(t))for(let n=0;n<t.length;n++)J(t[n],e);else if((0,r.DM)(t)||(0,r._N)(t))t.forEach((t=>{J(t,e)}));else if((0,r.PO)(t))for(const n in t)J(t[n],e);return t}function X(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _t((()=>{t.isMounted=!0})),Et((()=>{t.isUnmounting=!0})),t}const Z=[Function,Array],tt={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Z,onEnter:Z,onAfterEnter:Z,onEnterCancelled:Z,onBeforeLeave:Z,onLeave:Z,onAfterLeave:Z,onLeaveCancelled:Z,onBeforeAppear:Z,onAppear:Z,onAfterAppear:Z,onAppearCancelled:Z},setup(t,{slots:e}){const n=hn(),r=X();let s;return()=>{const o=e.default&&at(e.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){let t=!1;for(const e of o)if(e.type!==Re){0,a=e,t=!0;break}}const c=(0,i.IU)(t),{mode:l}=c;if(r.isLeaving)return rt(a);const u=st(a);if(!u)return rt(a);const h=it(u,c,r,n);ot(u,h);const d=n.subTree,f=d&&st(d);let p=!1;const{getTransitionKey:g}=u.type;if(g){const t=g();void 0===s?s=t:t!==s&&(s=t,p=!0)}if(f&&f.type!==Re&&(!qe(u,f)||p)){const t=it(f,c,r,n);if(ot(f,t),"out-in"===l)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&n.update()},rt(a);"in-out"===l&&u.type!==Re&&(t.delayLeave=(t,e,n)=>{const i=nt(r,f);i[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}},et=tt;function nt(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function it(t,e,n,i){const{appear:s,mode:a,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:y,onAppear:v,onAfterAppear:b,onAppearCancelled:w}=e,_=String(t.key),x=nt(n,t),I=(t,e)=>{t&&o(t,i,9,e)},E=(t,e)=>{const n=e[1];I(t,e),(0,r.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},T={mode:a,persisted:c,beforeEnter(e){let i=l;if(!n.isMounted){if(!s)return;i=y||l}e._leaveCb&&e._leaveCb(!0);const r=x[_];r&&qe(t,r)&&r.el._leaveCb&&r.el._leaveCb(),I(i,[e])},enter(t){let e=u,i=h,r=d;if(!n.isMounted){if(!s)return;e=v||u,i=b||h,r=w||d}let o=!1;const a=t._enterCb=e=>{o||(o=!0,I(e?r:i,[t]),T.delayedLeave&&T.delayedLeave(),t._enterCb=void 0)};e?E(e,[t,a]):a()},leave(e,i){const r=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return i();I(f,[e]);let s=!1;const o=e._leaveCb=n=>{s||(s=!0,i(),I(n?m:g,[e]),e._leaveCb=void 0,x[r]===t&&delete x[r])};x[r]=t,p?E(p,[e,o]):o()},clone(t){return it(t,e,n,i)}};return T}function rt(t){if(ut(t))return t=Je(t),t.children=null,t}function st(t){return ut(t)?t.children?t.children[0]:void 0:t}function ot(t,e){6&t.shapeFlag&&t.component?ot(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function at(t,e=!1,n){let i=[],r=0;for(let s=0;s<t.length;s++){let o=t[s];const a=null==n?o.key:String(n)+String(null!=o.key?o.key:s);o.type===Ae?(128&o.patchFlag&&r++,i=i.concat(at(o.children,e,a))):(e||o.type!==Re)&&i.push(null!=a?Je(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function ct(t){return(0,r.mf)(t)?{setup:t,name:t.name}:t}const lt=t=>!!t.type.__asyncLoader;const ut=t=>t.type.__isKeepAlive;RegExp,RegExp;function ht(t,e){return(0,r.kJ)(t)?t.some((t=>ht(t,e))):(0,r.HD)(t)?t.split(",").includes(e):!!(0,r.Kj)(t)&&t.test(e)}function dt(t,e){pt(t,"a",e)}function ft(t,e){pt(t,"da",e)}function pt(t,e,n=un){const i=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(vt(e,i,n),n){let t=n.parent;while(t&&t.parent)ut(t.parent.vnode)&&gt(i,e,n,t),t=t.parent}}function gt(t,e,n,i){const s=vt(e,t,i,!0);Tt((()=>{(0,r.Od)(i[e],s)}),n)}function mt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function yt(t){return 128&t.shapeFlag?t.ssContent:t}function vt(t,e,n=un,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;(0,i.Jd)(),dn(n);const s=o(e,n,t,r);return fn(),(0,i.lk)(),s});return r?s.unshift(a):s.push(a),a}}const bt=t=>(e,n=un)=>(!yn||"sp"===t)&&vt(t,((...t)=>e(...t)),n),wt=bt("bm"),_t=bt("m"),xt=bt("bu"),It=bt("u"),Et=bt("bum"),Tt=bt("um"),St=bt("sp"),kt=bt("rtg"),Ct=bt("rtc");function At(t,e=un){vt("ec",t,e)}function Dt(t,e){const n=O;if(null===n)return t;const i=En(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,n,a,c=r.kT]=e[o];t&&((0,r.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&J(n),s.push({dir:t,instance:i,value:n,oldValue:void 0,arg:a,modifiers:c}))}return t}function Rt(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let c=0;c<s.length;c++){const l=s[c];a&&(l.oldValue=a[c].value);let u=l.dir[r];u&&((0,i.Jd)(),o(u,n,8,[t.el,l,t,e]),(0,i.lk)())}}const Ot="components";function Pt(t,e){return Nt(Ot,t,!0,e)||t}const Mt=Symbol();function Nt(t,e,n=!0,i=!1){const s=O||un;if(s){const n=s.type;if(t===Ot){const t=Tn(n,!1);if(t&&(t===e||t===(0,r._A)(e)||t===(0,r.kC)((0,r._A)(e))))return n}const o=Lt(s[t]||n[t],e)||Lt(s.appContext[t],e);return!o&&i?n:o}}function Lt(t,e){return t&&(t[e]||t[(0,r._A)(e)]||t[(0,r.kC)((0,r._A)(e))])}const Ft=t=>t?pn(t)?En(t)||t.proxy:Ft(t.parent):null,Vt=(0,r.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ft(t.parent),$root:t=>Ft(t.root),$emit:t=>t.emit,$options:t=>Ht(t),$forceUpdate:t=>t.f||(t.f=()=>w(t.update)),$nextTick:t=>t.n||(t.n=v.bind(t.proxy)),$watch:t=>Y.bind(t)}),Ut=(t,e)=>t!==r.kT&&!t.__isScriptSetup&&(0,r.RI)(t,e),Bt={get({_:t},e){const{ctx:n,setupState:s,data:o,props:a,accessCache:c,type:l,appContext:u}=t;let h;if("$"!==e[0]){const i=c[e];if(void 0!==i)switch(i){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(Ut(s,e))return c[e]=1,s[e];if(o!==r.kT&&(0,r.RI)(o,e))return c[e]=2,o[e];if((h=t.propsOptions[0])&&(0,r.RI)(h,e))return c[e]=3,a[e];if(n!==r.kT&&(0,r.RI)(n,e))return c[e]=4,n[e];jt&&(c[e]=0)}}const d=Vt[e];let f,p;return d?("$attrs"===e&&(0,i.j)(t,"get",e),d(t)):(f=l.__cssModules)&&(f=f[e])?f:n!==r.kT&&(0,r.RI)(n,e)?(c[e]=4,n[e]):(p=u.config.globalProperties,(0,r.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:i,setupState:s,ctx:o}=t;return Ut(s,e)?(s[e]=n,!0):i!==r.kT&&(0,r.RI)(i,e)?(i[e]=n,!0):!(0,r.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:o}},a){let c;return!!n[a]||t!==r.kT&&(0,r.RI)(t,a)||Ut(e,a)||(c=o[0])&&(0,r.RI)(c,a)||(0,r.RI)(i,a)||(0,r.RI)(Vt,a)||(0,r.RI)(s.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,r.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let jt=!0;function zt(t){const e=Ht(t),n=t.proxy,s=t.ctx;jt=!1,e.beforeCreate&&$t(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:l,provide:u,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:m,activated:y,deactivated:v,beforeDestroy:b,beforeUnmount:w,destroyed:_,unmounted:x,render:I,renderTracked:E,renderTriggered:T,errorCaptured:S,serverPrefetch:k,expose:C,inheritAttrs:A,components:D,directives:R,filters:O}=e,P=null;if(h&&qt(h,s,P,t.appContext.config.unwrapInjectedRef),c)for(const i in c){const t=c[i];(0,r.mf)(t)&&(s[i]=t.bind(n))}if(o){0;const e=o.call(n,n);0,(0,r.Kn)(e)&&(t.data=(0,i.qj)(e))}if(jt=!0,a)for(const i in a){const t=a[i],e=(0,r.mf)(t)?t.bind(n,n):(0,r.mf)(t.get)?t.get.bind(n,n):r.dG;0;const o=!(0,r.mf)(t)&&(0,r.mf)(t.set)?t.set.bind(n):r.dG,c=kn({get:e,set:o});Object.defineProperty(s,i,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(l)for(const i in l)Wt(l[i],s,n,i);if(u){const t=(0,r.mf)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{$(e,t[e])}))}function M(t,e){(0,r.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&$t(d,t,"c"),M(wt,f),M(_t,p),M(xt,g),M(It,m),M(dt,y),M(ft,v),M(At,S),M(Ct,E),M(kt,T),M(Et,w),M(Tt,x),M(St,k),(0,r.kJ)(C))if(C.length){const e=t.exposed||(t.exposed={});C.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});I&&t.render===r.dG&&(t.render=I),null!=A&&(t.inheritAttrs=A),D&&(t.components=D),R&&(t.directives=R)}function qt(t,e,n=r.dG,s=!1){(0,r.kJ)(t)&&(t=Jt(t));for(const o in t){const n=t[o];let a;a=(0,r.Kn)(n)?"default"in n?W(n.from||o,n.default,!0):W(n.from||o):W(n),(0,i.dq)(a)&&s?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:t=>a.value=t}):e[o]=a}}function $t(t,e,n){o((0,r.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Wt(t,e,n,i){const s=i.includes(".")?Q(n,i):()=>n[i];if((0,r.HD)(t)){const n=e[t];(0,r.mf)(n)&&G(s,n)}else if((0,r.mf)(t))G(s,t.bind(n));else if((0,r.Kn)(t))if((0,r.kJ)(t))t.forEach((t=>Wt(t,e,n,i)));else{const i=(0,r.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,r.mf)(i)&&G(s,i,t)}else 0}function Ht(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,c=o.get(e);let l;return c?l=c:s.length||n||i?(l={},s.length&&s.forEach((t=>Gt(l,t,a,!0))),Gt(l,e,a)):l=e,(0,r.Kn)(e)&&o.set(e,l),l}function Gt(t,e,n,i=!1){const{mixins:r,extends:s}=e;s&&Gt(t,s,n,!0),r&&r.forEach((e=>Gt(t,e,n,!0)));for(const o in e)if(i&&"expose"===o);else{const i=Kt[o]||n&&n[o];t[o]=i?i(t[o],e[o]):e[o]}return t}const Kt={data:Yt,props:Zt,emits:Zt,methods:Zt,computed:Zt,beforeCreate:Xt,created:Xt,beforeMount:Xt,mounted:Xt,beforeUpdate:Xt,updated:Xt,beforeDestroy:Xt,beforeUnmount:Xt,destroyed:Xt,unmounted:Xt,activated:Xt,deactivated:Xt,errorCaptured:Xt,serverPrefetch:Xt,components:Zt,directives:Zt,watch:te,provide:Yt,inject:Qt};function Yt(t,e){return e?t?function(){return(0,r.l7)((0,r.mf)(t)?t.call(this,this):t,(0,r.mf)(e)?e.call(this,this):e)}:e:t}function Qt(t,e){return Zt(Jt(t),Jt(e))}function Jt(t){if((0,r.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Zt(t,e){return t?(0,r.l7)((0,r.l7)(Object.create(null),t),e):e}function te(t,e){if(!t)return e;if(!e)return t;const n=(0,r.l7)(Object.create(null),t);for(const i in e)n[i]=Xt(t[i],e[i]);return n}function ee(t,e,n,s=!1){const o={},a={};(0,r.Nj)(a,$e,1),t.propsDefaults=Object.create(null),ie(t,e,o,a);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);n?t.props=s?o:(0,i.Um)(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function ne(t,e,n,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,l=(0,i.IU)(o),[u]=t.propsOptions;let h=!1;if(!(s||c>0)||16&c){let i;ie(t,e,o,a)&&(h=!0);for(const s in l)e&&((0,r.RI)(e,s)||(i=(0,r.rs)(s))!==s&&(0,r.RI)(e,i))||(u?!n||void 0===n[s]&&void 0===n[i]||(o[s]=re(u,l,s,void 0,t,!0)):delete o[s]);if(a!==l)for(const t in a)e&&(0,r.RI)(e,t)||(delete a[t],h=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];if(R(t.emitsOptions,s))continue;const c=e[s];if(u)if((0,r.RI)(a,s))c!==a[s]&&(a[s]=c,h=!0);else{const e=(0,r._A)(s);o[e]=re(u,l,e,c,t,!1)}else c!==a[s]&&(a[s]=c,h=!0)}}h&&(0,i.X$)(t,"set","$attrs")}function ie(t,e,n,s){const[o,a]=t.propsOptions;let c,l=!1;if(e)for(let i in e){if((0,r.Gg)(i))continue;const u=e[i];let h;o&&(0,r.RI)(o,h=(0,r._A)(i))?a&&a.includes(h)?(c||(c={}))[h]=u:n[h]=u:R(t.emitsOptions,i)||i in s&&u===s[i]||(s[i]=u,l=!0)}if(a){const e=(0,i.IU)(n),s=c||r.kT;for(let i=0;i<a.length;i++){const c=a[i];n[c]=re(o,e,c,s[c],t,!(0,r.RI)(s,c))}}return l}function re(t,e,n,i,s,o){const a=t[n];if(null!=a){const t=(0,r.RI)(a,"default");if(t&&void 0===i){const t=a.default;if(a.type!==Function&&(0,r.mf)(t)){const{propsDefaults:r}=s;n in r?i=r[n]:(dn(s),i=r[n]=t.call(null,e),fn())}else i=t}a[0]&&(o&&!t?i=!1:!a[1]||""!==i&&i!==(0,r.rs)(n)||(i=!0))}return i}function se(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const o=t.props,a={},c=[];let l=!1;if(!(0,r.mf)(t)){const i=t=>{l=!0;const[n,i]=se(t,e,!0);(0,r.l7)(a,n),i&&c.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!o&&!l)return(0,r.Kn)(t)&&i.set(t,r.Z6),r.Z6;if((0,r.kJ)(o))for(let h=0;h<o.length;h++){0;const t=(0,r._A)(o[h]);oe(t)&&(a[t]=r.kT)}else if(o){0;for(const t in o){const e=(0,r._A)(t);if(oe(e)){const n=o[t],i=a[e]=(0,r.kJ)(n)||(0,r.mf)(n)?{type:n}:Object.assign({},n);if(i){const t=le(Boolean,i.type),n=le(String,i.type);i[0]=t>-1,i[1]=n<0||t<n,(t>-1||(0,r.RI)(i,"default"))&&c.push(e)}}}}const u=[a,c];return(0,r.Kn)(t)&&i.set(t,u),u}function oe(t){return"$"!==t[0]}function ae(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function ce(t,e){return ae(t)===ae(e)}function le(t,e){return(0,r.kJ)(e)?e.findIndex((e=>ce(e,t))):(0,r.mf)(e)&&ce(e,t)?0:-1}const ue=t=>"_"===t[0]||"$stable"===t,he=t=>(0,r.kJ)(t)?t.map(en):[en(t)],de=(t,e,n)=>{if(e._n)return e;const i=N(((...t)=>he(e(...t))),n);return i._c=!1,i},fe=(t,e,n)=>{const i=t._ctx;for(const s in t){if(ue(s))continue;const n=t[s];if((0,r.mf)(n))e[s]=de(s,n,i);else if(null!=n){0;const t=he(n);e[s]=()=>t}}},pe=(t,e)=>{const n=he(e);t.slots.default=()=>n},ge=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,i.IU)(e),(0,r.Nj)(e,"_",n)):fe(e,t.slots={})}else t.slots={},e&&pe(t,e);(0,r.Nj)(t.slots,$e,1)},me=(t,e,n)=>{const{vnode:i,slots:s}=t;let o=!0,a=r.kT;if(32&i.shapeFlag){const t=e._;t?n&&1===t?o=!1:((0,r.l7)(s,e),n||1!==t||delete s._):(o=!e.$stable,fe(e,s)),a=e}else e&&(pe(t,e),a={default:1});if(o)for(const r in s)ue(r)||r in a||delete s[r]};function ye(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ve=0;function be(t,e){return function(n,i=null){(0,r.mf)(n)||(n=Object.assign({},n)),null==i||(0,r.Kn)(i)||(i=null);const s=ye(),o=new Set;let a=!1;const c=s.app={_uid:ve++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:Rn,get config(){return s.config},set config(t){0},use(t,...e){return o.has(t)||(t&&(0,r.mf)(t.install)?(o.add(t),t.install(c,...e)):(0,r.mf)(t)&&(o.add(t),t(c,...e))),c},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),c},component(t,e){return e?(s.components[t]=e,c):s.components[t]},directive(t,e){return e?(s.directives[t]=e,c):s.directives[t]},mount(r,o,l){if(!a){0;const u=Ke(n,i);return u.appContext=s,o&&e?e(u,r):t(u,r,l),a=!0,c._container=r,r.__vue_app__=c,En(u.component)||u.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(t,e){return s.provides[t]=e,c}};return c}}function we(t,e,n,o,a=!1){if((0,r.kJ)(t))return void t.forEach(((t,i)=>we(t,e&&((0,r.kJ)(e)?e[i]:e),n,o,a)));if(lt(o)&&!a)return;const c=4&o.shapeFlag?En(o.component)||o.component.proxy:o.el,l=a?null:c,{i:u,r:h}=t;const d=e&&e.r,f=u.refs===r.kT?u.refs={}:u.refs,p=u.setupState;if(null!=d&&d!==h&&((0,r.HD)(d)?(f[d]=null,(0,r.RI)(p,d)&&(p[d]=null)):(0,i.dq)(d)&&(d.value=null)),(0,r.mf)(h))s(h,u,12,[l,f]);else{const e=(0,r.HD)(h),s=(0,i.dq)(h);if(e||s){const i=()=>{if(t.f){const n=e?(0,r.RI)(p,h)?p[h]:f[h]:h.value;a?(0,r.kJ)(n)&&(0,r.Od)(n,c):(0,r.kJ)(n)?n.includes(c)||n.push(c):e?(f[h]=[c],(0,r.RI)(p,h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=l,(0,r.RI)(p,h)&&(p[h]=l)):s&&(h.value=l,t.k&&(f[t.k]=l))};l?(i.id=-1,xe(i,n)):i()}else 0}}function _e(){}const xe=q;function Ie(t){return Ee(t)}function Ee(t,e){_e();const n=(0,r.E9)();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:l,createComment:u,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=r.dG,insertStaticContent:m}=t,y=(t,e,n,i=null,r=null,s=null,o=!1,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!qe(t,e)&&(i=X(t),G(t,r,s,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=e;switch(l){case De:v(t,e,n,i);break;case Re:b(t,e,n,i);break;case Oe:null==t&&_(e,n,i,o);break;case Ae:M(t,e,n,i,r,s,o,a,c);break;default:1&h?k(t,e,n,i,r,s,o,a,c):6&h?N(t,e,n,i,r,s,o,a,c):(64&h||128&h)&&l.process(t,e,n,i,r,s,o,a,c,tt)}null!=u&&r&&we(u,t&&t.ref,s,e||t,!e)},v=(t,e,n,i)=>{if(null==t)s(e.el=l(e.children),n,i);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},b=(t,e,n,i)=>{null==t?s(e.el=u(e.children||""),n,i):e.el=t.el},_=(t,e,n,i)=>{[t.el,t.anchor]=m(t.children,e,n,i,t.el,t.anchor)},I=({el:t,anchor:e},n,i)=>{let r;while(t&&t!==e)r=p(t),s(t,n,i),t=r;s(e,n,i)},S=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),o(t),t=n;o(e)},k=(t,e,n,i,r,s,o,a,c)=>{o=o||"svg"===e.type,null==t?C(e,n,i,r,s,o,a,c):R(t,e,r,s,o,a,c)},C=(t,e,n,i,o,l,u,h)=>{let f,p;const{type:g,props:m,shapeFlag:y,transition:v,dirs:b}=t;if(f=t.el=c(t.type,l,m&&m.is,m),8&y?d(f,t.children):16&y&&D(t.children,f,null,i,o,l&&"foreignObject"!==g,u,h),b&&Rt(t,null,i,"created"),A(f,t,t.scopeId,u,i),m){for(const e in m)"value"===e||(0,r.Gg)(e)||a(f,e,null,m[e],l,t.children,i,o,J);"value"in m&&a(f,"value",null,m.value),(p=m.onVnodeBeforeMount)&&on(p,i,t)}b&&Rt(t,null,i,"beforeMount");const w=(!o||o&&!o.pendingBranch)&&v&&!v.persisted;w&&v.beforeEnter(f),s(f,e,n),((p=m&&m.onVnodeMounted)||w||b)&&xe((()=>{p&&on(p,i,t),w&&v.enter(f),b&&Rt(t,null,i,"mounted")}),o)},A=(t,e,n,i,r)=>{if(n&&g(t,n),i)for(let s=0;s<i.length;s++)g(t,i[s]);if(r){let n=r.subTree;if(e===n){const e=r.vnode;A(t,e,e.scopeId,e.slotScopeIds,r.parent)}}},D=(t,e,n,i,r,s,o,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=a?nn(t[l]):en(t[l]);y(null,c,e,n,i,r,s,o,a)}},R=(t,e,n,i,s,o,c)=>{const l=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||r.kT,g=e.props||r.kT;let m;n&&Te(n,!1),(m=g.onVnodeBeforeUpdate)&&on(m,n,e,t),f&&Rt(e,t,n,"beforeUpdate"),n&&Te(n,!0);const y=s&&"foreignObject"!==e.type;if(h?O(t.dynamicChildren,h,l,n,i,y,o):c||q(t,e,l,null,n,i,y,o,!1),u>0){if(16&u)P(l,e,p,g,n,i,s);else if(2&u&&p.class!==g.class&&a(l,"class",null,g.class,s),4&u&&a(l,"style",p.style,g.style,s),8&u){const r=e.dynamicProps;for(let e=0;e<r.length;e++){const o=r[e],c=p[o],u=g[o];u===c&&"value"!==o||a(l,o,c,u,s,t.children,n,i,J)}}1&u&&t.children!==e.children&&d(l,e.children)}else c||null!=h||P(l,e,p,g,n,i,s);((m=g.onVnodeUpdated)||f)&&xe((()=>{m&&on(m,n,e,t),f&&Rt(e,t,n,"updated")}),i)},O=(t,e,n,i,r,s,o)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],u=c.el&&(c.type===Ae||!qe(c,l)||70&c.shapeFlag)?f(c.el):n;y(c,l,u,null,i,r,s,o,!0)}},P=(t,e,n,i,s,o,c)=>{if(n!==i){if(n!==r.kT)for(const l in n)(0,r.Gg)(l)||l in i||a(t,l,n[l],null,c,e.children,s,o,J);for(const l in i){if((0,r.Gg)(l))continue;const u=i[l],h=n[l];u!==h&&"value"!==l&&a(t,l,h,u,c,e.children,s,o,J)}"value"in i&&a(t,"value",n.value,i.value)}},M=(t,e,n,i,r,o,a,c,u)=>{const h=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(s(h,n,i),s(d,n,i),D(e.children,n,d,r,o,a,c,u)):f>0&&64&f&&p&&t.dynamicChildren?(O(t.dynamicChildren,p,n,r,o,a,c),(null!=e.key||r&&e===r.subTree)&&Se(t,e,!0)):q(t,e,n,d,r,o,a,c,u)},N=(t,e,n,i,r,s,o,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?r.ctx.activate(e,n,i,o,c):F(e,n,i,r,s,o,c):V(t,e,c)},F=(t,e,n,i,r,s,o)=>{const a=t.component=ln(t,i,r);if(ut(t)&&(a.ctx.renderer=tt),vn(a),a.asyncDep){if(r&&r.registerDep(a,B),!t.el){const t=a.subTree=Ke(Re);b(null,t,e,n)}}else B(a,t,e,n,r,s,o)},V=(t,e,n)=>{const i=e.component=t.component;if(U(t,e,n)){if(i.asyncDep&&!i.asyncResolved)return void z(i,e,n);i.next=e,x(i.update),i.update()}else e.el=t.el,i.vnode=e},B=(t,e,n,s,o,a,c)=>{const l=()=>{if(t.isMounted){let e,{next:n,bu:i,u:s,parent:l,vnode:u}=t,h=n;0,Te(t,!1),n?(n.el=u.el,z(t,n,c)):n=u,i&&(0,r.ir)(i),(e=n.props&&n.props.onVnodeBeforeUpdate)&&on(e,l,n,u),Te(t,!0);const d=L(t);0;const p=t.subTree;t.subTree=d,y(p,d,f(p.el),X(p),t,o,a),n.el=d.el,null===h&&j(t,d.el),s&&xe(s,o),(e=n.props&&n.props.onVnodeUpdated)&&xe((()=>on(e,l,n,u)),o)}else{let i;const{el:c,props:l}=e,{bm:u,m:h,parent:d}=t,f=lt(e);if(Te(t,!1),u&&(0,r.ir)(u),!f&&(i=l&&l.onVnodeBeforeMount)&&on(i,d,e),Te(t,!0),c&&nt){const n=()=>{t.subTree=L(t),nt(c,t.subTree,t,o,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const i=t.subTree=L(t);0,y(null,i,n,s,t,o,a),e.el=i.el}if(h&&xe(h,o),!f&&(i=l&&l.onVnodeMounted)){const t=e;xe((()=>on(i,d,t)),o)}(256&e.shapeFlag||d&&lt(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&xe(t.a,o),t.isMounted=!0,e=n=s=null}},u=t.effect=new i.qq(l,(()=>w(h)),t.scope),h=t.update=()=>u.run();h.id=t.uid,Te(t,!0),h()},z=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,ne(t,e.props,r,n),me(t,e.children,n),(0,i.Jd)(),E(),(0,i.lk)()},q=(t,e,n,i,r,s,o,a,c=!1)=>{const l=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void W(l,h,n,i,r,s,o,a,c);if(256&f)return void $(l,h,n,i,r,s,o,a,c)}8&p?(16&u&&J(l,r,s),h!==l&&d(n,h)):16&u?16&p?W(l,h,n,i,r,s,o,a,c):J(l,r,s,!0):(8&u&&d(n,""),16&p&&D(h,n,i,r,s,o,a,c))},$=(t,e,n,i,s,o,a,c,l)=>{t=t||r.Z6,e=e||r.Z6;const u=t.length,h=e.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const i=e[f]=l?nn(e[f]):en(e[f]);y(t[f],i,n,null,s,o,a,c,l)}u>h?J(t,s,o,!0,!1,d):D(e,n,i,s,o,a,c,l,d)},W=(t,e,n,i,s,o,a,c,l)=>{let u=0;const h=e.length;let d=t.length-1,f=h-1;while(u<=d&&u<=f){const i=t[u],r=e[u]=l?nn(e[u]):en(e[u]);if(!qe(i,r))break;y(i,r,n,null,s,o,a,c,l),u++}while(u<=d&&u<=f){const i=t[d],r=e[f]=l?nn(e[f]):en(e[f]);if(!qe(i,r))break;y(i,r,n,null,s,o,a,c,l),d--,f--}if(u>d){if(u<=f){const t=f+1,r=t<h?e[t].el:i;while(u<=f)y(null,e[u]=l?nn(e[u]):en(e[u]),n,r,s,o,a,c,l),u++}}else if(u>f)while(u<=d)G(t[u],s,o,!0),u++;else{const p=u,g=u,m=new Map;for(u=g;u<=f;u++){const t=e[u]=l?nn(e[u]):en(e[u]);null!=t.key&&m.set(t.key,u)}let v,b=0;const w=f-g+1;let _=!1,x=0;const I=new Array(w);for(u=0;u<w;u++)I[u]=0;for(u=p;u<=d;u++){const i=t[u];if(b>=w){G(i,s,o,!0);continue}let r;if(null!=i.key)r=m.get(i.key);else for(v=g;v<=f;v++)if(0===I[v-g]&&qe(i,e[v])){r=v;break}void 0===r?G(i,s,o,!0):(I[r-g]=u+1,r>=x?x=r:_=!0,y(i,e[r],n,null,s,o,a,c,l),b++)}const E=_?ke(I):r.Z6;for(v=E.length-1,u=w-1;u>=0;u--){const t=g+u,r=e[t],d=t+1<h?e[t+1].el:i;0===I[u]?y(null,r,n,d,s,o,a,c,l):_&&(v<0||u!==E[v]?H(r,n,d,2):v--)}}},H=(t,e,n,i,r=null)=>{const{el:o,type:a,transition:c,children:l,shapeFlag:u}=t;if(6&u)return void H(t.component.subTree,e,n,i);if(128&u)return void t.suspense.move(e,n,i);if(64&u)return void a.move(t,e,n,tt);if(a===Ae){s(o,e,n);for(let t=0;t<l.length;t++)H(l[t],e,n,i);return void s(t.anchor,e,n)}if(a===Oe)return void I(t,e,n);const h=2!==i&&1&u&&c;if(h)if(0===i)c.beforeEnter(o),s(o,e,n),xe((()=>c.enter(o)),r);else{const{leave:t,delayLeave:i,afterLeave:r}=c,a=()=>s(o,e,n),l=()=>{t(o,(()=>{a(),r&&r()}))};i?i(o,a,l):l()}else s(o,e,n)},G=(t,e,n,i=!1,r=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d}=t;if(null!=a&&we(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const f=1&u&&d,p=!lt(t);let g;if(p&&(g=o&&o.onVnodeBeforeUnmount)&&on(g,e,t),6&u)Q(t.component,n,i);else{if(128&u)return void t.suspense.unmount(n,i);f&&Rt(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,r,tt,i):l&&(s!==Ae||h>0&&64&h)?J(l,e,n,!1,!0):(s===Ae&&384&h||!r&&16&u)&&J(c,e,n),i&&K(t)}(p&&(g=o&&o.onVnodeUnmounted)||f)&&xe((()=>{g&&on(g,e,t),f&&Rt(t,null,e,"unmounted")}),n)},K=t=>{const{type:e,el:n,anchor:i,transition:r}=t;if(e===Ae)return void Y(n,i);if(e===Oe)return void S(t);const s=()=>{o(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&t.shapeFlag&&r&&!r.persisted){const{leave:e,delayLeave:i}=r,o=()=>e(n,s);i?i(t.el,s,o):o()}else s()},Y=(t,e)=>{let n;while(t!==e)n=p(t),o(t),t=n;o(e)},Q=(t,e,n)=>{const{bum:i,scope:s,update:o,subTree:a,um:c}=t;i&&(0,r.ir)(i),s.stop(),o&&(o.active=!1,G(a,t,e,n)),c&&xe(c,e),xe((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,n,i=!1,r=!1,s=0)=>{for(let o=s;o<t.length;o++)G(t[o],e,n,i,r)},X=t=>6&t.shapeFlag?X(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),Z=(t,e,n)=>{null==t?e._vnode&&G(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),E(),T(),e._vnode=t},tt={p:y,um:G,m:H,r:K,mt:F,mc:D,pc:q,pbc:O,n:X,o:t};let et,nt;return e&&([et,nt]=e(tt)),{render:Z,hydrate:et,createApp:be(Z,et)}}function Te({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Se(t,e,n=!1){const i=t.children,s=e.children;if((0,r.kJ)(i)&&(0,r.kJ)(s))for(let r=0;r<i.length;r++){const t=i[r];let e=s[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[r]=nn(s[r]),e.el=t.el),n||Se(t,e)),e.type===De&&(e.el=t.el)}}function ke(t){const e=t.slice(),n=[0];let i,r,s,o,a;const c=t.length;for(i=0;i<c;i++){const c=t[i];if(0!==c){if(r=n[n.length-1],t[r]<c){e[i]=r,n.push(i);continue}s=0,o=n.length-1;while(s<o)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[i]=n[s-1]),n[s]=i)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=e[o];return n}const Ce=t=>t.__isTeleport;const Ae=Symbol(void 0),De=Symbol(void 0),Re=Symbol(void 0),Oe=Symbol(void 0),Pe=[];let Me=null;function Ne(t=!1){Pe.push(Me=t?null:[])}function Le(){Pe.pop(),Me=Pe[Pe.length-1]||null}let Fe=1;function Ve(t){Fe+=t}function Ue(t){return t.dynamicChildren=Fe>0?Me||r.Z6:null,Le(),Fe>0&&Me&&Me.push(t),t}function Be(t,e,n,i,r,s){return Ue(Ge(t,e,n,i,r,s,!0))}function je(t,e,n,i,r){return Ue(Ke(t,e,n,i,r,!0))}function ze(t){return!!t&&!0===t.__v_isVNode}function qe(t,e){return t.type===e.type&&t.key===e.key}const $e="__vInternal",We=({key:t})=>null!=t?t:null,He=({ref:t,ref_key:e,ref_for:n})=>null!=t?(0,r.HD)(t)||(0,i.dq)(t)||(0,r.mf)(t)?{i:O,r:t,k:e,f:!!n}:t:null;function Ge(t,e=null,n=null,i=0,s=null,o=(t===Ae?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&We(e),ref:e&&He(e),scopeId:P,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:O};return c?(rn(l,n),128&o&&t.normalize(l)):n&&(l.shapeFlag|=(0,r.HD)(n)?8:16),Fe>0&&!a&&Me&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Me.push(l),l}const Ke=Ye;function Ye(t,e=null,n=null,s=0,o=null,a=!1){if(t&&t!==Mt||(t=Re),ze(t)){const i=Je(t,e,!0);return n&&rn(i,n),Fe>0&&!a&&Me&&(6&i.shapeFlag?Me[Me.indexOf(t)]=i:Me.push(i)),i.patchFlag|=-2,i}if(Sn(t)&&(t=t.__vccOpts),e){e=Qe(e);let{class:t,style:n}=e;t&&!(0,r.HD)(t)&&(e.class=(0,r.C_)(t)),(0,r.Kn)(n)&&((0,i.X3)(n)&&!(0,r.kJ)(n)&&(n=(0,r.l7)({},n)),e.style=(0,r.j5)(n))}const c=(0,r.HD)(t)?1:z(t)?128:Ce(t)?64:(0,r.Kn)(t)?4:(0,r.mf)(t)?2:0;return Ge(t,e,n,s,o,c,a,!0)}function Qe(t){return t?(0,i.X3)(t)||$e in t?(0,r.l7)({},t):t:null}function Je(t,e,n=!1){const{props:i,ref:s,patchFlag:o,children:a}=t,c=e?sn(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&We(c),ref:e&&e.ref?n&&s?(0,r.kJ)(s)?s.concat(He(e)):[s,He(e)]:He(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ae?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Je(t.ssContent),ssFallback:t.ssFallback&&Je(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l}function Xe(t=" ",e=0){return Ke(De,null,t,e)}function Ze(t,e){const n=Ke(Oe,null,t);return n.staticCount=e,n}function tn(t="",e=!1){return e?(Ne(),je(Re,null,t)):Ke(Re,null,t)}function en(t){return null==t||"boolean"===typeof t?Ke(Re):(0,r.kJ)(t)?Ke(Ae,null,t.slice()):"object"===typeof t?nn(t):Ke(De,null,String(t))}function nn(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:Je(t)}function rn(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if((0,r.kJ)(e))n=16;else if("object"===typeof e){if(65&i){const n=e.default;return void(n&&(n._c&&(n._d=!1),rn(t,n()),n._c&&(n._d=!0)))}{n=32;const i=e._;i||$e in e?3===i&&O&&(1===O.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=O}}else(0,r.mf)(e)?(e={default:e,_ctx:O},n=32):(e=String(e),64&i?(n=16,e=[Xe(e)]):n=8);t.children=e,t.shapeFlag|=n}function sn(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=(0,r.C_)([e.class,i.class]));else if("style"===t)e.style=(0,r.j5)([e.style,i.style]);else if((0,r.F7)(t)){const n=e[t],s=i[t];!s||n===s||(0,r.kJ)(n)&&n.includes(s)||(e[t]=n?[].concat(n,s):s)}else""!==t&&(e[t]=i[t])}return e}function on(t,e,n,i=null){o(t,e,7,[n,i])}const an=ye();let cn=0;function ln(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||an,a={uid:cn++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:se(s,o),emitsOptions:D(s,o),emit:null,emitted:null,propsDefaults:r.kT,inheritAttrs:s.inheritAttrs,ctx:r.kT,data:r.kT,props:r.kT,attrs:r.kT,slots:r.kT,refs:r.kT,setupState:r.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=A.bind(null,a),t.ce&&t.ce(a),a}let un=null;const hn=()=>un||O,dn=t=>{un=t,t.scope.on()},fn=()=>{un&&un.scope.off(),un=null};function pn(t){return 4&t.vnode.shapeFlag}let gn,mn,yn=!1;function vn(t,e=!1){yn=e;const{props:n,children:i}=t.vnode,r=pn(t);ee(t,n,r,e),ge(t,i);const s=r?bn(t,e):void 0;return yn=!1,s}function bn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,i.Xl)(new Proxy(t.ctx,Bt));const{setup:o}=n;if(o){const n=t.setupContext=o.length>1?In(t):null;dn(t),(0,i.Jd)();const c=s(o,t,0,[t.props,n]);if((0,i.lk)(),fn(),(0,r.tI)(c)){if(c.then(fn,fn),e)return c.then((n=>{wn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=c}else wn(t,c,e)}else _n(t,e)}function wn(t,e,n){(0,r.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,r.Kn)(e)&&(t.setupState=(0,i.WL)(e)),_n(t,n)}function _n(t,e,n){const s=t.type;if(!t.render){if(!e&&gn&&!s.render){const e=s.template||Ht(t).template;if(e){0;const{isCustomElement:n,compilerOptions:i}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,c=(0,r.l7)((0,r.l7)({isCustomElement:n,delimiters:o},i),a);s.render=gn(e,c)}}t.render=s.render||r.dG,mn&&mn(t)}dn(t),(0,i.Jd)(),zt(t),(0,i.lk)(),fn()}function xn(t){return new Proxy(t.attrs,{get(e,n){return(0,i.j)(t,"get","$attrs"),e[n]}})}function In(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=xn(t))},slots:t.slots,emit:t.emit,expose:e}}function En(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,i.WL)((0,i.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in Vt?Vt[n](t):void 0},has(t,e){return e in t||e in Vt}}))}function Tn(t,e=!0){return(0,r.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Sn(t){return(0,r.mf)(t)&&"__vccOpts"in t}const kn=(t,e)=>(0,i.Fl)(t,e,yn);function Cn(t,e,n){const i=arguments.length;return 2===i?(0,r.Kn)(e)&&!(0,r.kJ)(e)?ze(e)?Ke(t,null,[e]):Ke(t,e):Ke(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&ze(n)&&(n=[n]),Ke(t,e,n))}const An=Symbol(""),Dn=()=>{{const t=W(An);return t}};const Rn="3.2.47"},9242:function(t,e,n){"use strict";n.d(e,{iM:function(){return ht},nr:function(){return ct},ri:function(){return gt}});n(7658);var i=n(7139),r=n(3396),s=n(4870);const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),l={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?a.createElementNS(o,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,s){const o=n?n.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling)){while(1)if(e.insertBefore(r.cloneNode(!0),n),r===s||!(r=r.nextSibling))break}else{c.innerHTML=i?`<svg>${t}</svg>`:t;const r=c.content;if(i){const t=r.firstChild;while(t.firstChild)r.appendChild(t.firstChild);r.removeChild(t)}e.insertBefore(r,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function u(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function h(t,e,n){const r=t.style,s=(0,i.HD)(n);if(n&&!s){if(e&&!(0,i.HD)(e))for(const t in e)null==n[t]&&f(r,t,"");for(const t in n)f(r,t,n[t])}else{const i=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const d=/\s*!important$/;function f(t,e,n){if((0,i.kJ)(n))n.forEach((n=>f(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=m(t,e);d.test(n)?t.setProperty((0,i.rs)(r),n.replace(d,""),"important"):t[r]=n}}const p=["Webkit","Moz","ms"],g={};function m(t,e){const n=g[e];if(n)return n;let r=(0,i._A)(e);if("filter"!==r&&r in t)return g[e]=r;r=(0,i.kC)(r);for(let i=0;i<p.length;i++){const n=p[i]+r;if(n in t)return g[e]=n}return e}const y="http://www.w3.org/1999/xlink";function v(t,e,n,r,s){if(r&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(y,e.slice(6,e.length)):t.setAttributeNS(y,e,n);else{const r=(0,i.Pq)(e);null==n||r&&!(0,i.yA)(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function b(t,e,n,r,s,o,a){if("innerHTML"===e||"textContent"===e)return r&&a(r,s,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){t._value=n;const i=null==n?"":n;return t.value===i&&"OPTION"!==t.tagName||(t.value=i),void(null==n&&t.removeAttribute(e))}let c=!1;if(""===n||null==n){const r=typeof t[e];"boolean"===r?n=(0,i.yA)(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{t[e]=n}catch(l){0}c&&t.removeAttribute(e)}function w(t,e,n,i){t.addEventListener(e,n,i)}function _(t,e,n,i){t.removeEventListener(e,n,i)}function x(t,e,n,i,r=null){const s=t._vei||(t._vei={}),o=s[e];if(i&&o)o.value=i;else{const[n,a]=E(e);if(i){const o=s[e]=C(i,r);w(t,n,o,a)}else o&&(_(t,n,o,a),s[e]=void 0)}}const I=/(?:Once|Passive|Capture)$/;function E(t){let e;if(I.test(t)){let n;e={};while(n=t.match(I))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,i.rs)(t.slice(2));return[n,e]}let T=0;const S=Promise.resolve(),k=()=>T||(S.then((()=>T=0)),T=Date.now());function C(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,r.$d)(A(t,n.value),e,5,[t])};return n.value=t,n.attached=k(),n}function A(t,e){if((0,i.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const D=/^on[a-z]/,R=(t,e,n,r,s=!1,o,a,c,l)=>{"class"===e?u(t,r,s):"style"===e?h(t,n,r):(0,i.F7)(e)?(0,i.tR)(e)||x(t,e,n,r,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):O(t,e,r,s))?b(t,e,r,o,a,c,l):("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),v(t,e,r,s))};function O(t,e,n,r){return r?"innerHTML"===e||"textContent"===e||!!(e in t&&D.test(e)&&(0,i.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!D.test(e)||!(0,i.HD)(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const P="transition",M="animation",N=(t,{slots:e})=>(0,r.h)(r.P$,B(t),e);N.displayName="Transition";const L={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},F=N.props=(0,i.l7)({},r.P$.props,L),V=(t,e=[])=>{(0,i.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},U=t=>!!t&&((0,i.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function B(t){const e={};for(const i in t)i in L||(e[i]=t[i]);if(!1===t.css)return e;const{name:n="v",type:r,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:h=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=j(s),m=g&&g[0],y=g&&g[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:w,onLeave:_,onLeaveCancelled:x,onBeforeAppear:I=v,onAppear:E=b,onAppearCancelled:T=w}=e,S=(t,e,n)=>{$(t,e?h:c),$(t,e?u:a),n&&n()},k=(t,e)=>{t._isLeaving=!1,$(t,d),$(t,p),$(t,f),e&&e()},C=t=>(e,n)=>{const i=t?E:b,s=()=>S(e,t,n);V(i,[e,s]),W((()=>{$(e,t?l:o),q(e,t?h:c),U(i)||G(e,r,m,s)}))};return(0,i.l7)(e,{onBeforeEnter(t){V(v,[t]),q(t,o),q(t,a)},onBeforeAppear(t){V(I,[t]),q(t,l),q(t,u)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>k(t,e);q(t,d),J(),q(t,f),W((()=>{t._isLeaving&&($(t,d),q(t,p),U(_)||G(t,r,y,n))})),V(_,[t,n])},onEnterCancelled(t){S(t,!1),V(w,[t])},onAppearCancelled(t){S(t,!0),V(T,[t])},onLeaveCancelled(t){k(t),V(x,[t])}})}function j(t){if(null==t)return null;if((0,i.Kn)(t))return[z(t.enter),z(t.leave)];{const e=z(t);return[e,e]}}function z(t){const e=(0,i.He)(t);return e}function q(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function $(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function W(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let H=0;function G(t,e,n,i){const r=t._endId=++H,s=()=>{r===t._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=K(t,e);if(!o)return i();const l=o+"end";let u=0;const h=()=>{t.removeEventListener(l,d),s()},d=e=>{e.target===t&&++u>=c&&h()};setTimeout((()=>{u<c&&h()}),a+1),t.addEventListener(l,d)}function K(t,e){const n=window.getComputedStyle(t),i=t=>(n[t]||"").split(", "),r=i(`${P}Delay`),s=i(`${P}Duration`),o=Y(r,s),a=i(`${M}Delay`),c=i(`${M}Duration`),l=Y(a,c);let u=null,h=0,d=0;e===P?o>0&&(u=P,h=o,d=s.length):e===M?l>0&&(u=M,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?P:M:null,d=u?u===P?s.length:c.length:0);const f=u===P&&/\b(transform|all)(,|$)/.test(i(`${P}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function Y(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>Q(e)+Q(t[n]))))}function Q(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function J(){return document.body.offsetHeight}const X=new WeakMap,Z=new WeakMap,tt={name:"TransitionGroup",props:(0,i.l7)({},F,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,r.FN)(),i=(0,r.Y8)();let o,a;return(0,r.ic)((()=>{if(!o.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!rt(o[0].el,n.vnode.el,e))return;o.forEach(et),o.forEach(nt);const i=o.filter(it);J(),i.forEach((t=>{const n=t.el,i=n.style;q(n,e),i.transform=i.webkitTransform=i.transitionDuration="";const r=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,$(n,e))};n.addEventListener("transitionend",r)}))})),()=>{const c=(0,s.IU)(t),l=B(c);let u=c.tag||r.HY;o=a,a=e.default?(0,r.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,r.nK)(e,(0,r.U2)(e,l,i,n))}if(o)for(let t=0;t<o.length;t++){const e=o[t];(0,r.nK)(e,(0,r.U2)(e,l,i,n)),X.set(e,e.el.getBoundingClientRect())}return(0,r.Wm)(u,null,a)}}};tt.props;function et(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function nt(t){Z.set(t,t.el.getBoundingClientRect())}function it(t){const e=X.get(t),n=Z.get(t),i=e.left-n.left,r=e.top-n.top;if(i||r){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${i}px,${r}px)`,e.transitionDuration="0s",t}}function rt(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&i.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&i.classList.add(t))),i.style.display="none";const r=1===e.nodeType?e:e.parentNode;r.appendChild(i);const{hasTransform:s}=K(i);return r.removeChild(i),s}const st=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,i.kJ)(e)?t=>(0,i.ir)(e,t):e};function ot(t){t.target.composing=!0}function at(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ct={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t._assign=st(s);const o=r||s.props&&"number"===s.props.type;w(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n&&(r=r.trim()),o&&(r=(0,i.h5)(r)),t._assign(r)})),n&&w(t,"change",(()=>{t.value=t.value.trim()})),e||(w(t,"compositionstart",ot),w(t,"compositionend",at),w(t,"change",at))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},o){if(t._assign=st(o),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(r&&t.value.trim()===e)return;if((s||"number"===t.type)&&(0,i.h5)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const lt=["ctrl","shift","alt","meta"],ut={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>lt.some((n=>t[`${n}Key`]&&!e.includes(n)))},ht=(t,e)=>(n,...i)=>{for(let t=0;t<e.length;t++){const i=ut[e[t]];if(i&&i(n,e))return}return t(n,...i)};const dt=(0,i.l7)({patchProp:R},l);let ft;function pt(){return ft||(ft=(0,r.Us)(dt))}const gt=(...t)=>{const e=pt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const r=mt(t);if(!r)return;const s=e._component;(0,i.mf)(s)||s.render||s.template||(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function mt(t){if((0,i.HD)(t)){const e=document.querySelector(t);return e}return t}},7139:function(t,e,n){"use strict";n.d(e,{C_:function(){return h},DM:function(){return P},E9:function(){return ot},F7:function(){return T},Gg:function(){return H},HD:function(){return F},He:function(){return rt},Kj:function(){return N},Kn:function(){return U},NO:function(){return I},Nj:function(){return nt},Od:function(){return C},PO:function(){return $},Pq:function(){return f},RI:function(){return D},S0:function(){return W},W7:function(){return q},WV:function(){return m},Z6:function(){return _},_A:function(){return Y},_N:function(){return O},aU:function(){return tt},dG:function(){return x},e1:function(){return s},fY:function(){return i},h5:function(){return it},hR:function(){return Z},hq:function(){return y},ir:function(){return et},j5:function(){return o},kC:function(){return X},kJ:function(){return R},kT:function(){return w},l7:function(){return k},mf:function(){return L},rs:function(){return J},tI:function(){return B},tR:function(){return S},yA:function(){return p},yk:function(){return V},zw:function(){return v}});n(7658);function i(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const r="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=i(r);function o(t){if(R(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=F(i)?u(i):o(i);if(r)for(const t in r)e[t]=r[t]}return e}return F(t)||U(t)?t:void 0}const a=/;(?![^(]*\))/g,c=/:([^]+)/,l=/\/\*.*?\*\//gs;function u(t){const e={};return t.replace(l,"").split(a).forEach((t=>{if(t){const n=t.split(c);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function h(t){let e="";if(F(t))e=t;else if(R(t))for(let n=0;n<t.length;n++){const i=h(t[n]);i&&(e+=i+" ")}else if(U(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const d="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",f=i(d);function p(t){return!!t||""===t}function g(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=m(t[i],e[i]);return n}function m(t,e){if(t===e)return!0;let n=M(t),i=M(e);if(n||i)return!(!n||!i)&&t.getTime()===e.getTime();if(n=V(t),i=V(e),n||i)return t===e;if(n=R(t),i=R(e),n||i)return!(!n||!i)&&g(t,e);if(n=U(t),i=U(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,s=Object.keys(e).length;if(r!==s)return!1;for(const n in t){const i=t.hasOwnProperty(n),r=e.hasOwnProperty(n);if(i&&!r||!i&&r||!m(t[n],e[n]))return!1}}return String(t)===String(e)}function y(t,e){return t.findIndex((t=>m(t,e)))}const v=t=>F(t)?t:null==t?"":R(t)||U(t)&&(t.toString===j||!L(t.toString))?JSON.stringify(t,b,2):String(t),b=(t,e)=>e&&e.__v_isRef?b(t,e.value):O(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:P(e)?{[`Set(${e.size})`]:[...e.values()]}:!U(e)||R(e)||$(e)?e:String(e),w={},_=[],x=()=>{},I=()=>!1,E=/^on[^a-z]/,T=t=>E.test(t),S=t=>t.startsWith("onUpdate:"),k=Object.assign,C=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},A=Object.prototype.hasOwnProperty,D=(t,e)=>A.call(t,e),R=Array.isArray,O=t=>"[object Map]"===z(t),P=t=>"[object Set]"===z(t),M=t=>"[object Date]"===z(t),N=t=>"[object RegExp]"===z(t),L=t=>"function"===typeof t,F=t=>"string"===typeof t,V=t=>"symbol"===typeof t,U=t=>null!==t&&"object"===typeof t,B=t=>U(t)&&L(t.then)&&L(t.catch),j=Object.prototype.toString,z=t=>j.call(t),q=t=>z(t).slice(8,-1),$=t=>"[object Object]"===z(t),W=t=>F(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,H=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),G=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},K=/-(\w)/g,Y=G((t=>t.replace(K,((t,e)=>e?e.toUpperCase():"")))),Q=/\B([A-Z])/g,J=G((t=>t.replace(Q,"-$1").toLowerCase())),X=G((t=>t.charAt(0).toUpperCase()+t.slice(1))),Z=G((t=>t?`on${X(t)}`:"")),tt=(t,e)=>!Object.is(t,e),et=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},nt=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},it=t=>{const e=parseFloat(t);return isNaN(e)?t:e},rt=t=>{const e=F(t)?Number(t):NaN;return isNaN(e)?t:e};let st;const ot=()=>st||(st="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n}},2661:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var i=n(223),r=n(7142),s=n(7077),o=n(5168);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(t,e){this._delegate=t,this.firebase=e,(0,s._addComponent)(t,new r.wA("app-compat",(()=>this),"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((t=>{this._delegate.checkDestroyed(),t()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate))))}_getService(t,e=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,s._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,s._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},l=new i.LL("app-compat","Firebase",c);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(t){const e={},n={__esModule:!0,initializeApp:a,app:o,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:u,removeApp:r,useAsService:h,modularAPIs:s}};function r(t){delete e[t]}function o(t){if(t=t||s._DEFAULT_ENTRY_NAME,!(0,i.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function a(r,o={}){const a=s.initializeApp(r,o);if((0,i.r3)(e,a.name))return e[a.name];const c=new t(a,n);return e[a.name]=c,c}function c(){return Object.keys(e).map((t=>e[t]))}function u(e){const r=e.name,a=r.replace("-compat","");if(s._registerComponent(e)&&"PUBLIC"===e.type){const s=(t=o())=>{if("function"!==typeof t[a])throw l.create("invalid-app-argument",{appName:r});return t[a]()};void 0!==e.serviceProps&&(0,i.ZB)(s,e.serviceProps),n[a]=s,t.prototype[a]=function(...t){const n=this._getService.bind(this,r);return n.apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[a]:null}function h(t,e){if("serverAuth"===e)return null;const n=e;return n}return n["default"]=n,Object.defineProperty(n,"apps",{get:c}),o["App"]=t,n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(){const t=u(a);function e(e){(0,i.ZB)(t,e)}return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:h,extendNamespace:e,createSubscribe:i.ne,ErrorFactory:i.LL,deepExtend:i.ZB}),t}const d=h(),f=new o.Yd("@firebase/app-compat"),p="@firebase/app-compat",g="0.2.10";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function m(t){(0,s.registerVersion)(p,g,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,i.jU)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const y=d;m()},7077:function(t,e,n){"use strict";n.r(e),n.d(e,{FirebaseError:function(){return s.ZR},SDK_VERSION:function(){return vt},_DEFAULT_ENTRY_NAME:function(){return st},_addComponent:function(){return lt},_addOrOverwriteComponent:function(){return ut},_apps:function(){return at},_clearComponents:function(){return pt},_components:function(){return ct},_getProvider:function(){return dt},_registerComponent:function(){return ht},_removeServiceInstance:function(){return ft},deleteApp:function(){return xt},getApp:function(){return wt},getApps:function(){return _t},initializeApp:function(){return bt},onLog:function(){return Et},registerVersion:function(){return It},setLogLevel:function(){return Tt}});n(7658);var i=n(7142),r=n(5168),s=n(223);n(2801);const o=(t,e)=>e.some((e=>t instanceof e));let a,c;function l(){return a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u(){return c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap;function m(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(x(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&h.set(e,t)})).catch((()=>{})),g.set(e,t),e}function y(t){if(d.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));d.set(t,e)}let v={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return d.get(t);if("objectStoreNames"===e)return t.objectStoreNames||f.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function b(t){v=t(v)}function w(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?u().includes(t)?function(...e){return t.apply(I(this),e),x(h.get(this))}:function(...e){return x(t.apply(I(this),e))}:function(e,...n){const i=t.call(I(this),e,...n);return f.set(i,e.sort?e.sort():[e]),x(i)}}function _(t){return"function"===typeof t?w(t):(t instanceof IDBTransaction&&y(t),o(t,l())?new Proxy(t,v):t)}function x(t){if(t instanceof IDBRequest)return m(t);if(p.has(t))return p.get(t);const e=_(t);return e!==t&&(p.set(t,e),g.set(e,t)),e}const I=t=>g.get(t);function E(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=x(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(x(o.result),t.oldVersion,t.newVersion,x(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const T=["get","getKey","getAll","getAllKeys","count"],S=["put","add","delete","clear"],k=new Map;function C(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(k.get(e))return k.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=S.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!T.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return k.set(e,s),s}b((t=>({...t,get:(e,n,i)=>C(e,n)||t.get(e,n,i),has:(e,n)=>!!C(e,n)||t.has(e,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class A{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(D(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function D(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const R="@firebase/app",O="0.9.10",P=new r.Yd("@firebase/app"),M="@firebase/app-compat",N="@firebase/analytics-compat",L="@firebase/analytics",F="@firebase/app-check-compat",V="@firebase/app-check",U="@firebase/auth",B="@firebase/auth-compat",j="@firebase/database",z="@firebase/database-compat",q="@firebase/functions",$="@firebase/functions-compat",W="@firebase/installations",H="@firebase/installations-compat",G="@firebase/messaging",K="@firebase/messaging-compat",Y="@firebase/performance",Q="@firebase/performance-compat",J="@firebase/remote-config",X="@firebase/remote-config-compat",Z="@firebase/storage",tt="@firebase/storage-compat",et="@firebase/firestore",nt="@firebase/firestore-compat",it="firebase",rt="9.22.0",st="[DEFAULT]",ot={[R]:"fire-core",[M]:"fire-core-compat",[L]:"fire-analytics",[N]:"fire-analytics-compat",[V]:"fire-app-check",[F]:"fire-app-check-compat",[U]:"fire-auth",[B]:"fire-auth-compat",[j]:"fire-rtdb",[z]:"fire-rtdb-compat",[q]:"fire-fn",[$]:"fire-fn-compat",[W]:"fire-iid",[H]:"fire-iid-compat",[G]:"fire-fcm",[K]:"fire-fcm-compat",[Y]:"fire-perf",[Q]:"fire-perf-compat",[J]:"fire-rc",[X]:"fire-rc-compat",[Z]:"fire-gcs",[tt]:"fire-gcs-compat",[et]:"fire-fst",[nt]:"fire-fst-compat","fire-js":"fire-js",[it]:"fire-js-all"},at=new Map,ct=new Map;function lt(t,e){try{t.container.addComponent(e)}catch(n){P.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ut(t,e){t.container.addOrOverwriteComponent(e)}function ht(t){const e=t.name;if(ct.has(e))return P.debug(`There were multiple attempts to register component ${e}.`),!1;ct.set(e,t);for(const n of at.values())lt(n,t);return!0}function dt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ft(t,e,n=st){dt(t,e).clearInstance(n)}function pt(){ct.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},mt=new s.LL("app","Firebase",gt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt=rt;function bt(t,e={}){let n=t;if("object"!==typeof e){const t=e;e={name:t}}const r=Object.assign({name:st,automaticDataCollectionEnabled:!1},e),o=r.name;if("string"!==typeof o||!o)throw mt.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.aH)()),!n)throw mt.create("no-options");const a=at.get(o);if(a){if((0,s.vZ)(n,a.options)&&(0,s.vZ)(r,a.config))return a;throw mt.create("duplicate-app",{appName:o})}const c=new i.H0(o);for(const i of ct.values())c.addComponent(i);const l=new yt(n,r,c);return at.set(o,l),l}function wt(t=st){const e=at.get(t);if(!e&&t===st&&(0,s.aH)())return bt();if(!e)throw mt.create("no-app",{appName:t});return e}function _t(){return Array.from(at.values())}async function xt(t){const e=t.name;at.has(e)&&(at.delete(e),await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function It(t,e,n){var r;let s=null!==(r=ot[t])&&void 0!==r?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void P.warn(t.join(" "))}ht(new i.wA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}function Et(t,e){if(null!==t&&"function"!==typeof t)throw mt.create("invalid-log-argument");(0,r.Am)(t,e)}function Tt(t){(0,r.Ub)(t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="firebase-heartbeat-database",kt=1,Ct="firebase-heartbeat-store";let At=null;function Dt(){return At||(At=E(St,kt,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ct)}}}).catch((t=>{throw mt.create("idb-open",{originalErrorMessage:t.message})}))),At}async function Rt(t){try{const e=await Dt(),n=await e.transaction(Ct).objectStore(Ct).get(Pt(t));return n}catch(e){if(e instanceof s.ZR)P.warn(e.message);else{const t=mt.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});P.warn(t.message)}}}async function Ot(t,e){try{const n=await Dt(),i=n.transaction(Ct,"readwrite"),r=i.objectStore(Ct);await r.put(e,Pt(t)),await i.done}catch(n){if(n instanceof s.ZR)P.warn(n.message);else{const t=mt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});P.warn(t.message)}}}function Pt(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt=1024,Nt=2592e6;class Lt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Ut(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate(),e=t.getPlatformInfoString(),n=Ft();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((t=>t.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf(),n=Date.now();return n-e<=Nt})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ft(),{heartbeatsToSend:e,unsentEntries:n}=Vt(this._heartbeatsCache.heartbeats),i=(0,s.L)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ft(){const t=new Date;return t.toISOString().substring(0,10)}function Vt(t,e=Mt){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Bt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Bt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Ut{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await Rt(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Ot(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Ot(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Bt(t){return(0,s.L)(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){ht(new i.wA("platform-logger",(t=>new A(t)),"PRIVATE")),ht(new i.wA("heartbeat",(t=>new Lt(t)),"PRIVATE")),It(R,O,t),It(R,O,"esm2017"),It("fire-js","")}jt("")},7142:function(t,e,n){"use strict";n.d(e,{H0:function(){return l},wA:function(){return r}});var i=n(223);class r{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new i.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(c(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=s){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=s){return this.instances.has(t)}getOptions(t=s){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(r);n===t&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:a(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}return n||null}normalizeInstanceIdentifier(t=s){return this.component?this.component.multipleInstances?t:s:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(t){return t===s?void 0:t}function c(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},5168:function(t,e,n){"use strict";n.d(e,{Am:function(){return h},Ub:function(){return u},Yd:function(){return l},in:function(){return r}});n(7658);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i=[];var r;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},c=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=a[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class l{constructor(t){this.name=t,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in r))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}function u(t){i.forEach((e=>{e.setLogLevel(t)}))}function h(t,e){for(const n of i){let i=null;e&&e.level&&(i=s[e.level]),n.userLogHandler=null===t?null:(e,n,...s)=>{const o=s.map((t=>{if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((t=>t)).join(" ");n>=(null!==i&&void 0!==i?i:e.logLevel)&&t({level:r[n].toLowerCase(),message:o,args:s,type:e.name})}}}},9646:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t){var e=r(t,"string");return"symbol"===i(e)?e:String(e)}function o(t,e,n){return e=s(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{vn:function(){return mr},ZL:function(){return pa},uw:function(){return cc},kL:function(){return Mo},wL:function(){return Ta},De:function(){return Ma},f$:function(){return dc},Dx:function(){return Fa},u:function(){return ic}});n(7658);
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */
function a(t){return t+.5|0}const c=(t,e,n)=>Math.max(Math.min(t,n),e);function l(t){return c(a(2.55*t),0,255)}function u(t){return c(a(255*t),0,255)}function h(t){return c(a(t/2.55)/100,0,1)}function d(t){return c(a(100*t),0,100)}const f={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},p=[..."0123456789ABCDEF"],g=t=>p[15&t],m=t=>p[(240&t)>>4]+p[15&t],y=t=>(240&t)>>4===(15&t),v=t=>y(t.r)&&y(t.g)&&y(t.b)&&y(t.a);function b(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*f[t[1]],g:255&17*f[t[2]],b:255&17*f[t[3]],a:5===n?17*f[t[4]]:255}:7!==n&&9!==n||(e={r:f[t[1]]<<4|f[t[2]],g:f[t[3]]<<4|f[t[4]],b:f[t[5]]<<4|f[t[6]],a:9===n?f[t[7]]<<4|f[t[8]]:255})),e}const w=(t,e)=>t<255?e(t):"";function _(t){var e=v(t)?g:m;return t?"#"+e(t.r)+e(t.g)+e(t.b)+w(t.a,e):void 0}const x=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function I(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function E(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function T(t,e,n){const i=I(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function S(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function k(t){const e=255,n=t.r/e,i=t.g/e,r=t.b/e,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=S(n,i,r,u,s),c=60*c+.5),[0|c,l||0,a]}function C(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(u)}function A(t,e,n){return C(I,t,e,n)}function D(t,e,n){return C(T,t,e,n)}function R(t,e,n){return C(E,t,e,n)}function O(t){return(t%360+360)%360}function P(t){const e=x.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?l(+e[5]):u(+e[5]));const r=O(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?D(r,s,o):"hsv"===e[1]?R(r,s,o):A(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}function M(t,e){var n=k(t);n[0]=O(n[0]+e),n=A(n),t.r=n[0],t.g=n[1],t.b=n[2]}function N(t){if(!t)return;const e=k(t),n=e[0],i=d(e[1]),r=d(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${h(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const L={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},F={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function V(){const t={},e=Object.keys(F),n=Object.keys(L);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,L[s]);s=parseInt(F[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}let U;function B(t){U||(U=V(),U.transparent=[0,0,0,0]);const e=U[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const j=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function z(t){const e=j.exec(t);let n,i,r,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?l(t):c(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?l(n):c(n,0,255)),i=255&(e[4]?l(i):c(i,0,255)),r=255&(e[6]?l(r):c(r,0,255)),{r:n,g:i,b:r,a:s}}}function q(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${h(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,W=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function H(t,e,n){const i=W(h(t.r)),r=W(h(t.g)),s=W(h(t.b));return{r:u($(i+n*(W(h(e.r))-i))),g:u($(r+n*(W(h(e.g))-r))),b:u($(s+n*(W(h(e.b))-s))),a:t.a+n*(e.a-t.a)}}function G(t,e,n){if(t){let i=k(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=A(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function K(t,e){return t?Object.assign(e||{},t):t}function Y(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=u(t[3]))):(e=K(t,{r:0,g:0,b:0,a:1}),e.a=u(e.a)),e}function Q(t){return"r"===t.charAt(0)?z(t):P(t)}class J{constructor(t){if(t instanceof J)return t;const e=typeof t;let n;"object"===e?n=Y(t):"string"===e&&(n=b(t)||B(t)||Q(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=K(this._rgb);return t&&(t.a=h(t.a)),t}set rgb(t){this._rgb=Y(t)}rgbString(){return this._valid?q(this._rgb):void 0}hexString(){return this._valid?_(this._rgb):void 0}hslString(){return this._valid?N(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const s=e===r?.5:e,o=2*s-1,a=n.a-i.a,c=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-c,n.r=255&c*n.r+r*i.r+.5,n.g=255&c*n.g+r*i.g+.5,n.b=255&c*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=H(this._rgb,t._rgb,e)),this}clone(){return new J(this.rgb)}alpha(t){return this._rgb.a=u(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=a(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return G(this._rgb,2,t),this}darken(t){return G(this._rgb,2,-t),this}saturate(t){return G(this._rgb,1,t),this}desaturate(t){return G(this._rgb,1,-t),this}rotate(t){return M(this._rgb,t),this}}
/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
function X(){}const Z=(()=>{let t=0;return()=>t++})();function tt(t){return null===t||"undefined"===typeof t}function et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function nt(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function it(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function rt(t,e){return it(t)?t:e}function st(t,e){return"undefined"===typeof t?e:t}const ot=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,at=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ct(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function lt(t,e,n,i){let r,s,o;if(et(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(nt(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function ut(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function ht(t){if(et(t))return t.map(ht);if(nt(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=ht(t[n[r]]);return e}return t}function dt(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ft(t,e,n,i){if(!dt(t))return;const r=e[t],s=n[t];nt(r)&&nt(s)?pt(r,s,i):e[t]=ht(s)}function pt(t,e,n){const i=et(e)?e:[e],r=i.length;if(!nt(t))return t;n=n||{};const s=n.merger||ft;let o;for(let a=0;a<r;++a){if(o=i[a],!nt(o))continue;const e=Object.keys(o);for(let i=0,r=e.length;i<r;++i)s(e[i],t,o,n)}return t}function gt(t,e){return pt(t,e,{merger:mt})}function mt(t,e,n){if(!dt(t))return;const i=e[t],r=n[t];nt(i)&&nt(r)?gt(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ht(r))}const yt={"":t=>t,x:t=>t.x,y:t=>t.y};function vt(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function bt(t){const e=vt(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}function wt(t,e){const n=yt[e]||(yt[e]=bt(e));return n(t)}function _t(t){return t.charAt(0).toUpperCase()+t.slice(1)}const xt=t=>"undefined"!==typeof t,It=t=>"function"===typeof t,Et=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Tt(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const St=Math.PI,kt=2*St,Ct=kt+St,At=Number.POSITIVE_INFINITY,Dt=St/180,Rt=St/2,Ot=St/4,Pt=2*St/3,Mt=Math.log10,Nt=Math.sign;function Lt(t,e,n){return Math.abs(t-e)<n}function Ft(t){const e=Math.round(t);t=Lt(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Mt(t))),i=t/n,r=i<=1?1:i<=2?2:i<=5?5:10;return r*n}function Vt(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}function Ut(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Bt(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function jt(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function zt(t){return t*(St/180)}function qt(t){return t*(180/St)}function $t(t){if(!it(t))return;let e=1,n=0;while(Math.round(t*e)/e!==t)e*=10,n++;return n}function Wt(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*St&&(s+=kt),{angle:s,distance:r}}function Ht(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Gt(t,e){return(t-e+Ct)%kt-St}function Kt(t){return(t%kt+kt)%kt}function Yt(t,e,n,i){const r=Kt(t),s=Kt(e),o=Kt(n),a=Kt(s-r),c=Kt(o-r),l=Kt(r-s),u=Kt(r-o);return r===s||r===o||i&&s===o||a>c&&l<u}function Qt(t,e,n){return Math.max(e,Math.min(n,t))}function Jt(t){return Qt(t,-32768,32767)}function Xt(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Zt(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,s=0;while(r-s>1)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const te=(t,e,n,i)=>Zt(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),ee=(t,e,n)=>Zt(t,n,(i=>t[i][e]>=n));function ne(t,e,n){let i=0,r=t.length;while(i<r&&t[i]<e)i++;while(r>i&&t[r-1]>n)r--;return i>0||r<t.length?t.slice(i,r):t}const ie=["push","pop","shift","splice","unshift"];function re(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ie.forEach((e=>{const n="_onData"+_t(e),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const r=i.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"===typeof t[n]&&t[n](...e)})),r}})})))}function se(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(ie.forEach((e=>{delete t[e]})),delete t._chartjs)}function oe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ae=function(){return"undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame}();function ce(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ae.call(window,(()=>{i=!1,t.apply(e,n)})))}}function le(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const ue=t=>"start"===t?"left":"end"===t?"right":"center",he=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,de=(t,e,n,i)=>{const r=i?"left":"right";return t===r?n:"center"===t?(e+n)/2:e};function fe(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=Qt(Math.min(te(a,o.axis,l).lo,n?i:te(e,c,o.getPixelForValue(l)).lo),0,i-1)),s=d?Qt(Math.max(te(a,o.axis,u,!0).hi+1,n?0:te(e,c,o.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function pe(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const ge=t=>0===t||1===t,me=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*kt/n),ye=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*kt/n)+1,ve={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Rt),easeOutSine:t=>Math.sin(t*Rt),easeInOutSine:t=>-.5*(Math.cos(St*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>ge(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ge(t)?t:me(t,.075,.3),easeOutElastic:t=>ge(t)?t:ye(t,.075,.3),easeInOutElastic(t){const e=.1125,n=.45;return ge(t)?t:t<.5?.5*me(2*t,e,n):.5+.5*ye(2*t-1,e,n)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-ve.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*ve.easeInBounce(2*t):.5*ve.easeOutBounce(2*t-1)+.5};function be(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function we(t){return be(t)?t:new J(t)}function _e(t){return be(t)?t:new J(t).saturate(.5).darken(.1).hexString()}const xe=["x","y","borderWidth","radius","tension"],Ie=["color","borderColor","backgroundColor"];function Ee(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Ie},numbers:{type:"number",properties:xe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})}function Te(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Se=new Map;function ke(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Se.get(n);return i||(i=new Intl.NumberFormat(t,e),Se.set(n,i)),i}function Ce(t,e,n){return ke(e,n).format(t)}const Ae={values(t){return et(t)?t:""+t},numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=De(t,n)}const o=Mt(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Ce(t,i,c)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Mt(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Ae.numeric.call(this,t,e,n):""}};function De(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Re={formatters:Ae};function Oe(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Re.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}const Pe=Object.create(null),Me=Object.create(null);function Ne(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function Le(t,e,n){return"string"===typeof e?pt(Ne(t,e),n):pt(Ne(t,""),e)}class Fe{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>_e(e.backgroundColor),this.hoverBorderColor=(t,e)=>_e(e.borderColor),this.hoverColor=(t,e)=>_e(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Le(this,t,e)}get(t){return Ne(this,t)}describe(t,e){return Le(Me,t,e)}override(t,e){return Le(Pe,t,e)}route(t,e,n,i){const r=Ne(this,t),s=Ne(this,n),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[i];return nt(t)?Object.assign({},e,t):st(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach((t=>t(this)))}}var Ve=new Fe({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ee,Te,Oe]);function Ue(t){return!t||tt(t.size)||tt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Be(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function je(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,u,h,d;for(c=0;c<a;c++)if(h=n[c],void 0===h||null===h||et(h)){if(et(h))for(l=0,u=h.length;l<u;l++)d=h[l],void 0===d||null===d||et(d)||(o=Be(t,r,s,o,d))}else o=Be(t,r,s,o,h);t.restore();const f=s.length/2;if(f>n.length){for(c=0;c<f;c++)delete r[s[c]];s.splice(0,f)}return o}function ze(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function qe(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function $e(t,e,n,i){We(t,e,n,i,null)}function We(t,e,n,i,r){let s,o,a,c,l,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*Dt;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,g,0,0,kt):t.arc(n,i,g,0,kt),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Pt,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=Pt,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":l=.516*g,c=g-l,o=Math.cos(m+Ot)*c,h=Math.cos(m+Ot)*(r?r/2-l:c),a=Math.sin(m+Ot)*c,d=Math.sin(m+Ot)*(r?r/2-l:c),t.arc(n-h,i-a,l,m-St,m-Rt),t.arc(n+d,i-o,l,m-Rt,m),t.arc(n+h,i+a,l,m,m+Rt),t.arc(n-d,i+o,l,m+Rt,m+St),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=r?r/2:c,t.rect(n-u,i-c,2*u,2*c);break}m+=Ot;case"rectRot":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":m+=Ot;case"cross":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),m+=Ot,h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function He(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ge(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ke(t){t.restore()}function Ye(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Qe(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Je(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),tt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Xe(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,l=n+s.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Ze(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function tn(t,e,n,i,r,s={}){const o=et(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let c,l;for(t.save(),t.font=r.string,Je(t,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&Ze(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),tt(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(l,n,i,s.maxWidth)),t.fillText(l,n,i,s.maxWidth),Xe(t,n,i,l,s),i+=Number(r.lineHeight);t.restore()}function en(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-Rt,St,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,St,Rt,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Rt,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Rt,!0),t.lineTo(n+o.topLeft,i)}const nn=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function sn(t,e){const n=(""+t).match(nn);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const on=t=>+t||0;function an(t,e){const n={},i=nt(e),r=i?Object.keys(e):e,s=nt(t)?i?n=>st(t[n],t[e[n]]):e=>t[e]:()=>t;for(const o of r)n[o]=on(s(o));return n}function cn(t){return an(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ln(t){return an(t,["topLeft","topRight","bottomLeft","bottomRight"])}function un(t){const e=cn(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function hn(t,e){t=t||{},e=e||Ve.font;let n=st(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=st(t.style,e.style);i&&!(""+i).match(rn)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:st(t.family,e.family),lineHeight:sn(st(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:st(t.weight,e.weight),string:""};return r.string=Ue(r),r}function dn(t,e,n,i){let r,s,o,a=!0;for(r=0,s=t.length;r<s;++r)if(o=t[r],void 0!==o&&(void 0!==e&&"function"===typeof o&&(o=o(e),a=!1),void 0!==n&&et(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function fn(t,e,n){const{min:i,max:r}=t,s=at(e,(r-i)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function pn(t,e){return Object.assign(Object.create(t),e)}function gn(t,e=[""],n,i,r=(()=>t[0])){const s=n||t;"undefined"===typeof i&&(i=Rn("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:n=>gn([n,...t],e,s,i)};return new Proxy(o,{deleteProperty(e,n){return delete e[n],delete e._keys,delete t[0][n],!0},get(n,i){return wn(n,i,(()=>Dn(i,e,t,n)))},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(t,e){return On(t).includes(e)},ownKeys(t){return On(t)},set(t,e,n){const i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function mn(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:yn(t,i),setContext:e=>mn(t,e,n,i),override:r=>mn(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty(e,n){return delete e[n],delete t[n],!0},get(t,e,n){return wn(t,e,(()=>_n(t,e,n)))},getOwnPropertyDescriptor(e,n){return e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(e,n){return Reflect.has(t,n)},ownKeys(){return Reflect.ownKeys(t)},set(e,n,i){return t[n]=i,delete e[n],!0}})}function yn(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:It(n)?n:()=>n,isIndexable:It(i)?i:()=>i}}const vn=(t,e)=>t?t+_t(e):e,bn=(t,e)=>nt(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function wn(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function _n(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return It(a)&&o.isScriptable(e)&&(a=xn(e,a,t,n)),et(a)&&a.length&&(a=In(e,a,t,o.isIndexable)),bn(e,a)&&(a=mn(a,r,s&&s[e],o)),a}function xn(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(s,o||i);return a.delete(t),bn(t,c)&&(c=kn(r._scopes,r,t,c)),c}function In(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(t))return e[s.index%e.length];if(nt(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const c of n){const n=kn(i,r,t,c);e.push(mn(n,s,o&&o[t],a))}}return e}function En(t,e,n){return It(t)?t(e,n):t}const Tn=(t,e)=>!0===t?e:"string"===typeof t?wt(e,t):void 0;function Sn(t,e,n,i,r){for(const s of e){const e=Tn(n,s);if(e){t.add(e);const s=En(e._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function kn(t,e,n,i){const r=e._rootScopes,s=En(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let c=Cn(a,o,n,s||n,i);return null!==c&&(("undefined"===typeof s||s===n||(c=Cn(a,o,s,c,i),null!==c))&&gn(Array.from(a),[""],r,s,(()=>An(e,n,i))))}function Cn(t,e,n,i,r){while(n)n=Sn(t,e,n,i,r);return n}function An(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return et(r)&&nt(n)?n:r||{}}function Dn(t,e,n,i){let r;for(const s of e)if(r=Rn(vn(s,t),n),"undefined"!==typeof r)return bn(t,r)?kn(n,i,t,r):r}function Rn(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function On(t){let e=t._keys;return e||(e=t._keys=Pn(t._scopes)),e}function Pn(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}function Mn(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+n,u=e[l],o[a]={r:r.parse(wt(u,s),l)};return o}const Nn=Number.EPSILON||1e-14,Ln=(t,e)=>e<t.length&&!t[e].skip&&t[e],Fn=t=>"x"===t?"y":"x";function Vn(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Ht(s,r),c=Ht(o,s);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=i*l,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function Un(t,e,n){const i=t.length;let r,s,o,a,c,l=Ln(t,0);for(let u=0;u<i-1;++u)c=l,l=Ln(t,u+1),c&&l&&(Lt(e[u],0,Nn)?n[u]=n[u+1]=0:(r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])))}function Bn(t,e,n="x"){const i=Fn(n),r=t.length;let s,o,a,c=Ln(t,0);for(let l=0;l<r;++l){if(o=a,a=c,c=Ln(t,l+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a[`cp1${n}`]=r-s,a[`cp1${i}`]=u-s*e[l]),c&&(s=(c[n]-r)/3,a[`cp2${n}`]=r+s,a[`cp2${i}`]=u+s*e[l])}}function jn(t,e="x"){const n=Fn(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,c,l=Ln(t,0);for(o=0;o<i;++o)if(a=c,c=l,l=Ln(t,o+1),c){if(l){const t=l[e]-c[e];r[o]=0!==t?(l[n]-c[n])/t:0}s[o]=a?l?Nt(r[o-1])!==Nt(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Un(t,r,s),Bn(t,s,e)}function zn(t,e,n){return Math.max(Math.min(t,n),e)}function qn(t,e){let n,i,r,s,o,a=He(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&He(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=zn(r.cp1x,e.left,e.right),r.cp1y=zn(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=zn(r.cp2x,e.left,e.right),r.cp2y=zn(r.cp2y,e.top,e.bottom)))}function $n(t,e,n,i,r){let s,o,a,c;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)jn(t,r);else{let n=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],c=Vn(n,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,n=a}e.capBezierPoints&&qn(t,n)}function Wn(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Hn(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Gn(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const Kn=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Yn(t,e){return Kn(t).getPropertyValue(e)}const Qn=["top","right","bottom","left"];function Jn(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Qn[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Xn=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Zn(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o,a,c=!1;if(Xn(r,s,t.target))o=r,a=s;else{const t=e.getBoundingClientRect();o=i.clientX-t.left,a=i.clientY-t.top,c=!0}return{x:o,y:a,box:c}}function ti(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Kn(n),s="border-box"===r.boxSizing,o=Jn(r,"padding"),a=Jn(r,"border","width"),{x:c,y:l,box:u}=Zn(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/f*n.width/i),y:Math.round((l-d)/p*n.height/i)}}function ei(t,e,n){let i,r;if(void 0===e||void 0===n){const s=Hn(t);if(s){const t=s.getBoundingClientRect(),o=Kn(s),a=Jn(o,"border","width"),c=Jn(o,"padding");e=t.width-c.width-a.width,n=t.height-c.height-a.height,i=Gn(o.maxWidth,s,"clientWidth"),r=Gn(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||At,maxHeight:r||At}}const ni=t=>Math.round(10*t)/10;function ii(t,e,n,i){const r=Kn(t),s=Jn(r,"margin"),o=Gn(r.maxWidth,t,"clientWidth")||At,a=Gn(r.maxHeight,t,"clientHeight")||At,c=ei(t,e,n);let{width:l,height:u}=c;if("content-box"===r.boxSizing){const t=Jn(r,"border","width"),e=Jn(r,"padding");l-=e.width+t.width,u-=e.height+t.height}l=Math.max(0,l-s.width),u=Math.max(0,i?l/i:u-s.height),l=ni(Math.min(l,o,c.maxWidth)),u=ni(Math.min(u,a,c.maxHeight)),l&&!u&&(u=ni(l/2));const h=void 0!==e||void 0!==n;return h&&i&&c.height&&u>c.height&&(u=c.height,l=ni(Math.floor(u*i))),{width:l,height:u}}function ri(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const si=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return t}();function oi(t,e){const n=Yn(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ai(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ci(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function li(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=ai(t,r,n),a=ai(r,s,n),c=ai(s,e,n),l=ai(o,a,n),u=ai(a,c,n);return ai(l,u,n)}const ui=function(t,e){return{x(n){return t+t+e-n},setWidth(t){e=t},textAlign(t){return"center"===t?t:"right"===t?"left":"right"},xPlus(t,e){return t-e},leftForLtr(t,e){return t-e}}},hi=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function di(t,e,n){return t?ui(e,n):hi()}function fi(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function pi(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function gi(t){return"angle"===t?{between:Yt,compare:Gt,normalize:Kt}:{between:Xt,compare:(t,e)=>t-e,normalize:t=>t}}function mi({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function yi(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=gi(i),c=e.length;let l,u,{start:h,end:d,loop:f}=t;if(f){for(h+=c,d+=c,l=0,u=c;l<u;++l){if(!o(a(e[h%c][i]),r,s))break;h--,d--}h%=c,d%=c}return d<h&&(d+=c),{start:h,end:d,loop:f,style:t.style}}function vi(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:c,normalize:l}=gi(i),{start:u,end:h,loop:d,style:f}=yi(t,e,n),p=[];let g,m,y,v=!1,b=null;const w=()=>c(r,y,g)&&0!==a(r,y),_=()=>0===a(s,g)||c(s,y,g),x=()=>v||w(),I=()=>!v||_();for(let E=u,T=u;E<=h;++E)m=e[E%o],m.skip||(g=l(m[i]),g!==y&&(v=c(g,r,s),null===b&&x()&&(b=0===a(g,r)?E:T),null!==b&&I()&&(p.push(mi({start:b,end:E,loop:d,count:o,style:f})),b=null),T=E,y=g));return null!==b&&p.push(mi({start:b,end:h,loop:d,count:o,style:f})),p}function bi(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=vi(i[r],t.points,e);s.length&&n.push(...s)}return n}function wi(t,e,n,i){let r=0,s=e-1;if(n&&!i)while(r<e&&!t[r].skip)r++;while(r<e&&t[r].skip)r++;r%=e,n&&(s+=r);while(s>r&&t[s%e].skip)s--;return s%=e,{start:r,end:s}}function _i(t,e,n,i){const r=t.length,s=[];let o,a=e,c=t[e];for(o=e+1;o<=n;++o){const n=t[o%r];n.skip||n.stop?c.skip||(i=!1,s.push({start:e%r,end:(o-1)%r,loop:i}),e=a=n.stop?o:null):(a=o,c.skip&&(e=o)),c=n}return null!==a&&s.push({start:e%r,end:a%r,loop:i}),s}function xi(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=wi(n,r,s,i);if(!0===i)return Ii(t,[{start:o,end:a,loop:s}],n,e);const c=a<o?a+r:a,l=!!t._fullLoop&&0===o&&a===r-1;return Ii(t,_i(n,o,c,l),n,e)}function Ii(t,e,n,i){return i&&i.setContext&&n?Ei(t,e,n,i):e}function Ei(t,e,n,i){const r=t._chart.getContext(),s=Ti(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[];let u=s,h=e[0].start,d=h;function f(t,e,i,r){const s=a?-1:1;if(t!==e){t+=c;while(n[t%c].skip)t-=s;while(n[e%c].skip)e+=s;t%c!==e%c&&(l.push({start:t%c,end:e%c,loop:i,style:r}),u=r,h=e%c)}}for(const p of e){h=a?h:p.start;let t,e=n[h%c];for(d=h+1;d<=p.end;d++){const s=n[d%c];t=Ti(i.setContext(pn(r,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:o}))),Si(t,u)&&f(h,d-1,p.loop,u),e=s,u=t}h<d-1&&f(h,d-1,p.loop,u)}return l}function Ti(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Si(t,e){if(!e)return!1;const n=[],i=function(t,e){return be(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}
/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
class ki{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],s=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=ae.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ci=new ki;const Ai="transparent",Di={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=we(t||Ai),r=i.valid&&we(e||Ai);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ri{constructor(t,e,n,i){const r=e[n];i=dn([t.to,i,r,t.from]);const s=dn([t.from,r,i]);this._active=!0,this._fn=t.fn||Di[t.type||typeof s],this._easing=ve[t.easing]||ve.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=dn([t.to,e,i,t.from]),this._from=dn([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||e<n),!this._active)return this._target[i]=o,void this._notify(!0);e<0?this._target[i]=r:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class Oi{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!nt(t))return;const e=Object.keys(Ve.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const r=t[i];if(!nt(r))return;const s={};for(const t of e)s[t]=r[t];(et(r.properties)&&r.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,s)}))}))}_animateOptions(t,e){const n=e.options,i=Mi(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&Pi(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const c=s[a];if("$"===c.charAt(0))continue;if("options"===c){i.push(...this._animateOptions(t,e));continue}const l=e[c];let u=r[c];const h=n.get(c);if(u){if(h&&u.active()){u.update(h,l,o);continue}u.cancel()}h&&h.duration?(r[c]=u=new Ri(h,t,c,l),i.push(u)):t[c]=l}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Ci.add(this._chart,n),!0):void 0}}function Pi(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const e=t[i[r]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}function Mi(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}function Ni(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function Li(t,e,n){if(!1===n)return!1;const i=Ni(t,n),r=Ni(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Fi(t){let e,n,i,r;return nt(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}function Vi(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Ui(t,e,n,i={}){const r=t.keys,s="single"===i.mode;let o,a,c,l;if(null!==e){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===n){if(i.all)continue;break}l=t.values[c],it(l)&&(s||0===e||Nt(e)===Nt(l))&&(e+=l)}return e}}function Bi(t){const e=Object.keys(t),n=new Array(e.length);let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],n[i]={x:s,y:t[s]};return n}function ji(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function zi(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function qi(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function $i(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Wi(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function Hi(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,u=zi(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[c]:n,[l]:s}=t,h=t._stacks||(t._stacks={});d=h[l]=$i(r,u,n),d[a]=s,d._top=Wi(d,o,!0,i.type),d._bottom=Wi(d,o,!1,i.type);const p=d._visualValues||(d._visualValues={});p[a]=s}}function Gi(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Ki(t,e){return pn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Yi(t,e,n){return pn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Qi(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const Ji=t=>"reset"===t||"none"===t,Xi=(t,e)=>e?t:Object.assign({},t),Zi=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Vi(n,!0),values:null};class tr{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ji(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Qi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=st(n.xAxisID,Gi(t,"x")),s=e.yAxisID=st(n.yAxisID,Gi(t,"y")),o=e.rAxisID=st(n.rAxisID,Gi(t,"r")),a=e.indexAxis,c=e.iAxisID=i(a,r,s,o),l=e.vAxisID=i(a,s,r,o);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&se(this._data,this),t._stacked&&Qi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(nt(e))this._data=Bi(e);else if(n!==e){if(n){se(n,this);const t=this._cachedMeta;Qi(t),t._parsed=[]}e&&Object.isExtensible(e)&&re(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=ji(e.vScale,e),e.stack!==n.stack&&(i=!0,Qi(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&Hi(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,c,l,u=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,l=i;else{l=et(i[t])?this.parseArrayData(n,i,t,e):nt(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===c[o]||h&&c[o]<h[o];for(a=0;a<e;++a)n._parsed[a+t]=c=l[a],u&&(r()&&(u=!1),h=c);n._sorted=u}s&&Hi(this,l)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:s}=t,o=r.axis,a=s.axis,c=r.getLabels(),l=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:l||r.parse(c[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:s}=t,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+n,u=e[l],o[a]={x:r.parse(u[0],l),y:s.parse(u[1],l)};return o}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+n,d=e[h],c[l]={x:r.parse(wt(d,o),h),y:s.parse(wt(d,a),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,s=e[t.axis],o={keys:Vi(i,!0),values:e._stacks[t.axis]._visualValues};return Ui(o,s,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let s=null===r?NaN:r;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,s=Ui(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,s=i.length,o=this._getOtherScale(t),a=Zi(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:u}=qi(o);let h,d;function f(){d=i[h];const e=d[o.axis];return!it(d[t.axis])||l>e||u<e}for(h=0;h<s;++h)if(!f()&&(this.updateRangeFromParsed(c,t,d,a),r))break;if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(c,t,d,a);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i][t.axis],it(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Fi(st(this.options.clip,Li(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,c=this.options.drawActiveElementsOnTop;let l;for(n.dataset&&n.dataset.draw(t,r,o,a),l=o;l<o+a;++l){const e=i[l];e.hidden||(e.active&&c?s.push(e):e.draw(t,r))}for(l=0;l<s.length;++l)s[l].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=Yi(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Ki(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,s=t+"-"+e,o=r[s],a=this.enableOptionSharing&&xt(n);if(o)return Xi(o,a);const c=this.chart.config,l=c.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),l),d=Object.keys(Ve.elements[t]),f=()=>this.getContext(n,i,e),p=c.resolveNamedOptions(h,d,f,u);return p.$shared&&(p.$shared=a,r[s]=Object.freeze(Xi(p,a))),p}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,s=`animation-${e}`,o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(t,n,e))}const c=new Oi(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ji(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:s}}updateElement(t,e,n,i){Ji(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Ji(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[o,a,c]of this._syncList)this[o](a,c);this._syncList=[];const i=n.length,r=e.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(r),o=t;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Qi(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function er(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=oe(i.sort(((t,e)=>t-e)))}return t._cache.$bar}function nr(t){const e=t.iScale,n=er(e,t.type);let i,r,s,o,a=e._length;const c=()=>{32767!==s&&-32768!==s&&(xt(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=e.getPixelForValue(n[i]),c();for(o=void 0,i=0,r=e.ticks.length;i<r;++i)s=e.getPixelForTick(i),c();return a}function ir(t,e,n,i){const r=n.barThickness;let s,o;return tt(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function rr(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const c=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const l=s-(s-Math.min(o,a))/2*c,u=Math.abs(a-o)/2*c;return{chunk:u/i,ratio:n.barPercentage,start:l}}function sr(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function or(t,e,n,i){return et(t)?sr(t,e,n,i):e[n.axis]=n.parse(t,i),e}function ar(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,c=[];let l,u,h,d;for(l=n,u=n+i;l<u;++l)d=e[l],h={},h[r.axis]=a||r.parse(o[l],l),c.push(or(d,h,s,l));return c}function cr(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function lr(t,e,n){return 0!==t?Nt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function ur(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function hr(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:c,top:l,bottom:u}=ur(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=l:(n._bottom||0)===i?r=u:(s[dr(u,o,a,c)]=!0,r=l)),s[dr(r,o,a,c)]=!0,t.borderSkipped=s}function dr(t,e,n,i){return i?(t=fr(t,e,n),t=pr(t,n,e)):t=pr(t,e,n),t}function fr(t,e,n){return t===e?n:t===n?e:t}function pr(t,e,n){return"start"===t?e:"end"===t?n:t}function gr(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}o(tr,"defaults",{}),o(tr,"datasetElementType",null),o(tr,"dataElementType",null);class mr extends tr{parsePrimitiveData(t,e,n,i){return ar(t,e,n,i)}parseArrayData(t,e,n,i){return ar(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c="x"===r.axis?o:a,l="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(wt(p,c),h),u.push(or(wt(p,l),f,s,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),s=r._custom,o=cr(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),c=o.isHorizontal(),l=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=r||tt(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,l),p=(e._stacks||{})[o.axis],g={horizontal:c,base:n.base,enableBorderRadius:!p||cr(e._custom)||s===p._top||s===p._bottom,x:c?n.head:f.center,y:c?f.center:n.head,height:c?f.size:Math.abs(n.size),width:c?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;hr(g,m,p,s),gr(g,m,l.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),r=n.options.stacked,s=[],o=t=>{const n=t.controller.getParsed(e),i=n&&n[t.vScale.axis];if(tt(i)||isNaN(i))return!0};for(const a of i)if((void 0===e||!o(a))&&((!1===r||-1===s.indexOf(a.stack)||void 0===r&&void 0===a.stack)&&s.push(a.stack),a.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,s;for(r=0,s=e.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=t.barThickness,a=o||nr(e);return{min:a,pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(t),c=a._custom,l=cr(c);let u,h,d=a[e.axis],f=0,p=n?this.applyStack(e,a,n):d;p!==d&&(f=p-d,p=d),l&&(d=c.barStart,p=c.barEnd-c.barStart,0!==d&&Nt(d)!==Nt(c.barEnd)&&(f=0),f+=d);const g=tt(r)||l?f:r;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=lr(h,e,o)*s,d===o&&(m-=h/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),c=Math.min(t,r),f=Math.max(t,r);m=Math.max(Math.min(m,f),c),u=m+h,n&&!l&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=Nt(h)*e.getLineWidthForValue(o)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,s=st(i.maxBarThickness,1/0);let o,a;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,c="flex"===i.barThickness?rr(t,e,i,n):ir(t,e,i,n),l=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);o=c.start+c.chunk*l+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}}o(mr,"id","bar"),o(mr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(mr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class yr extends tr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=st(t[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let s=0;s<r.length;s++){const t=e[n+s];r[s]._custom=st(t&&t.r&&+t.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),c=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(e,i),l=s.axis,u=o.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!r&&this.getParsed(h),d={},f=d[l]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[l]),p=d[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),c&&(d.options=a||this.resolveDataElementOptions(h,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=st(n&&n._custom,r),i}}function vr(t,e,n){let i=1,r=1,s=0,o=0;if(e<kt){const a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),d=Math.sin(c),f=(t,e,i)=>Yt(t,a,c,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>Yt(t,a,c,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,l,h),m=f(Rt,u,d),y=p(St,l,h),v=p(St+Rt,u,d);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}o(yr,"id","bubble"),o(yr,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(yr,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class br extends tr{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=t=>+n[t];if(nt(n[t])){const{key:t="value"}=this._parsing;o=e=>+wt(n[e],t)}for(r=t,s=t+e;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return zt(this.options.rotation-90)}_getCircumference(){return zt(this.options.circumference)}_getRotationExtents(){let t=kt,e=-kt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min(ot(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:l,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:f,offsetY:p}=vr(u,l,a),g=(n.width-s)/h,m=(n.height-s)/d,y=Math.max(Math.min(g,m)/2,0),v=at(this.options.radius,y),b=Math.max(v*a,0),w=(v-b)/this._getVisibleDatasetWeightTotal();this.offsetX=f*v,this.offsetY=p*v,i.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/kt)}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options,c=a.animation,l=(o.left+o.right)/2,u=(o.top+o.bottom)/2,h=r&&c.animateScale,d=h?0:this.innerRadius,f=h?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(e,i);let m,y=this._getRotation();for(m=0;m<e;++m)y+=this._circumference(m,r);for(m=e;m<e+n;++m){const e=this._circumference(m,r),n=t[m],s={x:l+this.offsetX,y:u+this.offsetY,startAngle:y,endAngle:y+e,circumference:e,outerRadius:f,innerRadius:d};g&&(s.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),y+=e,this.updateElement(n,m,s,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?kt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ce(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,s,o,a;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),t=s.data,o=s.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(st(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(br,"id","doughnut"),o(br,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(br,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),o(br,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const s=t.getDatasetMeta(0),o=s.controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class wr extends tr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=fe(e,i,s);this._drawStart=o,this._drawCount=a,pe(e)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:c},t),this.updateElements(i,o,a,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(e,i),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=Ut(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,y=e+n,v=t.length;let b=e>0&&this.getParsed(e-1);for(let w=0;w<v;++w){const n=t[w],f=m?n:{};if(w<e||w>=y){f.skip=!0;continue}const v=this.getParsed(w),_=tt(v[d]),x=f[h]=s.getPixelForValue(v[h],w),I=f[d]=r||_?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],w);f.skip=isNaN(x)||isNaN(I)||_,f.stop=w>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=c.data[w]),u&&(f.options=l||this.resolveDataElementOptions(w,n.active?"active":i)),m||this.updateElement(n,w,f,i),b=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}o(wr,"id","line"),o(wr,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(wr,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class _r extends tr{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ce(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return Mn.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),s=Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0),o=(r-s)/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.options,a=o.animation,c=this._cachedMeta.rScale,l=c.xCenter,u=c.yCenter,h=c.getIndexAngle(0)-.5*St;let d,f=h;const p=360/this.countVisibleElements();for(d=0;d<e;++d)f+=this._computeAngle(d,i,p);for(d=e;d<e+n;d++){const e=t[d];let n=f,o=f+this._computeAngle(d,i,p),g=s.getDataVisibility(d)?c.getDistanceFromCenterForValue(this.getParsed(d).r):0;f=o,r&&(a.animateScale&&(g=0),a.animateRotate&&(n=o=h));const m={x:l,y:u,innerRadius:0,outerRadius:g,startAngle:n,endAngle:o,options:this.resolveDataElementOptions(d,e.active?"active":i)};this.updateElement(e,d,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?zt(this.resolveDataElementOptions(t,e).angle||n):0}}o(_r,"id","polarArea"),o(_r,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(_r,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const s=t.getDatasetMeta(0),o=s.controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class xr extends br{}o(xr,"id","pie"),o(xr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Ir extends tr{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Mn.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),c=s?r.xCenter:a.x,l=s?r.yCenter:a.y,u={x:c,y:l,angle:a.angle,skip:isNaN(c)||isNaN(l),options:n};this.updateElement(e,o,u,i)}}}o(Ir,"id","radar"),o(Ir,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(Ir,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Er extends tr{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:s}=fe(e,n,i);if(this._drawStart=r,this._drawCount=s,pe(e)&&(r=0,s=n.length),this.options.showLine){const{dataset:r,_dataset:s}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},t)}this.updateElements(n,r,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,l=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(l),h=this.includeOptions(i,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=Ut(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let v=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),l=y?e:{},p=tt(n[f]),w=l[d]=s.getPixelForValue(n[d],b),_=l[f]=r||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);l.skip=isNaN(w)||isNaN(_)||p,l.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(l.parsed=n,l.raw=c.data[b]),h&&(l.options=u||this.resolveDataElementOptions(b,e.active?"active":i)),y||this.updateElement(e,b,l,i),v=n}this.updateSharedOptions(u,i,l)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,s)/2}}o(Er,"id","scatter"),o(Er,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(Er,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Tr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Sr{static override(t){Object.assign(Sr.prototype,t)}constructor(t){o(this,"options",void 0),this.options=t||{}}init(){}formats(){return Tr()}parse(){return Tr()}format(){return Tr()}add(){return Tr()}diff(){return Tr()}startOf(){return Tr()}endOf(){return Tr()}}var kr={_date:Sr};function Cr(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const t=a._reversePixels?ee:te;if(!i)return t(s,e,n);if(r._sharedOptions){const i=s[0],r="function"===typeof i.getRange&&i.getRange(e);if(r){const i=t(s,e,n-r),o=t(s,e,n+r);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function Ar(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=s.length;a<c;++a){const{index:t,data:n}=s[a],{lo:c,hi:l}=Cr(s[a],e,o,r);for(let e=c;e<=l;++e){const r=n[e];r.skip||i(r,t,e)}}}function Dr(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}function Rr(t,e,n,i,r){const s=[];if(!r&&!t.isPointInArea(e))return s;const o=function(n,o,a){(r||He(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:o,index:a})};return Ar(t,n,e,o,!0),s}function Or(t,e,n,i){let r=[];function s(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:c}=Wt(t,{x:e.x,y:e.y});Yt(c,o,a)&&r.push({element:t,datasetIndex:n,index:s})}return Ar(t,n,e,s),r}function Pr(t,e,n,i,r,s){let o=[];const a=Dr(n);let c=Number.POSITIVE_INFINITY;function l(n,l,u){const h=n.inRange(e.x,e.y,r);if(i&&!h)return;const d=n.getCenterPoint(r),f=!!s||t.isPointInArea(d);if(!f&&!h)return;const p=a(e,d);p<c?(o=[{element:n,datasetIndex:l,index:u}],c=p):p===c&&o.push({element:n,datasetIndex:l,index:u})}return Ar(t,n,e,l),o}function Mr(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?Pr(t,e,n,i,r,s):Or(t,e,n,r):[]}function Nr(t,e,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return Ar(t,n,e,((t,i,c)=>{t[o](e[n],r)&&(s.push({element:t,datasetIndex:i,index:c}),a=a||t.inRange(e.x,e.y,r))})),i&&!a?[]:s}var Lr={evaluateInteractionItems:Ar,modes:{index(t,e,n,i){const r=ti(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Rr(t,r,s,i,o):Mr(t,r,s,!1,i,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&c.push({element:n,datasetIndex:t.index,index:e})})),c):[]},dataset(t,e,n,i){const r=ti(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Rr(t,r,s,i,o):Mr(t,r,s,!1,i,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point(t,e,n,i){const r=ti(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Rr(t,r,s,i,o)},nearest(t,e,n,i){const r=ti(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Mr(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=ti(e,t);return Nr(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=ti(e,t);return Nr(t,r,"y",n.intersect,i)}}};const Fr=["left","top","right","bottom"];function Vr(t,e){return t.filter((t=>t.pos===e))}function Ur(t,e){return t.filter((t=>-1===Fr.indexOf(t.pos)&&t.box.axis===e))}function Br(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function jr(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function zr(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Fr.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}function qr(t,e){const n=zr(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,c=n[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*i:o&&e.availableWidth,a.height=r):(a.width=i,a.height=l?l*r:o&&e.availableHeight)}return n}function $r(t){const e=jr(t),n=Br(e.filter((t=>t.box.fullSize)),!0),i=Br(Vr(e,"left"),!0),r=Br(Vr(e,"right")),s=Br(Vr(e,"top"),!0),o=Br(Vr(e,"bottom")),a=Ur(e,"x"),c=Ur(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:Vr(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function Wr(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Hr(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Gr(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!nt(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[r]+=n.size}s.getPadding&&Hr(o,s.getPadding());const a=Math.max(0,e.outerWidth-Wr(o,t,"left","right")),c=Math.max(0,e.outerHeight-Wr(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function Kr(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Yr(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function Qr(t,e,n,i){const r=[];let s,o,a,c,l,u;for(s=0,o=t.length,l=0;s<o;++s){a=t[s],c=a.box,c.update(a.width||e.w,a.height||e.h,Yr(a.horizontal,e));const{same:o,other:h}=Gr(e,n,a,i);l|=o&&r.length,u=u||h,c.fullSize||r.push(a)}return l&&Qr(r,e,n,i)||u}function Jr(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Xr(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/c.weight||1;if(a.horizontal){const i=e.w*l,s=c.size||t.height;xt(c.start)&&(o=c.start),t.fullSize?Jr(t,r.left,o,n.outerWidth-r.right-r.left,s):Jr(t,e.left+c.placed,o,i,s),c.start=o,c.placed+=i,o=t.bottom}else{const i=e.h*l,o=c.size||t.width;xt(c.start)&&(s=c.start),t.fullSize?Jr(t,s,r.top,o,n.outerHeight-r.bottom-r.top):Jr(t,s,e.top+c.placed,o,i),c.start=s,c.placed+=i,s=t.right}}e.x=s,e.y=o}var Zr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=un(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=$r(t.boxes),c=a.vertical,l=a.horizontal;lt(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const u=c.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);Hr(d,un(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=qr(c.concat(l),h);Qr(a.fullSize,f,h,p),Qr(c,f,h,p),Qr(l,f,h,p)&&Qr(c,f,h,p),Kr(f),Xr(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Xr(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},lt(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class ts{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class es extends ts{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ns="$chartjs",is={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rs=t=>null===t||""===t;function ss(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[ns]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",rs(r)){const e=oi(t,"width");void 0!==e&&(t.width=e)}if(rs(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=oi(t,"height");void 0!==e&&(t.height=e)}return t}const os=!!si&&{passive:!0};function as(t,e,n){t.addEventListener(e,n,os)}function cs(t,e,n){t.canvas.removeEventListener(e,n,os)}function ls(t,e){const n=is[t.type]||t.type,{x:i,y:r}=ti(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}function us(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function hs(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||us(n.addedNodes,i),e=e&&!us(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function ds(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||us(n.removedNodes,i),e=e&&!us(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const fs=new Map;let ps=0;function gs(){const t=window.devicePixelRatio;t!==ps&&(ps=t,fs.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function ms(t,e){fs.size||window.addEventListener("resize",gs),fs.set(t,e)}function ys(t){fs.delete(t),fs.size||window.removeEventListener("resize",gs)}function vs(t,e,n){const i=t.canvas,r=i&&Hn(i);if(!r)return;const s=ce(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),o=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||s(n,i)}));return o.observe(r),ms(t,s),o}function bs(t,e,n){n&&n.disconnect(),"resize"===e&&ys(t)}function ws(t,e,n){const i=t.canvas,r=ce((e=>{null!==t.ctx&&n(ls(e,t))}),t);return as(i,e,r),r}class _s extends ts{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(ss(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[ns])return!1;const n=e[ns].initial;["height","width"].forEach((t=>{const i=n[t];tt(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e[ns],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:hs,detach:ds,resize:vs},s=r[e]||ws;i[e]=s(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;const r={attach:bs,detach:bs,resize:bs},s=r[e]||cs;s(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return ii(t,e,n,i)}isAttached(t){const e=Hn(t);return!(!e||!e.isConnected)}}function xs(t){return!Wn()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?es:_s}class Is{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Ut(this.x)&&Ut(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}function Es(t,e){const n=t.options.ticks,i=Ts(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?ks(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return Cs(e,l,s,o/r),l;const u=Ss(s,e,r);if(o>0){let t,n;const i=o>1?Math.round((c-a)/(o-1)):null;for(As(e,l,u,tt(i)?0:a-i,a),t=0,n=o-1;t<n;t++)As(e,l,u,s[t],s[t+1]);return As(e,l,u,c,tt(i)?e.length:c+i),l}return As(e,l,u),l}function Ts(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function Ss(t,e,n){const i=Ds(t),r=e.length/n;if(!i)return Math.max(r,1);const s=Vt(i);for(let o=0,a=s.length-1;o<a;o++){const t=s[o];if(t>r)return t}return Math.max(r,1)}function ks(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function Cs(t,e,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=n[s*i])}function As(t,e,n,i,r){const s=st(i,0),o=Math.min(st(r,t.length),t.length);let a,c,l,u=0;n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),l=s;while(l<0)u++,l=Math.round(s+u*n);for(c=Math.max(s,0);c<o;c++)c===l&&(e.push(t[c]),u++,l=Math.round(s+u*n))}function Ds(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}o(Is,"defaults",{}),o(Is,"defaultRoutes",void 0);const Rs=t=>"left"===t?"right":"right"===t?"left":t,Os=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Ps=(t,e)=>Math.min(e||t,t);function Ms(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Ns(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let c,l=t.getPixelForTick(r);if(!(n&&(c=1===i?Math.max(l-s,o-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Ls(t,e){lt(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}function Fs(t){return t.drawTicks?t.tickLength:0}function Vs(t,e){if(!t.display)return 0;const n=hn(t.font,e),i=un(t.padding),r=et(t.text)?t.text.length:1;return r*n.lineHeight+i.height}function Us(t,e){return pn(t,{scale:e,type:"scale"})}function Bs(t,e,n){return pn(t,{tick:n,index:e,type:"tick"})}function js(t,e,n){let i=ue(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=Rs(i)),i}function zs(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:u}=c;let h,d,f,p=0;const g=o-r,m=a-s;if(t.isHorizontal()){if(d=he(i,s,a),nt(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(l.bottom+l.top)/2+g-e:Os(t,n,e);h=a-s}else{if(nt(n)){const t=Object.keys(n)[0],i=n[t];d=u[t].getPixelForValue(i)-m+e}else d="center"===n?(l.left+l.right)/2-m+e:Os(t,n,e);f=he(i,o,r),p="left"===n?-Rt:Rt}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}class qs extends Is{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=rt(t,Number.POSITIVE_INFINITY),e=rt(e,Number.NEGATIVE_INFINITY),n=rt(n,Number.POSITIVE_INFINITY),i=rt(i,Number.NEGATIVE_INFINITY),{min:rt(t,n),max:rt(e,i),minDefined:it(t),maxDefined:it(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,c=o.length;a<c;++a)e=o[a].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:rt(n,rt(i,n)),max:rt(i,rt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){const e=this._labelItems||(this._labelItems=this._computeLabelItems(t));return e}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ct(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=fn(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Ms(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Es(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ct(this.options.afterUpdate,[this])}beforeSetDimensions(){ct(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ct(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ct(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ct(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=ct(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){ct(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ct(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Ps(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let s,o,a,c=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const l=this._getLabelSizes(),u=l.widest.width,h=l.highest.height,d=Qt(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(t.offset?.5:1)),o=this.maxHeight-Fs(t.grid)-e.padding-Vs(t.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),c=qt(Math.min(Math.asin(Qt((l.highest.height+6)/s,-1,1)),Math.asin(Qt(o/a,-1,1))-Math.asin(Qt(h/a,-1,1)))),c=Math.max(i,Math.min(r,c))),this.labelRotation=c}afterCalculateLabelRotation(){ct(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ct(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=Vs(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=Fs(r)+s):(t.height=this.maxHeight,t.width=Fs(r)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,c=zt(this.labelRotation),l=Math.cos(c),u=Math.sin(c);if(o){const e=n.mirror?0:u*r.width+l*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:l*r.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,u,l)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,c="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?c?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-l+s)*this.width/(this.width-l),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ct(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)tt(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Ms(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(e/Ps(e,n));let c,l,u,h,d,f,p,g,m,y,v,b=0,w=0;for(c=0;c<e;c+=a){if(h=t[c].label,d=this._resolveTickFontOptions(c),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,tt(h)||et(h)){if(et(h))for(l=0,u=h.length;l<u;++l)v=h[l],tt(v)||et(v)||(m=Be(i,p.data,p.gc,m,v),y+=g)}else m=Be(i,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),w=Math.max(y,w)}Ls(r,e);const _=s.indexOf(b),x=o.indexOf(w),I=t=>({width:s[t]||0,height:o[t]||0});return{first:I(0),last:I(e-1),widest:I(_),highest:I(x),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Jt(this._alignToPixels?ze(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=Bs(this.getContext(),t,n))}return this.$context||(this.$context=Us(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=zt(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,c=this.isHorizontal(),l=this.ticks,u=l.length+(a?1:0),h=Fs(r),d=[],f=o.setContext(this.getContext()),p=f.display?f.width:0,g=p/2,m=function(t){return ze(n,t,p)};let y,v,b,w,_,x,I,E,T,S,k,C;if("top"===s)y=m(this.bottom),x=this.bottom-h,E=y-g,S=m(t.top)+g,C=t.bottom;else if("bottom"===s)y=m(this.top),S=t.top,C=m(t.bottom)-g,x=y+g,E=this.top+h;else if("left"===s)y=m(this.right),_=this.right-h,I=y-g,T=m(t.left)+g,k=t.right;else if("right"===s)y=m(this.left),T=t.left,k=m(t.right)-g,_=y+g,I=this.left+h;else if("x"===e){if("center"===s)y=m((t.top+t.bottom)/2+.5);else if(nt(s)){const t=Object.keys(s)[0],e=s[t];y=m(this.chart.scales[t].getPixelForValue(e))}S=t.top,C=t.bottom,x=y+g,E=x+h}else if("y"===e){if("center"===s)y=m((t.left+t.right)/2);else if(nt(s)){const t=Object.keys(s)[0],e=s[t];y=m(this.chart.scales[t].getPixelForValue(e))}_=y-g,I=_-h,T=t.left,k=t.right}const A=st(i.ticks.maxTicksLimit,u),D=Math.max(1,Math.ceil(u/A));for(v=0;v<u;v+=D){const t=this.getContext(v),e=r.setContext(t),i=o.setContext(t),s=e.lineWidth,l=e.color,u=i.dash||[],h=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;b=Ns(this,v,a),void 0!==b&&(w=ze(n,b,s),c?_=I=T=k=w:x=E=S=C=w,d.push({tx1:_,ty1:x,tx2:I,ty2:E,x1:T,y1:S,x2:k,y2:C,width:s,color:l,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=u,this._borderValue=y,d}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:c,padding:l,mirror:u}=r,h=Fs(n.grid),d=h+l,f=u?-l:d,p=-zt(this.labelRotation),g=[];let m,y,v,b,w,_,x,I,E,T,S,k,C="middle";if("top"===i)_=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,w=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,w=t.x}else if("x"===e){if("center"===i)_=(t.top+t.bottom)/2+d;else if(nt(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)+d}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)w=(t.left+t.right)/2-d;else if(nt(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===a?C="top":"end"===a&&(C="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const t=r.setContext(this.getContext(m));I=this.getPixelForTick(m)+r.labelOffset,E=this._resolveTickFontOptions(m),T=E.lineHeight,S=et(b)?b.length:1;const e=S/2,n=t.color,a=t.textStrokeColor,l=t.textStrokeWidth;let h,d=x;if(s?(w=I,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),k="top"===i?"near"===c||0!==p?-S*T+T/2:"center"===c?-A.highest.height/2-e*T+T:-A.highest.height+T/2:"near"===c||0!==p?T/2:"center"===c?A.highest.height/2-e*T:A.highest.height-S*T,u&&(k*=-1),0===p||t.showLabelBackdrop||(w+=T/2*Math.sin(p))):(_=I,k=(1-S)*T/2),t.showLabelBackdrop){const e=un(t.backdropPadding),n=A.heights[m],i=A.widths[m];let r=k-e.top,s=0-e.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n;break}switch(x){case"center":s-=i/2;break;case"right":s-=i;break}h={left:s,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:E,textOffset:k,options:{rotation:p,color:n,strokeColor:a,strokeWidth:l,textAlign:d,textBaseline:C,translation:[w,_],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options,n=-zt(this.labelRotation);if(n)return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=this._getLabelSizes(),o=t+r,a=s.widest.width;let c,l;return"left"===e?i?(l=this.right+r,"near"===n?c="left":"center"===n?(c="center",l+=a/2):(c="right",l+=a)):(l=this.right-o,"near"===n?c="right":"center"===n?(c="center",l-=a/2):(c="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?c="right":"center"===n?(c="center",l-=a/2):(c="left",l-=a)):(l=this.left+o,"near"===n?c="left":"center"===n?(c="center",l+=a/2):(c="right",l=this.right)):c="right",{textAlign:c,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks,i=n.findIndex((e=>e.value===t));if(i>=0){const t=e.setContext(this.getContext(i));return t.lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const o=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,s=i.length;r<s;++r){const t=i[r];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,l,u,h;this.isHorizontal()?(c=ze(t,this.left,s)-s/2,l=ze(t,this.right,o)+o/2,u=h=a):(u=ze(t,this.top,s)-s/2,h=ze(t,this.bottom,o)+o/2,c=l=a),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(c,u),e.lineTo(l,h),e.stroke(),e.restore()}drawLabels(t){const e=this.options.ticks;if(!e.display)return;const n=this.ctx,i=this._computeLabelArea();i&&Ge(n,i);const r=this.getLabelItems(t);for(const s of r){const t=s.options,e=s.font,i=s.label,r=s.textOffset;tn(n,i,0,r,e,t)}i&&Ke(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=hn(n.font),s=un(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===e||"center"===e||nt(e)?(a+=s.bottom,et(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:c,titleY:l,maxWidth:u,rotation:h}=zs(this,a,e,o);tn(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:js(o,e,i),textBaseline:"middle",translation:[c,l]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=st(t.grid&&t.grid.z,-1),i=st(t.border&&t.border.z,0);return this._isVisible()&&this.draw===qs.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=e.length;r<s;++r){const s=e[r];s[n]!==this.id||t&&s.type!==t||i.push(s)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return hn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class $s{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;Gs(e)&&(n=this.register(e));const i=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,Ws(t,s,n),this.override&&Ve.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in Ve[i]&&(delete Ve[i][n],this.override&&delete Pe[n])}}function Ws(t,e,n){const i=pt(Object.create(null),[n?Ve.get(n):{},Ve.get(e),t.defaults]);Ve.set(e,i),t.defaultRoutes&&Hs(e,t.defaultRoutes),t.descriptors&&Ve.describe(e,t.descriptors)}function Hs(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");Ve.route(s,r,c,a)}))}function Gs(t){return"id"in t&&"defaults"in t}class Ks{constructor(){this.controllers=new $s(tr,"datasets",!0),this.elements=new $s(Is,"elements"),this.plugins=new $s(Object,"plugins"),this.scales=new $s(qs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):lt(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=_t(t);ct(n["before"+i],[],n),e[t](n),ct(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var Ys=new Ks;class Qs{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin,s=t[n],o=[e,i,r.options];if(!1===ct(s,o,t)&&i.cancelable)return!1}return!0}invalidate(){tt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=st(n.options&&n.options.plugins,{}),r=Js(n);return!1!==i||e?Zs(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Js(t){const e={},n=[],i=Object.keys(Ys.plugins.items);for(let s=0;s<i.length;s++)n.push(Ys.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const t=r[s];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}function Xs(t,e){return e||!1!==t?!0===t?{}:t:null}function Zs(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const e=a.id,c=Xs(i[e],r);null!==c&&s.push({plugin:a,options:to(t.config,{plugin:a,local:n[e]},c,o)})}return s}function to(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eo(t,e){const n=Ve.datasets[t]||{},i=(e.datasets||{})[t]||{};return i.indexAxis||e.indexAxis||n.indexAxis||"x"}function no(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}function io(t,e){return t===e?"_index_":"_value_"}function ro(t){if("x"===t||"y"===t||"r"===t)return t}function so(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function oo(t,...e){if(ro(t))return t;for(const n of e){const e=n.axis||so(n.position)||t.length>1&&ro(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ao(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function co(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return ao(t,"x",n[0])||ao(t,"y",n[0])}return{}}function lo(t,e){const n=Pe[t.type]||{scales:{}},i=e.scales||{},r=eo(t.type,e),s=Object.create(null);return Object.keys(i).forEach((e=>{const o=i[e];if(!nt(o))return console.error(`Invalid scale configuration for scale: ${e}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=oo(e,o,co(e,t),Ve.scales[o.type]),c=io(a,r),l=n.scales||{};s[e]=gt(Object.create(null),[{axis:a},o,l[a],l[c]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,o=n.indexAxis||eo(r,e),a=Pe[r]||{},c=a.scales||{};Object.keys(c).forEach((t=>{const e=no(t,o),r=n[e+"AxisID"]||e;s[r]=s[r]||Object.create(null),gt(s[r],[{axis:e},i[r],c[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];gt(e,[Ve.scales[e.type],Ve.scale])})),s}function uo(t){const e=t.options||(t.options={});e.plugins=st(e.plugins,{}),e.scales=lo(t,e)}function ho(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function fo(t){return t=t||{},t.data=ho(t.data),uo(t),t}const po=new Map,go=new Set;function mo(t,e){let n=po.get(t);return n||(n=e(),po.set(t,n),go.add(n)),n}const yo=(t,e,n)=>{const i=wt(e,n);void 0!==i&&t.add(i)};class vo{constructor(t){this._config=fo(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ho(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),uo(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return mo(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return mo(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return mo(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id,n=this.type;return mo(`${n}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>yo(a,t,e)))),e.forEach((t=>yo(a,i,t))),e.forEach((t=>yo(a,Pe[r]||{},t))),e.forEach((t=>yo(a,Ve,t))),e.forEach((t=>yo(a,Me,t)))}));const c=Array.from(a);return 0===c.length&&c.push(Object.create(null)),go.has(e)&&s.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,Pe[e]||{},Ve.datasets[e]||{},{type:e},Ve,Me]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:s,subPrefixes:o}=bo(this._resolverCache,t,i);let a=s;if(_o(s,e)){r.$shared=!1,n=It(n)?n():n;const e=this.createResolver(t,n,o);a=mn(s,n,e)}for(const c of e)r[c]=a[c];return r}createResolver(t,e,n=[""],i){const{resolver:r}=bo(this._resolverCache,t,n);return nt(e)?mn(r,e,void 0,i):r}}function bo(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);if(!s){const t=gn(e,n);s={resolver:t,subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,s)}return s}const wo=t=>nt(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||It(t[n])),!1);function _o(t,e){const{isScriptable:n,isIndexable:i}=yn(t);for(const r of e){const e=n(r),s=i(r),o=(s||e)&&t[r];if(e&&(It(o)||wo(o))||s&&et(o))return!0}return!1}var xo="4.3.0";const Io=["top","bottom","left","right","chartArea"];function Eo(t,e){return"top"===t||"bottom"===t||-1===Io.indexOf(t)&&"x"===e}function To(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function So(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ct(n&&n.onComplete,[t],e)}function ko(t){const e=t.chart,n=e.options.animation;ct(n&&n.onProgress,[t],e)}function Co(t){return Wn()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ao={},Do=t=>{const e=Co(t);return Object.values(Ao).filter((t=>t.canvas===e)).pop()};function Ro(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const s=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=s)}}}function Oo(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}function Po(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}class Mo{static register(...t){Ys.add(...t),No()}static unregister(...t){Ys.remove(...t),No()}constructor(t,e){const n=this.config=new vo(e),i=Co(t),r=Do(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||xs(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,c=a&&a.height,l=a&&a.width;this.id=Z(),this.ctx=o,this.canvas=a,this.width=l,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Qs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=le((t=>this.update(t)),s.resizeDelay||0),this._dataChanges=[],Ao[this.id]=this,o&&a?(Ci.listen(this,"complete",So),Ci.listen(this,"progress",ko),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return tt(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ys}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ri(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qe(this.canvas,this.ctx),this}stop(){return Ci.stop(this),this}resize(t,e){Ci.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,ri(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),ct(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const t=this.options,e=t.scales||{};lt(e,((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=oo(t,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),lt(r,(e=>{const r=e.options,s=r.id,o=oo(s,r),a=st(r.type,e.dtype);void 0!==r.position&&Eo(r.position,o)===Eo(e.dposition)||(r.position=e.dposition),i[s]=!0;let c=null;if(s in n&&n[s].type===a)c=n[s];else{const t=Ys.getScale(a);c=new t({id:s,type:a,ctx:this.ctx,chart:this}),n[c.id]=c}c.init(r,t)})),lt(i,((t,e)=>{t||delete n[e]})),lt(n,(t=>{Zr.configure(this,t,t.options),Zr.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(To("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||eo(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=Ys.getController(s),{datasetElementType:i,dataElementType:o}=Ve.datasets[s];Object.assign(e,{dataElementType:Ys.getElement(o),datasetElementType:i&&Ys.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){lt(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let c=0,l=this.data.datasets.length;c<l;c++){const{controller:t}=this.getDatasetMeta(c),e=!i&&-1===r.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||lt(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(To("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){lt(this.scales,(t=>{Zr.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);Et(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){const e="_removeElements"===n?-r:r;Ro(t,i,e)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let r=1;r<e;r++)if(!Et(i,n(r)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Zr.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],lt(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,It(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ci.has(this)?this.attached&&!Ci.running(this)&&Ci.start(this):(this.draw(),So({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=Po(t)||this.chartArea,s={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&Ge(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&Ke(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return He(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=Lr.modes[e];return"function"===typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=pn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,i);xt(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ci.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),qe(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ao[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};lt(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){lt(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},lt(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),i=!ut(n,e);i&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),s=r(e,t),o=n?t:r(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,s=e,o=this._getActiveElements(t,i,n,s),a=Tt(t),c=Oo(t,this._lastEvent,n,a);n&&(this._lastEvent=null,ct(r.onHover,[t,o,this],this),a&&ct(r.onClick,[t,o,this],this));const l=!ut(o,i);return(l||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=c,l}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function No(){return lt(Mo.instances,(t=>t._plugins.invalidate()))}function Lo(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=e;let l=r/a;t.beginPath(),t.arc(s,o,a,i-l,n+l),c>r?(l=r/c,t.arc(s,o,c,n+l,i-l,!0)):t.arc(s,o,r,n+Rt,i-Rt),t.closePath(),t.clip()}function Fo(t){return an(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Vo(t,e,n,i){const r=Fo(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=t=>{const e=(n-Math.min(s,t))*i/2;return Qt(t,0,Math.min(s,e))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Qt(r.innerStart,0,o),innerEnd:Qt(r.innerEnd,0,o)}}function Uo(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Bo(t,e,n,i,r,s){const{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-l,0),d=u>0?u+i+n+l:0;let f=0;const p=r-c;if(i){const t=u>0?u-i:0,e=h>0?h-i:0,n=(t+e)/2,r=0!==n?p*n/(n+i):p;f=(p-r)/2}const g=Math.max(.001,p*h-n/St)/h,m=(p-g)/2,y=c+m+f,v=r-m-f,{outerStart:b,outerEnd:w,innerStart:_,innerEnd:x}=Vo(e,d,h,v-y),I=h-b,E=h-w,T=y+b/I,S=v-w/E,k=d+_,C=d+x,A=y+_/k,D=v-x/C;if(t.beginPath(),s){const e=(T+S)/2;if(t.arc(o,a,h,T,e),t.arc(o,a,h,e,S),w>0){const e=Uo(E,S,o,a);t.arc(e.x,e.y,w,S,v+Rt)}const n=Uo(C,v,o,a);if(t.lineTo(n.x,n.y),x>0){const e=Uo(C,D,o,a);t.arc(e.x,e.y,x,v+Rt,D+Math.PI)}const i=(v-x/d+(y+_/d))/2;if(t.arc(o,a,d,v-x/d,i,!0),t.arc(o,a,d,i,y+_/d,!0),_>0){const e=Uo(k,A,o,a);t.arc(e.x,e.y,_,A+Math.PI,y-Rt)}const r=Uo(I,y,o,a);if(t.lineTo(r.x,r.y),b>0){const e=Uo(I,T,o,a);t.arc(e.x,e.y,b,y-Rt,T)}}else{t.moveTo(o,a);const e=Math.cos(T)*h+o,n=Math.sin(T)*h+a;t.lineTo(e,n);const i=Math.cos(S)*h+o,r=Math.sin(S)*h+a;t.lineTo(i,r)}t.closePath()}function jo(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let c=e.endAngle;if(s){Bo(t,e,n,i,c,r);for(let e=0;e<s;++e)t.fill();isNaN(a)||(c=o+(a%kt||kt))}return Bo(t,e,n,i,c,r),t.fill(),c}function zo(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=c,f="inner"===c.borderAlign;if(!l)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=2*l,t.lineJoin=u||"round"):(t.lineWidth=l,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){Bo(t,e,n,i,p,r);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(p=o+(a%kt||kt))}f&&Lo(t,e,p),s||(Bo(t,e,n,i,p,r),t.stroke())}o(Mo,"defaults",Ve),o(Mo,"instances",Ao),o(Mo,"overrides",Pe),o(Mo,"registry",Ys),o(Mo,"version",xo),o(Mo,"getChart",Do);class qo extends Is{constructor(t){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=Wt(i,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:c,outerRadius:l,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=st(u,a-o),f=d>=kt||Yt(r,o,a),p=Xt(s,c+h,l+h);return f&&p}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:c}=this.options,l=(i+r)/2,u=(s+o+c+a)/2;return{x:e+Math.cos(l)*u,y:n+Math.sin(l)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>kt?Math.floor(n/kt):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*i,Math.sin(o)*i);const a=1-Math.sin(Math.min(St,n||0)),c=i*a;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,jo(t,this,c,r,s),zo(t,this,c,r,s),t.restore()}}function $o(t,e,n=e){t.lineCap=st(n.borderCapStyle,e.borderCapStyle),t.setLineDash(st(n.borderDash,e.borderDash)),t.lineDashOffset=st(n.borderDashOffset,e.borderDashOffset),t.lineJoin=st(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=st(n.borderWidth,e.borderWidth),t.strokeStyle=st(n.borderColor,e.borderColor)}function Wo(t,e,n){t.lineTo(n.x,n.y)}function Ho(t){return t.stepped?Ye:t.tension||"monotone"===t.cubicInterpolationMode?Qe:Wo}function Go(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function Ko(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=Go(r,n,i),u=Ho(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=l;++h)d=r[(a+(g?l-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,s.stepped),f=d);return c&&(d=r[(a+(g?l:0))%o],u(t,f,d,g,s.stepped)),!!c}function Yo(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Go(r,n,i),{move:c=!0,reverse:l}=i||{};let u,h,d,f,p,g,m=0,y=0;const v=t=>(o+(l?a-t:t))%s,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(c&&(h=r[v(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=r[v(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(b(),t.lineTo(e,n),d=i,y=0,f=p=n),g=n}b()}function Qo(t){const e=t.options,n=e.borderDash&&e.borderDash.length,i=!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n;return i?Yo:Ko}function Jo(t){return t.stepped?ci:t.tension||"monotone"===t.cubicInterpolationMode?li:ai}function Xo(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),$o(t,e.options),t.stroke(r)}function Zo(t,e,n,i){const{segments:r,options:s}=e,o=Qo(e);for(const a of r)$o(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}o(qo,"id","arc"),o(qo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),o(qo,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(qo,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const ta="function"===typeof Path2D;function ea(t,e,n,i){ta&&!e.options.segment?Xo(t,e,n,i):Zo(t,e,n,i)}class na extends Is{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;$n(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xi(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,s=bi(this,{property:e,start:i,end:i});if(!s.length)return;const o=[],a=Jo(n);let c,l;for(c=0,l=s.length;c<l;++c){const{start:l,end:u}=s[c],h=r[l],d=r[u];if(h===d){o.push(h);continue}const f=Math.abs((i-h[e])/(d[e]-h[e])),p=a(h,d,f,n.stepped);p[e]=t[e],o.push(p)}return 1===o.length?o[0]:o}pathSegment(t,e,n){const i=Qo(this);return i(t,this,e,n)}path(t,e,n){const i=this.segments,r=Qo(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of i)s&=r(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,i){const r=this.options||{},s=this.points||[];s.length&&r.borderWidth&&(t.save(),ea(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ia(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}o(na,"id","line"),o(na,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(na,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(na,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class ra extends Is{constructor(t){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return ia(this,t,"x",e)}inYRange(t,e){return ia(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const n=e&&t.borderWidth||0;return 2*(e+n)}draw(t,e){const n=this.options;this.skip||n.radius<.1||!He(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,$e(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function sa(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),c=Math.max(n,r),l=i-h,u=i+h):(h=s/2,a=n-h,c=n+h,l=Math.min(i,r),u=Math.max(i,r)),{left:a,top:l,right:c,bottom:u}}function oa(t,e,n,i){return t?0:Qt(e,n,i)}function aa(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=cn(i);return{t:oa(r.top,s.top,0,n),r:oa(r.right,s.right,0,e),b:oa(r.bottom,s.bottom,0,n),l:oa(r.left,s.left,0,e)}}function ca(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=ln(r),o=Math.min(e,n),a=t.borderSkipped,c=i||nt(r);return{topLeft:oa(!c||a.top||a.left,s.topLeft,0,o),topRight:oa(!c||a.top||a.right,s.topRight,0,o),bottomLeft:oa(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:oa(!c||a.bottom||a.right,s.bottomRight,0,o)}}function la(t){const e=sa(t),n=e.right-e.left,i=e.bottom-e.top,r=aa(t,n/2,i/2),s=ca(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function ua(t,e,n,i){const r=null===e,s=null===n,o=r&&s,a=t&&!o&&sa(t,i);return a&&(r||Xt(e,a.left,a.right))&&(s||Xt(n,a.top,a.bottom))}function ha(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function da(t,e){t.rect(e.x,e.y,e.w,e.h)}function fa(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}o(ra,"id","point"),o(ra,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(ra,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class pa extends Is{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=la(this),o=ha(s.radius)?en:da;t.save(),s.w===r.w&&s.h===r.h||(t.beginPath(),o(t,fa(s,e,r)),t.clip(),o(t,fa(r,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,fa(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return ua(this,t,e,n)}inXRange(t,e){return ua(this,t,null,e)}inYRange(t,e){return ua(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}o(pa,"id","bar"),o(pa,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(pa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ga=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ma=ga.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function ya(t){return ga[t%ga.length]}function va(t){return ma[t%ma.length]}function ba(t,e){return t.borderColor=ya(e),t.backgroundColor=va(e),++e}function wa(t,e){return t.backgroundColor=t.data.map((()=>ya(e++))),e}function _a(t,e){return t.backgroundColor=t.data.map((()=>va(e++))),e}function xa(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof br?e=wa(n,e):r instanceof _r?e=_a(n,e):r&&(e=ba(n,e))}}function Ia(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Ea(t){return t&&(t.borderColor||t.backgroundColor)}var Ta={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r;if(!n.forceOverride&&(Ia(i)||Ea(r)||s&&Ia(s)))return;const o=xa(t);i.forEach(o)}};const Sa=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},ka=(t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Ca extends Is{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ct(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=hn(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Sa(n,r);let c,l;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,l=this._fitRows(s,r,o,a)+10):(l=this.maxHeight,c=this._fitCols(s,i,o,a)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],l=i+o;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-l;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||c[c.length-1]+p+2*o>s)&&(u+=l,c[c.length-(f>0?0:1)]=0,d+=l,h++),a[f]={left:0,top:d,row:h,width:p,height:i},c[c.length-1]+=p+o})),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],l=s-t;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,s)=>{const{itemWidth:g,itemHeight:m}=Aa(n,e,r,t,i);s>0&&d+m+2*o>l&&(u+=h+o,c.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o})),u+=h,c.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,s=di(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=he(n,this.left+i,this.right-this.lineWidths[r]);for(const a of e)r!==a.row&&(r=a.row,o=he(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+t+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=he(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const a of e)a.col!==r&&(r=a.col,o=he(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Ge(t,this),this._draw(),Ke(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:s}=t,o=Ve.color,a=di(t.rtl,this.left,this.width),c=hn(s.font),{padding:l}=s,u=c.size,h=u/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Sa(s,u),m=function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=st(n.lineWidth,1);if(i.fillStyle=st(n.fillStyle,o),i.lineCap=st(n.lineCap,"butt"),i.lineDashOffset=st(n.lineDashOffset,0),i.lineJoin=st(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=st(n.strokeStyle,o),i.setLineDash(st(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},c=a.xPlus(t,f/2),l=e+h;We(i,o,c,l,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-p)/2,0),o=a.leftForLtr(t,f),c=ln(n.borderRadius);i.beginPath(),Object.values(c).some((t=>0!==t))?en(i,{x:o,y:s,w:f,h:p,radius:c}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()},y=function(t,e,n){tn(i,n.text,t,e+g/2,c,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})},v=this.isHorizontal(),b=this._computeTitleHeight();d=v?{x:he(r,this.left+l,this.right-n[0]),y:this.top+l+b,line:0}:{x:this.left+l,y:he(r,this.top+b+l,this.bottom-e[0].height),line:0},fi(this.ctx,t.textDirection);const w=g+l;this.legendItems.forEach(((o,u)=>{i.strokeStyle=o.fontColor,i.fillStyle=o.fontColor;const p=i.measureText(o.text).width,g=a.textAlign(o.textAlign||(o.textAlign=s.textAlign)),_=f+h+p;let x=d.x,I=d.y;a.setWidth(this.width),v?u>0&&x+_+l>this.right&&(I=d.y+=w,d.line++,x=d.x=he(r,this.left+l,this.right-n[d.line])):u>0&&I+w>this.bottom&&(x=d.x=x+e[d.line].width+l,d.line++,I=d.y=he(r,this.top+b+l,this.bottom-e[d.line].height));const E=a.x(x);if(m(E,I,o),x=de(g,x+f+h,v?x+_:this.right,t.rtl),y(a.x(x),I,o),v)d.x+=_+l;else if("string"!==typeof o.text){const t=c.lineHeight;d.y+=Oa(o,t)}else d.y+=w})),pi(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=hn(e.font),i=un(e.padding);if(!e.display)return;const r=di(t.rtl,this.left,this.width),s=this.ctx,o=e.position,a=n.size/2,c=i.top+a;let l,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),l=this.top+c,u=he(t.align,u,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);l=c+he(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=he(o,u,u+h);s.textAlign=r.textAlign(ue(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,tn(s,e.text,d,l,n)}_computeTitleHeight(){const t=this.options.title,e=hn(t.font),n=un(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(Xt(t,this.left,this.right)&&Xt(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],Xt(t,i.left,i.left+i.width)&&Xt(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!Pa(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,r=ka(i,n);i&&!r&&ct(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&ct(e.onHover,[t,n,this],this)}else n&&ct(e.onClick,[t,n,this],this)}}function Aa(t,e,n,i,r){const s=Da(i,t,e,n),o=Ra(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Da(t,e,n,i){let r=t.text;return r&&"string"!==typeof r&&(r=r.reduce(((t,e)=>t.length>e.length?t:e))),e+n.size/2+i.measureText(r).width}function Ra(t,e,n){let i=t;return"string"!==typeof e.text&&(i=Oa(e,n)),i}function Oa(t,e){const n=t.text?t.text.length+.5:0;return e*n}function Pa(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}var Ma={id:"legend",_element:Ca,start(t,e,n){const i=t.legend=new Ca({ctx:t.ctx,options:n,chart:t});Zr.configure(t,i,n),Zr.addBox(t,i)},stop(t){Zr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Zr.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const c=t.controller.getStyle(n?0:void 0),l=un(c.borderWidth);return{text:e[t.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Na extends Is{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=et(n.text)?n.text.length:1;this._padding=un(n.padding);const r=i*hn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,c,l,u=0;return this.isHorizontal()?(c=he(o,n,r),l=e+t,a=r-n):("left"===s.position?(c=n+t,l=he(o,i,e),u=-.5*St):(c=r-t,l=he(o,e,i),u=.5*St),a=i-e),{titleX:c,titleY:l,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=hn(e.font),i=n.lineHeight,r=i/2+this._padding.top,{titleX:s,titleY:o,maxWidth:a,rotation:c}=this._drawArgs(r);tn(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:c,textAlign:ue(e.align),textBaseline:"middle",translation:[s,o]})}}function La(t,e){const n=new Na({ctx:t.ctx,options:e,chart:t});Zr.configure(t,n,e),Zr.addBox(t,n),t.titleBlock=n}var Fa={id:"title",_element:Na,start(t,e,n){La(t,n)},stop(t){const e=t.titleBlock;Zr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Zr.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Va={average(t){if(!t.length)return!1;let e,n,i=0,r=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,r+=t.y,++s}}return{x:i/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let n,i,r,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=i.getCenterPoint(),n=Ht(e,t);n<a&&(a=n,r=i)}}if(r){const t=r.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function Ua(t,e){return e&&(et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ba(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ja(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function za(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,c=hn(e.bodyFont),l=hn(e.titleFont),u=hn(e.footerFont),h=s.length,d=r.length,f=i.length,p=un(e.padding);let g=p.height,m=0,y=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const t=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;g+=f*t+(y-f)*c.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let v=0;const b=function(t){m=Math.max(m,n.measureText(t).width+v)};return n.save(),n.font=l.string,lt(t.title,b),n.font=c.string,lt(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,lt(i,(t=>{lt(t.before,b),lt(t.lines,b),lt(t.after,b)})),v=0,n.font=u.string,lt(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function qa(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function $a(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===t&&r+s+o>e.width||("right"===t&&r-s-o<0||void 0)}function Wa(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return"center"===i?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),$a(l,t,e,n)&&(l="center"),l}function Ha(t,e,n){const i=n.yAlign||e.yAlign||qa(t,n);return{xAlign:n.xAlign||e.xAlign||Wa(t,e,n,i),yAlign:i}}function Ga(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}function Ka(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}function Ya(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=ln(o);let p=Ga(e,a);const g=Ka(e,c,l);return"center"===c?"left"===a?p+=l:"right"===a&&(p-=l):"left"===a?p-=Math.max(u,d)+r:"right"===a&&(p+=Math.max(h,f)+r),{x:Qt(p,0,i.width-e.width),y:Qt(g,0,i.height-e.height)}}function Qa(t,e,n){const i=un(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Ja(t){return Ua([],Ba(t))}function Xa(t,e,n){return pn(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Za(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const tc={beforeTitle:X,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:X,beforeBody:X,beforeLabel:X,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return tt(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex),n=e.controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex),n=e.controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:X,afterBody:X,beforeFooter:X,footer:X,afterFooter:X};function ec(t,e,n,i){const r=t[e].call(n,i);return"undefined"===typeof r?tc[e].call(n,i):r}class nc extends Is{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new Oi(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Xa(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,i=ec(n,"beforeTitle",this,t),r=ec(n,"title",this,t),s=ec(n,"afterTitle",this,t);let o=[];return o=Ua(o,Ba(i)),o=Ua(o,Ba(r)),o=Ua(o,Ba(s)),o}getBeforeBody(t,e){return Ja(ec(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return lt(t,(t=>{const e={before:[],lines:[],after:[]},r=Za(n,t);Ua(e.before,Ba(ec(r,"beforeLabel",this,t))),Ua(e.lines,ec(r,"label",this,t)),Ua(e.after,Ba(ec(r,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return Ja(ec(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=ec(n,"beforeFooter",this,t),r=ec(n,"footer",this,t),s=ec(n,"afterFooter",this,t);let o=[];return o=Ua(o,Ba(i)),o=Ua(o,Ba(r)),o=Ua(o,Ba(s)),o}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,c=[];for(o=0,a=e.length;o<a;++o)c.push(ja(this.chart,e[o]));return t.filter&&(c=c.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(c=c.sort(((e,i)=>t.itemSort(e,i,n)))),lt(c,(e=>{const n=Za(t.callbacks,e);i.push(ec(n,"labelColor",this,e)),r.push(ec(n,"labelPointStyle",this,e)),s.push(ec(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=c,c}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const t=Va[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=za(this,n),o=Object.assign({},t,e),a=Ha(this.chart,n,o),c=Ya(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:c.x,y:c.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:c,bottomLeft:l,bottomRight:u}=ln(o),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,y,v,b,w;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-s,v=b+s,w=b-s):(g=h+f,m=g+s,v=b-s,w=b+s),y=g):(m="left"===i?h+Math.max(a,l)+s:"right"===i?h+f-Math.max(c,u)-s:this.caretX,"top"===r?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),w=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:w}}drawTitle(t,e,n){const i=this.title,r=i.length;let s,o,a;if(r){const c=di(n.rtl,this.x,this.width);for(t.x=Qa(this,n.titleAlign,n),e.textAlign=c.textAlign(n.titleAlign),e.textBaseline="middle",s=hn(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<r;++a)e.fillText(i[a],c.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===r&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:c}=r,l=hn(r.bodyFont),u=Qa(this,"left",r),h=i.x(u),d=a<l.lineHeight?(l.lineHeight-a)/2:0,f=e.y+d;if(r.usePointStyle){const e={radius:Math.min(c,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(h,c)+c/2,l=f+a/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,$e(t,e,n,l),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,$e(t,e,n,l)}else{t.lineWidth=nt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(h,c),n=i.leftForLtr(i.xPlus(h,1),c-2),o=ln(s.borderRadius);Object.values(o).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,en(t,{x:e,y:f,w:c,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),en(t,{x:n,y:f+1,w:c-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,c,a),t.strokeRect(e,f,c,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,c-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:c,boxPadding:l}=n,u=hn(n.bodyFont);let h=u.lineHeight,d=0;const f=di(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},g=f.textAlign(s);let m,y,v,b,w,_,x;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=Qa(this,g,n),e.fillStyle=n.bodyColor,lt(this.beforeBody,p),d=o&&"right"!==g?"center"===s?c/2+l:c+2+l:0,b=0,_=i.length;b<_;++b){for(m=i[b],y=this.labelTextColors[b],e.fillStyle=y,lt(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(u.lineHeight,a)),w=0,x=v.length;w<x;++w)p(v[w]),h=u.lineHeight;lt(m.after,p)}d=0,h=u.lineHeight,lt(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let s,o;if(r){const a=di(n.rtl,this.x,this.width);for(t.x=Qa(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=hn(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<r;++o)e.fillText(i[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=t,{width:c,height:l}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=ln(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+c-h,a),e.quadraticCurveTo(o+c,a,o+c,a+h),"center"===s&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+c,a+l-f),e.quadraticCurveTo(o+c,a+l,o+c-f,a+l),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+d,a+l),e.quadraticCurveTo(o,a+l,o,a+l-d),"center"===s&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Va[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=za(this,t),o=Object.assign({},n,this._size),a=Ha(e,t,o),c=Ya(t,o,a,e);i._to===c.x&&r._to===c.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=un(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),fi(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),pi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!ut(n,i),s=this._positionChanged(i,e);(r||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(t,r,e,n),o=this._positionChanged(s,t),a=e||!ut(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e;const s=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,s=Va[r.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}o(nc,"positioners",Va);var ic={id:"tooltip",_element:nc,positioners:Va,afterInit(t,e,n){n&&(t.tooltip=new nc({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:tc},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const rc=(t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function sc(t,e,n,i){const r=t.indexOf(e);if(-1===r)return rc(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const oc=(t,e)=>null===t?null:Qt(Math.round(t),0,e);function ac(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class cc extends qs{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(tt(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:sc(n,t,st(e,t),this._addedLabels),oc(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=e;s++)i.push({value:s});return i}getLabelForValue(t){return ac.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function lc(t,e){const n=[],i=1e-14,{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,p=u-1,{min:g,max:m}=e,y=!tt(o),v=!tt(a),b=!tt(l),w=(m-g)/(h+1);let _,x,I,E,T=Ft((m-g)/p/f)*f;if(T<i&&!y&&!v)return[{value:g},{value:m}];E=Math.ceil(m/T)-Math.floor(g/T),E>p&&(T=Ft(E*T/p/f)*f),tt(c)||(_=Math.pow(10,c),T=Math.ceil(T*_)/_),"ticks"===r?(x=Math.floor(g/T)*T,I=Math.ceil(m/T)*T):(x=g,I=m),y&&v&&s&&Bt((a-o)/s,T/1e3)?(E=Math.round(Math.min((a-o)/T,u)),T=(a-o)/E,x=o,I=a):b?(x=y?o:x,I=v?a:I,E=l-1,T=(I-x)/E):(E=(I-x)/T,E=Lt(E,Math.round(E),T/1e3)?Math.round(E):Math.ceil(E));const S=Math.max($t(T),$t(x));_=Math.pow(10,tt(c)?S:c),x=Math.round(x*_)/_,I=Math.round(I*_)/_;let k=0;for(y&&(d&&x!==o?(n.push({value:o}),x<o&&k++,Lt(Math.round((x+k*T)*_)/_,o,uc(o,w,t))&&k++):x<o&&k++);k<E;++k){const t=Math.round((x+k*T)*_)/_;if(v&&t>a)break;n.push({value:t})}return v&&d&&I!==a?n.length&&Lt(n[n.length-1].value,a,uc(a,w,t))?n[n.length-1].value=a:n.push({value:a}):v&&I!==a||n.push({value:I}),n}function uc(t,e,{horizontal:n,minRotation:i}){const r=zt(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}o(cc,"id","category"),o(cc,"defaults",{ticks:{callback:ac}});class hc extends qs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return tt(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=t=>i=e?i:t,o=t=>r=n?r:t;if(t){const t=Nt(i),e=Nt(r);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);o(r+e),t||s(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},r=this._range||this,s=lc(i,r);return"ticks"===t.bounds&&jt(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Ce(t,this.chart.options.locale,this.options.ticks.format)}}class dc extends hc{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=it(t)?t:0,this.max=it(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=zt(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}o(dc,"id","linear"),o(dc,"defaults",{ticks:{callback:Re.formatters.numeric}});const fc=t=>Math.floor(Mt(t)),pc=(t,e)=>Math.pow(10,fc(t)+e);function gc(t){const e=t/Math.pow(10,fc(t));return 1===e}function mc(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i),s=Math.ceil(e/i);return s-r}function yc(t,e){const n=e-t;let i=fc(n);while(mc(t,e,i)>10)i++;while(mc(t,e,i)<10)i--;return Math.min(i,fc(t))}function vc(t,{min:e,max:n}){e=rt(t.min,e);const i=[],r=fc(e);let s=yc(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,s)),d=rt(t.min,Math.round((c+u+h*Math.pow(10,s))*o)/o);while(d<n)i.push({value:d,major:gc(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((c+u+h*Math.pow(10,s))*o)/o;const f=rt(t.max,d);return i.push({value:f,major:gc(f),significand:h}),i}class bc extends qs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=hc.prototype.parse.apply(this,[t,e]);if(0!==n)return it(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=it(t)?Math.max(0,t):null,this.max=it(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!it(this._userMin)&&(this.min=t===pc(this.min,0)?pc(this.min,-1):pc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,s=t=>i=e?i:t;n===i&&(n<=0?(r(1),s(10)):(r(pc(n,-1)),s(pc(i,1)))),n<=0&&r(pc(i,-1)),i<=0&&s(pc(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},n=vc(e,this);return"ticks"===t.bounds&&jt(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":Ce(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Mt(t),this._valueRange=Mt(this.max)-Mt(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Mt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function wc(t){const e=t.ticks;if(e.display&&t.display){const t=un(e.backdropPadding);return st(e.font&&e.font.size,Ve.font.size)+t.height}return 0}function _c(t,e,n){return n=et(n)?n:[n],{w:je(t,e.string,n),h:n.length*e.lineHeight}}function xc(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function Ic(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?St/s:0;for(let c=0;c<s;c++){const s=o.setContext(t.getPointLabelContext(c));r[c]=s.padding;const l=t.getPointPosition(c,t.drawingArea+r[c],a),u=hn(s.font),h=_c(t.ctx,u,t._pointLabels[c]);i[c]=h;const d=Kt(t.getIndexAngle(c)+a),f=Math.round(qt(d)),p=xc(f,l.x,h.w,0,180),g=xc(f,l.y,h.h,90,270);Ec(n,e,d,p,g)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=kc(t,i,r)}function Ec(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function Tc(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,c=t.getPointPosition(e,i+r+o,s),l=Math.round(qt(Kt(c.angle+Rt))),u=Dc(c.y,a.h,l),h=Cc(l),d=Ac(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function Sc(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t,o=He({x:n,y:i},e)||He({x:n,y:s},e)||He({x:r,y:i},e)||He({x:r,y:s},e);return!o}function kc(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:wc(s)/2,additionalAngle:o?St/r:0};let l;for(let u=0;u<r;u++){c.padding=n[u],c.size=e[u];const r=Tc(t,u,c);i.push(r),"auto"===a&&(r.visible=Sc(r,l),r.visible&&(l=r))}return i}function Cc(t){return 0===t||180===t?"center":t<180?"left":"right"}function Ac(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function Dc(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function Rc(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!tt(a)){const n=ln(e.borderRadius),c=un(e.backdropPadding);t.fillStyle=a;const l=i-c.left,u=r-c.top,h=s-i+c.width,d=o-r+c.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),en(t,{x:l,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(l,u,h,d)}}function Oc(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const s=i.setContext(t.getPointLabelContext(r));Rc(n,s,e);const o=hn(s.font),{x:a,y:c,textAlign:l}=e;tn(n,t._pointLabels[r],a,c+o.lineHeight/2,o,{color:s.color,textAlign:l,textBaseline:"middle"})}}function Pc(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,kt);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}function Mc(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),Pc(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function Nc(t,e,n){return pn(t,{label:n,index:e,type:"pointLabel"})}o(bc,"id","logarithmic"),o(bc,"defaults",{ticks:{callback:Re.formatters.logarithmic,major:{enabled:!0}}});class Lc extends hc{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=un(wc(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=it(t)&&!isNaN(t)?t:0,this.max=it(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wc(this.options))}generateTickLabels(t){hc.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=ct(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?Ic(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){const e=kt/(this._pointLabels.length||1),n=this.options.startAngle||0;return Kt(t*e+zt(n))}getDistanceFromCenterForValue(t){if(tt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(tt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return Nc(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-Rt+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Pc(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,s=this._pointLabels.length;let o,a,c;if(e.pointLabels.display&&Oc(this,s),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=i.setContext(n),c=r.setContext(n);Mc(this,o,a,s,c)}})),n.display){for(t.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(t.lineWidth=s,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,o)=>{if(0===o&&!e.reverse)return;const a=n.setContext(this.getContext(o)),c=hn(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=c.string,s=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=un(a.backdropPadding);t.fillRect(-s/2-e.left,-r-c.size/2-e.top,s+e.width,c.size+e.height)}tn(t,i.label,0,-r,c,{color:a.color})})),t.restore()}drawTitle(){}}o(Lc,"id","radialLinear"),o(Lc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Re.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),o(Lc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(Lc,"descriptors",{angleLines:{_fallback:"grid"}});const Fc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vc=Object.keys(Fc);function Uc(t,e){return t-e}function Bc(t,e){if(tt(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return"function"===typeof i&&(o=i(o)),it(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!Ut(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function jc(t,e,n,i){const r=Vc.length;for(let s=Vc.indexOf(t);s<r-1;++s){const t=Fc[Vc[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return Vc[s]}return Vc[r-1]}function zc(t,e,n,i,r){for(let s=Vc.length-1;s>=Vc.indexOf(n);s--){const n=Vc[s];if(Fc[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return Vc[n?Vc.indexOf(n):0]}function qc(t){for(let e=Vc.indexOf(t)+1,n=Vc.length;e<n;++e)if(Fc[Vc[e]].common)return Vc[e]}function $c(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=Zt(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}else t[e]=!0}function Wc(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=n[a],c>=0&&(e[c].major=!0);return e}function Hc(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?Wc(t,i,r,n):i}class Gc extends qs{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new kr._date(t.adapters.date);i.init(e),gt(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Bc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(i=Math.min(i,t.min)),o||isNaN(t.max)||(r=Math.max(r,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=it(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=it(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=this.max,o=ne(i,r,s);return this._unit=e.unit||(n.autoSkip?jc(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):zc(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?qc(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),Hc(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;i=Qt(i,0,s),r=Qt(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||jc(r.minUnit,e,n,this._getLabelCapacity(e)),o=st(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,c=Ut(a)||!0===a,l={};let u,h,d=e;if(c&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,c?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,o,s),h++)$c(l,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||$c(l,u,f),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options,i=n.time.displayFormats,r=this._unit,s=e||i[r];return this._adapter.format(t,s)}_tickFormatFunction(t,e,n,i){const r=this.options,s=r.ticks.callback;if(s)return ct(s,[t,e,n],this);const o=r.time.displayFormats,a=this._unit,c=this._majorUnit,l=a&&o[a],u=c&&o[c],h=n[e],d=c&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:l))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=zt(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Hc(this,[t],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Bc(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return oe(t.sort(Uc))}}function Kc(t,e,n){let i,r,s,o,a=0,c=t.length-1;n?(e>=t[a].pos&&e<=t[c].pos&&({lo:a,hi:c}=te(t,"pos",e)),({pos:i,time:s}=t[a]),({pos:r,time:o}=t[c])):(e>=t[a].time&&e<=t[c].time&&({lo:a,hi:c}=te(t,"time",e)),({time:i,pos:s}=t[a]),({time:r,pos:o}=t[c]));const l=r-i;return l?s+(o-s)*(e-i)/l:s}o(Gc,"id","time"),o(Gc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Yc extends Gc{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Kc(e,this.min),this._tableRange=Kc(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let s,o,a,c,l;for(s=0,o=t.length;s<o;++s)c=t[s],c>=e&&c<=n&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)l=i[s+1],a=i[s-1],c=i[s],Math.round((l+a)/2)!==c&&r.push({time:c,pos:s/(o-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Kc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Kc(this._table,n*this._tableRange+this._minPos,!0)}}o(Yc,"id","timeseries"),o(Yc,"defaults",Gc.defaults)},1609:function(t,e,n){"use strict";n.d(e,{v0:function(){return i.o},ck:function(){return i.ai}});var i=n(7478);n(223),n(7077),n(5168),n(7142)},1509:function(t,e,n){"use strict";n.d(e,{Z:function(){return i.Z}});var i=n(2661),r="firebase",s="9.22.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.Z.registerVersion(r,s,"app-compat")},5363:function(t,e,n){"use strict";n(7658);var i=n(2661),r=(n(3767),n(8585),n(8696),n(7478)),s=n(223),o=(n(7077),n(5168),n(7142));
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c=2e3;async function l(t,e,n){var i;const{BuildInfo:s}=a();(0,r.as)(e.sessionId,"AuthEvent did not contain a session ID");const o=await p(e.sessionId),c={};return(0,r.at)()?c["ibi"]=s.packageName:(0,r.au)()?c["apn"]=s.packageName:(0,r.av)(t,"operation-not-supported-in-this-environment"),s.displayName&&(c["appDisplayName"]=s.displayName),c["sessionId"]=o,(0,r.aw)(t,n,e.type,void 0,null!==(i=e.eventId)&&void 0!==i?i:void 0,c)}async function u(t){const{BuildInfo:e}=a(),n={};(0,r.at)()?n.iosBundleId=e.packageName:(0,r.au)()?n.androidPackageName=e.packageName:(0,r.av)(t,"operation-not-supported-in-this-environment"),await(0,r.ax)(t,n)}function h(t){const{cordova:e}=a();return new Promise((n=>{e.plugins.browsertab.isAvailable((i=>{let s=null;i?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,(0,r.ay)()?"_blank":"_system","location=yes"),n(s)}))}))}async function d(t,e,n){const{cordova:i}=a();let s=()=>{};try{await new Promise(((o,a)=>{let l=null;function u(){var t;o();const e=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof e&&e(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function h(){l||(l=window.setTimeout((()=>{a((0,r.az)(t,"redirect-cancelled-by-user"))}),c))}function d(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&h()}e.addPassiveListener(u),document.addEventListener("resume",h,!1),(0,r.au)()&&document.addEventListener("visibilitychange",d,!1),s=()=>{e.removePassiveListener(u),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",d,!1),l&&window.clearTimeout(l)}}))}finally{s()}}function f(t){var e,n,i,s,o,c,l,u,h,d;const f=a();(0,r.aA)("function"===typeof(null===(e=null===f||void 0===f?void 0:f.universalLinks)||void 0===e?void 0:e.subscribe),t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,r.aA)("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,r.aA)("function"===typeof(null===(o=null===(s=null===(i=null===f||void 0===f?void 0:f.cordova)||void 0===i?void 0:i.plugins)||void 0===s?void 0:s.browsertab)||void 0===o?void 0:o.openUrl),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,r.aA)("function"===typeof(null===(u=null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.plugins)||void 0===l?void 0:l.browsertab)||void 0===u?void 0:u.isAvailable),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,r.aA)("function"===typeof(null===(d=null===(h=null===f||void 0===f?void 0:f.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function p(t){const e=g(t),n=await crypto.subtle.digest("SHA-256",e),i=Array.from(new Uint8Array(n));return i.map((t=>t.toString(16).padStart(2,"0"))).join("")}function g(t){if((0,r.as)(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m=20;class y extends r.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((t=>{this.resolveInialized=t}))}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInialized(),this.passiveListeners.forEach((e=>e(t))),super.onEvent(t)}async initialized(){await this.initPromise}}function v(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:x(),postBody:null,tenantId:t.tenantId,error:(0,r.az)(t,"no-auth-event")}}function b(t,e){return I()._set(E(t),e)}async function w(t){const e=await I()._get(E(t));return e&&await I()._remove(E(t)),e}function _(t,e){var n,i;const s=S(e);if(s.includes("/__/auth/callback")){const e=k(s),o=e["firebaseError"]?T(decodeURIComponent(e["firebaseError"])):null,a=null===(i=null===(n=null===o||void 0===o?void 0:o["code"])||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],c=a?(0,r.az)(a):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function x(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<m;n++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function I(){return(0,r.aC)(r.b)}function E(t){return(0,r.aD)("authEvent",t.config.apiKey,t.name)}function T(t){try{return JSON.parse(t)}catch(e){return null}}function S(t){const e=k(t),n=e["link"]?decodeURIComponent(e["link"]):void 0,i=k(n)["link"],r=e["deep_link_id"]?decodeURIComponent(e["deep_link_id"]):void 0,s=k(r)["link"];return s||r||i||n||t}function k(t){if(!(null===t||void 0===t?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return(0,s.zd)(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C=500;class A{constructor(){this._redirectPersistence=r.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=r.aE,this._overrideRedirectResult=r.aF}async _initialize(t){const e=t._key();let n=this.eventManagers.get(e);return n||(n=new y(t),this.eventManagers.set(e,n),this.attachCallbackListeners(t,n)),n}_openPopup(t){(0,r.av)(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,n,i){f(t);const s=await this._initialize(t);await s.initialized(),s.resetRedirect(),(0,r.aG)(),await this._originValidation(t);const o=v(t,n,i);await b(t,o);const a=await l(t,o,e),c=await h(a);return d(t,s,c)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=u(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:n,handleOpenURL:i,BuildInfo:r}=a(),s=setTimeout((async()=>{await w(t),e.onEvent(R())}),C),o=async n=>{clearTimeout(s);const i=await w(t);let r=null;i&&(null===n||void 0===n?void 0:n["url"])&&(r=_(i,n["url"])),e.onEvent(r||R())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const c=i,l=`${r.packageName.toLowerCase()}://`;a().handleOpenURL=async t=>{if(t.toLowerCase().startsWith(l)&&o({url:t}),"function"===typeof c)try{c(t)}catch(e){console.error(e)}}}}const D=A;function R(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,r.az)("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t,e){(0,r.aH)(t)._logFramework(e)}var P="@firebase/auth-compat",M="0.4.2";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const N=1e3;function L(){var t;return(null===(t=null===self||void 0===self?void 0:self.location)||void 0===t?void 0:t.protocol)||null}function F(){return"http:"===L()||"https:"===L()}function V(t=(0,s.z$)()){return!("file:"!==L()&&"ionic:"!==L()&&"capacitor:"!==L()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function U(){return(0,s.b$)()||(0,s.UG)()}function B(){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)}function j(t=(0,s.z$)()){return/Edge\/\d+/.test(t)}function z(t=(0,s.z$)()){return B()||j(t)}function q(){try{const t=self.localStorage,e=r.aL();if(t)return t["setItem"](e,"1"),t["removeItem"](e),!z()||(0,s.hl)()}catch(t){return $()&&(0,s.hl)()}return!1}function $(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function W(){return(F()||(0,s.ru)()||V())&&!U()&&q()&&!$()}function H(){return V()&&"undefined"!==typeof document}async function G(){return!!H()&&new Promise((t=>{const e=setTimeout((()=>{t(!1)}),N);document.addEventListener("deviceready",(()=>{clearTimeout(e),t(!0)}))}))}function K(){return"undefined"!==typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={LOCAL:"local",NONE:"none",SESSION:"session"},Q=r.aA,J="persistence";function X(t,e){Q(Object.values(Y).includes(e),t,"invalid-persistence-type"),(0,s.b$)()?Q(e!==Y.SESSION,t,"unsupported-persistence-type"):(0,s.UG)()?Q(e===Y.NONE,t,"unsupported-persistence-type"):$()?Q(e===Y.NONE||e===Y.LOCAL&&(0,s.hl)(),t,"unsupported-persistence-type"):Q(e===Y.NONE||q(),t,"unsupported-persistence-type")}async function Z(t){await t._initializationPromise;const e=et(),n=r.aD(J,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function tt(t,e){const n=et();if(!n)return[];const i=r.aD(J,t,e),s=n.getItem(i);switch(s){case Y.NONE:return[r.N];case Y.LOCAL:return[r.i,r.a];case Y.SESSION:return[r.a];default:return[]}}function et(){var t;try{return(null===(t=K())||void 0===t?void 0:t.sessionStorage)||null}catch(e){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt=r.aA;class it{constructor(){this.browserResolver=r.aC(r.k),this.cordovaResolver=r.aC(D),this.underlyingResolver=null,this._redirectPersistence=r.a,this._completeRedirectFn=r.aE,this._overrideRedirectResult=r.aF}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,n,i)}async _openRedirect(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,n,i)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return H()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await G();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t.unwrap()}function st(t){return t.wrapped()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return ct(t)}function at(t,e){var n;const i=null===(n=e.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===e||void 0===e?void 0:e.code)){const n=e;n.resolver=new ht(t,r.aq(t,e))}else if(i){const t=ct(e),n=e;t&&(n.credential=t,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}function ct(t){const{_tokenResponse:e}=t instanceof s.ZR?t.customData:t;if(!e)return null;if(!(t instanceof s.ZR)&&"temporaryProof"in e&&"phoneNumber"in e)return r.P.credentialFromResult(t);const n=e.providerId;if(!n||n===r.p.PASSWORD)return null;let i;switch(n){case r.p.GOOGLE:i=r.V;break;case r.p.FACEBOOK:i=r.U;break;case r.p.GITHUB:i=r.W;break;case r.p.TWITTER:i=r.Z;break;default:const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:c}=e;return s||o||t||a?a?n.startsWith("saml.")?r.aO._create(n,a):r.L._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:t,accessToken:s}):new r.X(n).credential({idToken:t,accessToken:s,rawNonce:c}):null}return t instanceof s.ZR?i.credentialFromError(t):i.credentialFromResult(t)}function lt(t,e){return e.catch((e=>{throw e instanceof s.ZR&&at(t,e),e})).then((t=>{const e=t.operationType,n=t.user;return{operationType:e,credential:ot(t),additionalUserInfo:r.ao(t),user:dt.getOrCreate(n)}}))}async function ut(t,e){const n=await e;return{verificationId:n.verificationId,confirm:e=>lt(t,n.confirm(e))}}class ht{constructor(t,e){this.resolver=e,this.auth=st(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return lt(rt(this.auth),this.resolver.resolveSignIn(t))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this._delegate=t,this.multiFactor=r.ar(t)}static getOrCreate(t){return dt.USER_MAP.has(t)||dt.USER_MAP.set(t,new dt(t)),dt.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return lt(this.auth,r.a0(this._delegate,t))}async linkWithPhoneNumber(t,e){return ut(this.auth,r.l(this._delegate,t,e))}async linkWithPopup(t){return lt(this.auth,r.d(this._delegate,t,it))}async linkWithRedirect(t){return await Z(r.aH(this.auth)),r.g(this._delegate,t,it)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return lt(this.auth,r.a1(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return ut(this.auth,r.r(this._delegate,t,e))}reauthenticateWithPopup(t){return lt(this.auth,r.e(this._delegate,t,it))}async reauthenticateWithRedirect(t){return await Z(r.aH(this.auth)),r.h(this._delegate,t,it)}sendEmailVerification(t){return r.ae(this._delegate,t)}async unlink(t){return await r.an(this._delegate,t),this}updateEmail(t){return r.aj(this._delegate,t)}updatePassword(t){return r.ak(this._delegate,t)}updatePhoneNumber(t){return r.u(this._delegate,t)}updateProfile(t){return r.ai(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return r.af(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}dt.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ft=r.aA;class pt{constructor(t,e){if(this.app=t,e.isInitialized())return this._delegate=e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=t.options;ft(n,"invalid-api-key",{appName:t.name}),ft(n,"invalid-api-key",{appName:t.name});const i="undefined"!==typeof window?it:void 0;this._delegate=e.initialize({options:{persistence:mt(n,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(r.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?dt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){r.I(this._delegate,t,e)}applyActionCode(t){return r.a5(this._delegate,t)}checkActionCode(t){return r.a6(this._delegate,t)}confirmPasswordReset(t,e){return r.a4(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return lt(this._delegate,r.a8(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return r.ad(this._delegate,t)}isSignInWithEmailLink(t){return r.ab(this._delegate,t)}async getRedirectResult(){ft(W(),this._delegate,"operation-not-supported-in-this-environment");const t=await r.j(this._delegate,it);return t?lt(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){O(this._delegate,t)}onAuthStateChanged(t,e,n){const{next:i,error:r,complete:s}=gt(t,e,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(t,e,n){const{next:i,error:r,complete:s}=gt(t,e,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(t,e){return r.aa(this._delegate,t,e)}sendPasswordResetEmail(t,e){return r.a3(this._delegate,t,e||void 0)}async setPersistence(t){let e;switch(X(this._delegate,t),t){case Y.SESSION:e=r.a;break;case Y.LOCAL:const t=await r.aC(r.i)._isAvailable();e=t?r.i:r.b;break;case Y.NONE:e=r.N;break;default:return r.av("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return lt(this._delegate,r._(this._delegate))}signInWithCredential(t){return lt(this._delegate,r.$(this._delegate,t))}signInWithCustomToken(t){return lt(this._delegate,r.a2(this._delegate,t))}signInWithEmailAndPassword(t,e){return lt(this._delegate,r.a9(this._delegate,t,e))}signInWithEmailLink(t,e){return lt(this._delegate,r.ac(this._delegate,t,e))}signInWithPhoneNumber(t,e){return ut(this._delegate,r.s(this._delegate,t,e))}async signInWithPopup(t){return ft(W(),this._delegate,"operation-not-supported-in-this-environment"),lt(this._delegate,r.c(this._delegate,t,it))}async signInWithRedirect(t){return ft(W(),this._delegate,"operation-not-supported-in-this-environment"),await Z(this._delegate),r.f(this._delegate,t,it)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return r.a7(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function gt(t,e,n){let i=t;"function"!==typeof t&&({next:i,error:e,complete:n}=t);const r=i,s=t=>r(t&&dt.getOrCreate(t));return{next:s,error:e,complete:n}}function mt(t,e){const n=tt(t,e);if("undefined"===typeof self||n.includes(r.i)||n.push(r.i),"undefined"!==typeof window)for(const i of[r.b,r.a])n.includes(i)||n.push(i);return n.includes(r.N)||n.push(r.N),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pt.Persistence=Y;class yt{constructor(){this.providerId="phone",this._delegate=new r.P(rt(i.Z.auth()))}static credential(t,e){return r.P.credential(t,e)}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}yt.PHONE_SIGN_IN_METHOD=r.P.PHONE_SIGN_IN_METHOD,yt.PROVIDER_ID=r.P.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vt=r.aA;class bt{constructor(t,e,n=i.Z.app()){var s;vt(null===(s=n.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new r.R(t,e,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="auth-compat";function _t(t){t.INTERNAL.registerComponent(new o.wA(wt,(t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("auth");return new pt(e,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:r.A.EMAIL_SIGNIN,PASSWORD_RESET:r.A.PASSWORD_RESET,RECOVER_EMAIL:r.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:r.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:r.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:r.A.VERIFY_EMAIL}},EmailAuthProvider:r.Q,FacebookAuthProvider:r.U,GithubAuthProvider:r.W,GoogleAuthProvider:r.V,OAuthProvider:r.X,SAMLAuthProvider:r.Y,PhoneAuthProvider:yt,PhoneMultiFactorGenerator:r.m,RecaptchaVerifier:bt,TwitterAuthProvider:r.Z,Auth:pt,AuthCredential:r.J,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(P,M)}_t(i.Z)},8981:function(t,e,n){"use strict";n(3767),n(8585),n(8696);var i=n(2661),r=n(9504),s=n(223),o=n(7142);const a="@firebase/firestore-compat",c="0.3.9";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new r.WA("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(){if("undefined"===typeof Uint8Array)throw new r.WA("unimplemented","Uint8Arrays are not available in this environment.")}function h(){if(!(0,r.Me)())throw new r.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class d{constructor(t){this._delegate=t}static fromBase64String(t){return h(),new d(r.Jj.fromBase64String(t))}static fromUint8Array(t){return u(),new d(r.Jj.fromUint8Array(t))}toBase64(){return h(),this._delegate.toBase64()}toUint8Array(){return u(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(t){return p(t,["next","error","complete"])}function p(t,e){if("object"!==typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"===typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{enableIndexedDbPersistence(t,e){return(0,r.ST)(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return(0,r.fH)(t._delegate)}clearIndexedDbPersistence(t){return(0,r.Fc)(t._delegate)}}class m{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof r.l7||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();t.merge||e.host===t.host||(0,r.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,n={}){(0,r.at)(this._delegate,t,e,n)}enableNetwork(){return(0,r.Ix)(this._delegate)}disableNetwork(){return(0,r.TF)(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,(0,r.Wi)("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,r.Mx)(this._delegate)}onSnapshotsInSync(t){return(0,r.sc)(this._delegate,t)}get app(){if(!this._appCompat)throw new r.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new R(this,(0,r.hJ)(this._delegate,t))}catch(e){throw I(e,"collection()","Firestore.collection()")}}doc(t){try{return new x(this,(0,r.JU)(this._delegate,t))}catch(e){throw I(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new C(this,(0,r.B$)(this._delegate,t))}catch(e){throw I(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return(0,r.i3)(this._delegate,(e=>t(new b(this,e))))}batch(){return(0,r.qY)(this._delegate),new w(new r.PU(this._delegate,(t=>(0,r.GL)(this._delegate,t))))}loadBundle(t){return(0,r.Pb)(this._delegate,t)}namedQuery(t){return(0,r.L$)(this._delegate,t).then((t=>t?new C(this,t):null))}}class y extends r.u7{constructor(t){super(),this.firestore=t}convertBytes(t){return new d(new r.Jj(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return x.forKey(e,this.firestore,null)}}function v(t){(0,r.Ub)(t)}class b{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new y(t)}get(t){const e=O(t);return this._delegate.get(e).then((t=>new S(this._firestore,new r.xU(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter))))}set(t,e,n){const i=O(t);return n?(l("Transaction.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const r=O(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,n,...i),this}delete(t){const e=O(t);return this._delegate.delete(e),this}}class w{constructor(t){this._delegate=t}set(t,e,n){const i=O(t);return n?(l("WriteBatch.set",n),this._delegate.set(i,e,n)):this._delegate.set(i,e),this}update(t,e,n,...i){const r=O(t);return 2===arguments.length?this._delegate.update(r,e):this._delegate.update(r,e,n,...i),this}delete(t){const e=O(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class _{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new r.$q(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new k(this._firestore,n),null!==e&&void 0!==e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=_.INSTANCES;let i=n.get(t);i||(i=new WeakMap,n.set(t,i));let r=i.get(e);return r||(r=new _(t,new y(t),e),i.set(e,r)),r}}_.INSTANCES=new WeakMap;class x{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new y(t)}static forPath(t,e,n){if(t.length%2!==0)throw new r.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new x(e,new r.my(e._delegate,n,new r.Ky(t)))}static forKey(t,e,n){return new x(e,new r.my(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new R(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new R(this.firestore,(0,r.hJ)(this._delegate,t))}catch(e){throw I(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=(0,s.m9)(t),t instanceof r.my&&(0,r.Eo)(this._delegate,t)}set(t,e){e=l("DocumentReference.set",e);try{return e?(0,r.pl)(this._delegate,t,e):(0,r.pl)(this._delegate,t)}catch(n){throw I(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?(0,r.r7)(this._delegate,t):(0,r.r7)(this._delegate,t,e,...n)}catch(i){throw I(i,"updateDoc()","DocumentReference.update()")}}delete(){return(0,r.oe)(this._delegate)}onSnapshot(...t){const e=E(t),n=T(t,(t=>new S(this.firestore,new r.xU(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))));return(0,r.cf)(this._delegate,e,n)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?(0,r.kl)(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?(0,r.Xk)(this._delegate):(0,r.QT)(this._delegate),e.then((t=>new S(this.firestore,new r.xU(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))))}withConverter(t){return new x(this.firestore,t?this._delegate.withConverter(_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function I(t,e,n){return t.message=t.message.replace(e,n),t}function E(t){for(const e of t)if("object"===typeof e&&!f(e))return e;return{}}function T(t,e){var n,i;let r;return r=f(t[0])?t[0]:f(t[1])?t[1]:"function"===typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{r.next&&r.next(e(t))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class S{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new x(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return(0,r.qK)(this._delegate,t._delegate)}}class k extends S{data(t){const e=this._delegate.data(t);return(0,r.K9)(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e}}class C{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new y(t)}where(t,e,n){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.ar)(t,e,n)))}catch(i){throw I(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.Xo)(t,e)))}catch(n){throw I(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.b9)(t)))}catch(e){throw I(e,"limit()","Query.limit()")}}limitToLast(t){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.vh)(t)))}catch(e){throw I(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.e0)(...t)))}catch(e){throw I(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.TQ)(...t)))}catch(e){throw I(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.Lx)(...t)))}catch(e){throw I(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new C(this.firestore,(0,r.IO)(this._delegate,(0,r.Wu)(...t)))}catch(e){throw I(e,"endAt()","Query.endAt()")}}isEqual(t){return(0,r.iE)(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?(0,r.UQ)(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?(0,r.zN)(this._delegate):(0,r.PL)(this._delegate),e.then((t=>new D(this.firestore,new r.W(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))))}onSnapshot(...t){const e=E(t),n=T(t,(t=>new D(this.firestore,new r.W(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))));return(0,r.cf)(this._delegate,e,n)}withConverter(t){return new C(this.firestore,t?this._delegate.withConverter(_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class A{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new k(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class D{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new C(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((t=>new k(this._firestore,t)))}docChanges(t){return this._delegate.docChanges(t).map((t=>new A(this._firestore,t)))}forEach(t,e){this._delegate.forEach((n=>{t.call(e,new k(this._firestore,n))}))}isEqual(t){return(0,r.qK)(this._delegate,t._delegate)}}class R extends C{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new x(this.firestore,t):null}doc(t){try{return new x(this.firestore,void 0===t?(0,r.JU)(this._delegate):(0,r.JU)(this._delegate,t))}catch(e){throw I(e,"doc()","CollectionReference.doc()")}}add(t){return(0,r.ET)(this._delegate,t).then((t=>new x(this.firestore,t)))}isEqual(t){return(0,r.Eo)(this._delegate,t._delegate)}withConverter(t){return new R(this.firestore,t?this._delegate.withConverter(_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function O(t){return(0,r.Cf)(t,r.my)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(...t){this._delegate=new r.Lz(...t)}static documentId(){return new P(r.Xb.keyField().canonicalString())}isEqual(t){return t=(0,s.m9)(t),t instanceof r.Lz&&this._delegate._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(t){this._delegate=t}static serverTimestamp(){const t=(0,r.Bt)();return t._methodName="FieldValue.serverTimestamp",new M(t)}static delete(){const t=(0,r.AK)();return t._methodName="FieldValue.delete",new M(t)}static arrayUnion(...t){const e=(0,r.vr)(...t);return e._methodName="FieldValue.arrayUnion",new M(e)}static arrayRemove(...t){const e=(0,r.Ab)(...t);return e._methodName="FieldValue.arrayRemove",new M(e)}static increment(t){const e=(0,r.nP)(t);return e._methodName="FieldValue.increment",new M(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={Firestore:m,GeoPoint:r.F8,Timestamp:r.EK,Blob:d,Transaction:b,WriteBatch:w,DocumentReference:x,DocumentSnapshot:S,Query:C,QueryDocumentSnapshot:k,QuerySnapshot:D,CollectionReference:R,FieldPath:P,FieldValue:M,setLogLevel:v,CACHE_SIZE_UNLIMITED:r.IX};function L(t,e){t.INTERNAL.registerComponent(new o.wA("firestore-compat",(t=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(n,i)}),"PUBLIC").setServiceProps(Object.assign({},N)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t){L(t,((t,e)=>new m(t,e,new g))),t.registerVersion(a,c)}F(i.Z)},9232:function(t,e,n){"use strict";n.d(e,{IO:function(){return i.IO},PL:function(){return i.PL},ar:function(){return i.ar},hJ:function(){return i.hJ}});var i=n(9504)},5866:function(t,e,n){"use strict";n.d(e,{$Q:function(){return y}});n(7658);var i=n(3396),r=n(4870),s=n(9646);const o={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},a={type:{type:String,required:!0},...o},c="2"===i.i8[0]?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function l(t){return(0,r.X3)(t)?(0,r.IU)(t):t}function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return(0,r.X3)(e)?new Proxy(t,{}):t}function h(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function d(t,e){t.labels=e}function f(t,e,n){const i=[];t.datasets=e.map((e=>{const r=t.datasets.find((t=>t[n]===e[n]));return r&&e.data&&!i.includes(r)?(i.push(r),Object.assign(r,e),r):{...e}}))}function p(t,e){const n={labels:[],datasets:[]};return d(n,t.labels),f(n,t.datasets,e),n}const g=(0,i.aZ)({props:a,setup(t,e){let{expose:n}=e;const o=(0,r.iH)(null),a=(0,r.XI)(null);n({chart:a});const c=()=>{if(!o.value)return;const{type:e,data:n,options:i,plugins:r,datasetIdKey:c}=t,l=p(n,c),h=u(l,n);a.value=new s.kL(o.value,{type:e,data:h,options:{...i},plugins:r})},g=()=>{const t=(0,r.IU)(a.value);t&&(t.destroy(),a.value=null)},m=e=>{e.update(t.updateMode)};return(0,i.bv)(c),(0,i.Jd)(g),(0,i.YP)([()=>t.options,()=>t.data],((e,n)=>{let[i,s]=e,[o,c]=n;const u=(0,r.IU)(a.value);if(!u)return;let p=!1;if(i){const t=l(i),e=l(o);t&&t!==e&&(h(u,t),p=!0)}if(s){const e=l(s.labels),n=l(c.labels),i=l(s.datasets),r=l(c.datasets);e!==n&&(d(u.config.data,e),p=!0),i&&i!==r&&(f(u.config.data,i,t.datasetIdKey),p=!0)}p&&m(u)}),{deep:!0}),()=>(0,i.h)("canvas",{ref:o})}});function m(t,e){return s.kL.register(e),(0,i.aZ)({props:o,setup(e,n){let{expose:s}=n;const o=(0,r.XI)(null),a=t=>{o.value=t?.chart};return s({chart:o}),()=>(0,i.h)(g,c({ref:a},{type:t,...e}))}})}const y=m("bar",s.vn)},2483:function(t,e,n){"use strict";n.d(e,{p7:function(){return ne},r5:function(){return B}});n(7658);var i=n(3396),r=n(4870);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const s="undefined"!==typeof window;function o(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function c(t,e){const n={};for(const i in e){const r=e[i];n[i]=u(r)?r.map(t):t(r)}return n}const l=()=>{},u=Array.isArray;const h=/\/$/,d=t=>t.replace(h,"");function f(t,e,n="/"){let i,r={},s="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(i=e.slice(0,c),s=e.slice(c+1,a>-1?a:e.length),r=t(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=_(null!=i?i:e,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function m(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&y(e.matched[i],n.matched[r])&&v(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function y(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function v(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!b(t[n],e[n]))return!1;return!0}function b(t,e){return u(t)?w(t,e):u(e)?w(e,t):t===e}function w(t,e){return u(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function _(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let r,s,o=n.length-1;for(r=0;r<i.length;r++)if(s=i[r],"."!==s){if(".."!==s)break;o>1&&o--}return n.slice(0,o).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var x,I;(function(t){t["pop"]="pop",t["push"]="push"})(x||(x={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(I||(I={}));function E(t){if(!t)if(s){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),d(t)}const T=/^[^#]+#/;function S(t,e){return t.replace(T,"#")+e}function k(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const C=()=>({left:window.pageXOffset,top:window.pageYOffset});function A(t){let e;if("el"in t){const n=t.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=k(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function D(t,e){const n=history.state?history.state.position-e:-1;return n+t}const R=new Map;function O(t,e){R.set(t,e)}function P(t){const e=R.get(t);return R.delete(t),e}let M=()=>location.protocol+"//"+location.host;function N(t,e){const{pathname:n,search:i,hash:r}=e,s=t.indexOf("#");if(s>-1){let e=r.includes(t.slice(s))?t.slice(s).length:1,n=r.slice(e);return"/"!==n[0]&&(n="/"+n),g(n,"")}const o=g(n,t);return o+i+r}function L(t,e,n,i){let r=[],s=[],o=null;const c=({state:s})=>{const a=N(t,location),c=n.value,l=e.value;let u=0;if(s){if(n.value=a,e.value=s,o&&o===c)return void(o=null);u=l?s.position-l.position:0}else i(a);r.forEach((t=>{t(n.value,c,{delta:u,type:x.pop,direction:u?u>0?I.forward:I.back:I.unknown})}))};function l(){o=n.value}function u(t){r.push(t);const e=()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)};return s.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:C()}),"")}function d(){for(const t of s)t();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:u,destroy:d}}function F(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?C():null}}function V(t){const{history:e,location:n}=window,i={value:N(t,n)},r={value:e.state};function s(i,s,o){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+i:M()+t+i;try{e[o?"replaceState":"pushState"](s,"",c),r.value=s}catch(l){console.error(l),n[o?"replace":"assign"](c)}}function o(t,n){const o=a({},e.state,F(r.value.back,t,r.value.forward,!0),n,{position:r.value.position});s(t,o,!0),i.value=t}function c(t,n){const o=a({},r.value,e.state,{forward:t,scroll:C()});s(o.current,o,!0);const c=a({},F(i.value,t,null),{position:o.position+1},n);s(t,c,!1),i.value=t}return r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:c,replace:o}}function U(t){t=E(t);const e=V(t),n=L(t,e.state,e.location,e.replace);function i(t,e=!0){e||n.pauseListeners(),history.go(t)}const r=a({location:"",base:t,go:i,createHref:S.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function B(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),U(t)}function j(t){return"string"===typeof t||t&&"object"===typeof t}function z(t){return"string"===typeof t||"symbol"===typeof t}const q={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$=Symbol("");var W;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(W||(W={}));function H(t,e){return a(new Error,{type:t,[$]:!0},e)}function G(t,e){return t instanceof Error&&$ in t&&(null==e||!!(t.type&e))}const K="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},Q=/[.+*?^${}()[\]/\\]/g;function J(t,e){const n=a({},Y,e),i=[];let r=n.start?"^":"";const s=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(r+="/");for(let e=0;e<a.length;e++){const i=a[e];let o=40+(n.sensitive?.25:0);if(0===i.type)e||(r+="/"),r+=i.value.replace(Q,"\\$&"),o+=40;else if(1===i.type){const{value:t,repeatable:n,optional:c,regexp:l}=i;s.push({name:t,repeatable:n,optional:c});const u=l||K;if(u!==K){o+=10;try{new RegExp(`(${u})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+h.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(d=c&&a.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),r+=d,o+=20,c&&(o+=-8),n&&(o+=-20),".*"===u&&(o+=-50)}t.push(o)}i.push(t)}if(n.strict&&n.end){const t=i.length-1;i[t][i[t].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function c(t){const e=t.match(o),n={};if(!e)return null;for(let i=1;i<e.length;i++){const t=e[i]||"",r=s[i-1];n[r.name]=t&&r.repeatable?t.split("/"):t}return n}function l(e){let n="",i=!1;for(const r of t){i&&n.endsWith("/")||(n+="/"),i=!1;for(const t of r)if(0===t.type)n+=t.value;else if(1===t.type){const{value:s,repeatable:o,optional:a}=t,c=s in e?e[s]:"";if(u(c)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const l=u(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${s}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=l}}return n||"/"}return{re:o,score:i,keys:s,parse:c,stringify:l}}function X(t,e){let n=0;while(n<t.length&&n<e.length){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function Z(t,e){let n=0;const i=t.score,r=e.score;while(n<i.length&&n<r.length){const t=X(i[n],r[n]);if(t)return t;n++}if(1===Math.abs(r.length-i.length)){if(tt(i))return 1;if(tt(r))return-1}return r.length-i.length}function tt(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const et={type:0,value:""},nt=/[a-zA-Z0-9_]/;function it(t){if(!t)return[[]];if("/"===t)return[[et]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${l}": ${t}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a,c=0,l="",u="";function h(){l&&(0===n?s.push({type:0,value:l}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),l="")}function d(){l+=a}while(c<t.length)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&h(),o()):":"===a?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:nt.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,u="";break;default:e("Unknown state");break}else i=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),r}function rt(t,e,n){const i=J(it(t.path),n);const r=a(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf===!e.record.aliasOf&&e.children.push(r),r}function st(t,e){const n=[],i=new Map;function r(t){return i.get(t)}function s(t,n,i){const r=!i,c=at(t);c.aliasOf=i&&i.record;const h=ht(e,t),d=[c];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(a({},c,{components:i?i.record.components:c.components,path:t,aliasOf:i?i.record:c}))}let f,p;for(const e of d){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,i="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&i+a)}if(f=rt(e,n,h),i?i.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),r&&t.name&&!lt(f)&&o(t.name)),c.children){const t=c.children;for(let e=0;e<t.length;e++)s(t[e],f,i&&i.children[e])}i=i||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{o(p)}:l}function o(t){if(z(t)){const e=i.get(t);e&&(i.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&i.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function c(){return n}function u(t){let e=0;while(e<n.length&&Z(t,n[e])>=0&&(t.record.path!==n[e].record.path||!dt(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!lt(t)&&i.set(t.record.name,t)}function h(t,e){let r,s,o,c={};if("name"in t&&t.name){if(r=i.get(t.name),!r)throw H(1,{location:t});0,o=r.record.name,c=a(ot(e.params,r.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&ot(t.params,r.keys.map((t=>t.name)))),s=r.stringify(c)}else if("path"in t)s=t.path,r=n.find((t=>t.re.test(s))),r&&(c=r.parse(s),o=r.record.name);else{if(r=e.name?i.get(e.name):n.find((t=>t.re.test(e.path))),!r)throw H(1,{location:t,currentLocation:e});o=r.record.name,c=a({},e.params,t.params),s=r.stringify(c)}const l=[];let u=r;while(u)l.unshift(u.record),u=u.parent;return{name:o,path:s,params:c,matched:l,meta:ut(l)}}return e=ht({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>s(t))),{addRoute:s,resolve:h,removeRoute:o,getRoutes:c,getRecordMatcher:r}}function ot(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function at(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ct(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function ct(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]="boolean"===typeof n?n:n[i];return e}function lt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ut(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ht(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function dt(t,e){return e.children.some((e=>e===t||dt(t,e)))}const ft=/#/g,pt=/&/g,gt=/\//g,mt=/=/g,yt=/\?/g,vt=/\+/g,bt=/%5B/g,wt=/%5D/g,_t=/%5E/g,xt=/%60/g,It=/%7B/g,Et=/%7C/g,Tt=/%7D/g,St=/%20/g;function kt(t){return encodeURI(""+t).replace(Et,"|").replace(bt,"[").replace(wt,"]")}function Ct(t){return kt(t).replace(It,"{").replace(Tt,"}").replace(_t,"^")}function At(t){return kt(t).replace(vt,"%2B").replace(St,"+").replace(ft,"%23").replace(pt,"%26").replace(xt,"`").replace(It,"{").replace(Tt,"}").replace(_t,"^")}function Dt(t){return At(t).replace(mt,"%3D")}function Rt(t){return kt(t).replace(ft,"%23").replace(yt,"%3F")}function Ot(t){return null==t?"":Rt(t).replace(gt,"%2F")}function Pt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Mt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],i=(n?t.slice(1):t).split("&");for(let r=0;r<i.length;++r){const t=i[r].replace(vt," "),n=t.indexOf("="),s=Pt(n<0?t:t.slice(0,n)),o=n<0?null:Pt(t.slice(n+1));if(s in e){let t=e[s];u(t)||(t=e[s]=[t]),t.push(o)}else e[s]=o}return e}function Nt(t){let e="";for(let n in t){const i=t[n];if(n=Dt(n),null==i){void 0!==i&&(e+=(e.length?"&":"")+n);continue}const r=u(i)?i.map((t=>t&&At(t))):[i&&At(i)];r.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Lt(t){const e={};for(const n in t){const i=t[n];void 0!==i&&(e[n]=u(i)?i.map((t=>null==t?null:""+t)):null==i?i:""+i)}return e}const Ft=Symbol(""),Vt=Symbol(""),Ut=Symbol(""),Bt=Symbol(""),jt=Symbol("");function zt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function qt(t,e,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise(((o,a)=>{const c=t=>{!1===t?a(H(4,{from:n,to:e})):t instanceof Error?a(t):j(t)?a(H(2,{from:e,to:t})):(s&&i.enterCallbacks[r]===s&&"function"===typeof t&&s.push(t),o())},l=t.call(i&&i.instances[r],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch((t=>a(t)))}))}function $t(t,e,n,i){const r=[];for(const s of t){0;for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if(Wt(a)){const o=a.__vccOpts||a,c=o[e];c&&r.push(qt(c,n,i,s,t))}else{let c=a();0,r.push((()=>c.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const a=o(r)?r.default:r;s.components[t]=a;const c=a.__vccOpts||a,l=c[e];return l&&qt(l,n,i,s,t)()}))))}}}return r}function Wt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Ht(t){const e=(0,i.f3)(Ut),n=(0,i.f3)(Bt),s=(0,i.Fl)((()=>e.resolve((0,r.SU)(t.to)))),o=(0,i.Fl)((()=>{const{matched:t}=s.value,{length:e}=t,i=t[e-1],r=n.matched;if(!i||!r.length)return-1;const o=r.findIndex(y.bind(null,i));if(o>-1)return o;const a=Jt(t[e-2]);return e>1&&Jt(i)===a&&r[r.length-1].path!==a?r.findIndex(y.bind(null,t[e-2])):o})),a=(0,i.Fl)((()=>o.value>-1&&Qt(n.params,s.value.params))),c=(0,i.Fl)((()=>o.value>-1&&o.value===n.matched.length-1&&v(n.params,s.value.params)));function u(n={}){return Yt(n)?e[(0,r.SU)(t.replace)?"replace":"push"]((0,r.SU)(t.to)).catch(l):Promise.resolve()}return{route:s,href:(0,i.Fl)((()=>s.value.href)),isActive:a,isExactActive:c,navigate:u}}const Gt=(0,i.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ht,setup(t,{slots:e}){const n=(0,r.qj)(Ht(t)),{options:s}=(0,i.f3)(Ut),o=(0,i.Fl)((()=>({[Xt(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Xt(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:(0,i.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),Kt=Gt;function Yt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Qt(t,e){for(const n in e){const i=e[n],r=t[n];if("string"===typeof i){if(i!==r)return!1}else if(!u(r)||r.length!==i.length||i.some(((t,e)=>t!==r[e])))return!1}return!0}function Jt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Xt=(t,e,n)=>null!=t?t:null!=e?e:n,Zt=(0,i.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=(0,i.f3)(jt),o=(0,i.Fl)((()=>t.route||s.value)),c=(0,i.f3)(Vt,0),l=(0,i.Fl)((()=>{let t=(0,r.SU)(c);const{matched:e}=o.value;let n;while((n=e[t])&&!n.components)t++;return t})),u=(0,i.Fl)((()=>o.value.matched[l.value]));(0,i.JJ)(Vt,(0,i.Fl)((()=>l.value+1))),(0,i.JJ)(Ft,u),(0,i.JJ)(jt,o);const h=(0,r.iH)();return(0,i.YP)((()=>[h.value,u.value,t.name]),(([t,e,n],[i,r,s])=>{e&&(e.instances[n]=t,r&&r!==e&&t&&t===i&&(e.leaveGuards.size||(e.leaveGuards=r.leaveGuards),e.updateGuards.size||(e.updateGuards=r.updateGuards))),!t||!e||r&&y(e,r)&&i||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=o.value,s=t.name,c=u.value,l=c&&c.components[s];if(!l)return te(n.default,{Component:l,route:r});const d=c.props[s],f=d?!0===d?r.params:"function"===typeof d?d(r):d:null,p=t=>{t.component.isUnmounted&&(c.instances[s]=null)},g=(0,i.h)(l,a({},f,e,{onVnodeUnmounted:p,ref:h}));return te(n.default,{Component:g,route:r})||g}}});function te(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const ee=Zt;function ne(t){const e=st(t.routes,t),n=t.parseQuery||Mt,o=t.stringifyQuery||Nt,h=t.history;const d=zt(),g=zt(),y=zt(),v=(0,r.XI)(q);let b=q;s&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=c.bind(null,(t=>""+t)),_=c.bind(null,Ot),I=c.bind(null,Pt);function E(t,n){let i,r;return z(t)?(i=e.getRecordMatcher(t),r=n):r=t,e.addRoute(r,i)}function T(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function S(){return e.getRoutes().map((t=>t.record))}function k(t){return!!e.getRecordMatcher(t)}function R(t,i){if(i=a({},i||v.value),"string"===typeof t){const r=f(n,t,i.path),s=e.resolve({path:r.path},i),o=h.createHref(r.fullPath);return a(r,s,{params:I(s.params),hash:Pt(r.hash),redirectedFrom:void 0,href:o})}let r;if("path"in t)r=a({},t,{path:f(n,t.path,i.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];r=a({},t,{params:_(t.params)}),i.params=_(i.params)}const s=e.resolve(r,i),c=t.hash||"";s.params=w(I(s.params));const l=p(o,a({},t,{hash:Ct(c),path:s.path})),u=h.createHref(l);return a({fullPath:l,hash:c,query:o===Nt?Lt(t.query):t.query||{}},s,{redirectedFrom:void 0,href:u})}function M(t){return"string"===typeof t?f(n,t,v.value.path):a({},t)}function N(t,e){if(b!==t)return H(8,{from:e,to:t})}function L(t){return U(t)}function F(t){return L(a(M(t),{replace:!0}))}function V(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let i="function"===typeof n?n(t):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=M(i):{path:i},i.params={}),a({query:t.query,hash:t.hash,params:"path"in i?{}:t.params},i)}}function U(t,e){const n=b=R(t),i=v.value,r=t.state,s=t.force,c=!0===t.replace,l=V(n);if(l)return U(a(M(l),{state:"object"===typeof l?a({},r,l.state):r,force:s,replace:c}),e||n);const u=n;let h;return u.redirectedFrom=e,!s&&m(o,i,n)&&(h=H(16,{to:u,from:i}),nt(i,i,!0,!1)),(h?Promise.resolve(h):j(u,i)).catch((t=>G(t)?G(t,2)?t:et(t):Z(t,u,i))).then((t=>{if(t){if(G(t,2))return U(a({replace:c},M(t.to),{state:"object"===typeof t.to?a({},r,t.to.state):r,force:s}),e||u)}else t=W(u,i,!0,c,r);return $(u,i,t),t}))}function B(t,e){const n=N(t,e);return n?Promise.reject(n):Promise.resolve()}function j(t,e){let n;const[i,r,s]=re(t,e);n=$t(i.reverse(),"beforeRouteLeave",t,e);for(const a of i)a.leaveGuards.forEach((i=>{n.push(qt(i,t,e))}));const o=B.bind(null,t,e);return n.push(o),ie(n).then((()=>{n=[];for(const i of d.list())n.push(qt(i,t,e));return n.push(o),ie(n)})).then((()=>{n=$t(r,"beforeRouteUpdate",t,e);for(const i of r)i.updateGuards.forEach((i=>{n.push(qt(i,t,e))}));return n.push(o),ie(n)})).then((()=>{n=[];for(const i of t.matched)if(i.beforeEnter&&!e.matched.includes(i))if(u(i.beforeEnter))for(const r of i.beforeEnter)n.push(qt(r,t,e));else n.push(qt(i.beforeEnter,t,e));return n.push(o),ie(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=$t(s,"beforeRouteEnter",t,e),n.push(o),ie(n)))).then((()=>{n=[];for(const i of g.list())n.push(qt(i,t,e));return n.push(o),ie(n)})).catch((t=>G(t,8)?t:Promise.reject(t)))}function $(t,e,n){for(const i of y.list())i(t,e,n)}function W(t,e,n,i,r){const o=N(t,e);if(o)return o;const c=e===q,l=s?history.state:{};n&&(i||c?h.replace(t.fullPath,a({scroll:c&&l&&l.scroll},r)):h.push(t.fullPath,r)),v.value=t,nt(t,e,n,c),et()}let K;function Y(){K||(K=h.listen(((t,e,n)=>{if(!at.listening)return;const i=R(t),r=V(i);if(r)return void U(a(r,{replace:!0}),i).catch(l);b=i;const o=v.value;s&&O(D(o.fullPath,n.delta),C()),j(i,o).catch((t=>G(t,12)?t:G(t,2)?(U(t.to,i).then((t=>{G(t,20)&&!n.delta&&n.type===x.pop&&h.go(-1,!1)})).catch(l),Promise.reject()):(n.delta&&h.go(-n.delta,!1),Z(t,i,o)))).then((t=>{t=t||W(i,o,!1),t&&(n.delta&&!G(t,8)?h.go(-n.delta,!1):n.type===x.pop&&G(t,20)&&h.go(-1,!1)),$(i,o,t)})).catch(l)})))}let Q,J=zt(),X=zt();function Z(t,e,n){et(t);const i=X.list();return i.length?i.forEach((i=>i(t,e,n))):console.error(t),Promise.reject(t)}function tt(){return Q&&v.value!==q?Promise.resolve():new Promise(((t,e)=>{J.add([t,e])}))}function et(t){return Q||(Q=!t,Y(),J.list().forEach((([e,n])=>t?n(t):e())),J.reset()),t}function nt(e,n,r,o){const{scrollBehavior:a}=t;if(!s||!a)return Promise.resolve();const c=!r&&P(D(e.fullPath,0))||(o||!r)&&history.state&&history.state.scroll||null;return(0,i.Y3)().then((()=>a(e,n,c))).then((t=>t&&A(t))).catch((t=>Z(t,e,n)))}const it=t=>h.go(t);let rt;const ot=new Set,at={currentRoute:v,listening:!0,addRoute:E,removeRoute:T,hasRoute:k,getRoutes:S,resolve:R,options:t,push:L,replace:F,go:it,back:()=>it(-1),forward:()=>it(1),beforeEach:d.add,beforeResolve:g.add,afterEach:y.add,onError:X.add,isReady:tt,install(t){const e=this;t.component("RouterLink",Kt),t.component("RouterView",ee),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,r.SU)(v)}),s&&!rt&&v.value===q&&(rt=!0,L(h.location).catch((t=>{0})));const n={};for(const r in q)n[r]=(0,i.Fl)((()=>v.value[r]));t.provide(Ut,e),t.provide(Bt,(0,r.qj)(n)),t.provide(jt,v);const o=t.unmount;ot.add(t),t.unmount=function(){ot.delete(t),ot.size<1&&(b=q,K&&K(),K=null,v.value=q,rt=!1,Q=!1),o()}}};return at}function ie(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function re(t,e){const n=[],i=[],r=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const s=e.matched[o];s&&(t.matched.find((t=>y(t,s)))?i.push(s):n.push(s));const a=t.matched[o];a&&(e.matched.find((t=>y(t,a)))||r.push(a))}return[n,i,r]}}}]);
//# sourceMappingURL=chunk-vendors.094b014f.js.map